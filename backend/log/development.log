Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:16:20 +0900
  
LoadError (cannot load such file -- /Users/yoshito-t/Desktop/spa-portfolio-app/backend/config/routes.rb):
  
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `load'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `block in load_paths'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `each'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `load_paths'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:21:in `reload!'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:35:in `block in updater'
activesupport (6.1.7.6) lib/active_support/file_update_checker.rb:83:in `execute'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:10:in `execute'
railties (6.1.7.6) lib/rails/application/finisher.rb:208:in `block (2 levels) in <module:Finisher>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:427:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:427:in `block in make_lambda'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:198:in `block (2 levels) in halting'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:604:in `block (2 levels) in default_terminator'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:603:in `catch'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:603:in `block in default_terminator'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:199:in `block in halting'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:512:in `block in invoke_before'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:512:in `each'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:512:in `invoke_before'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:105:in `run_callbacks'
activesupport (6.1.7.6) lib/active_support/execution_wrapper.rb:114:in `run!'
activesupport (6.1.7.6) lib/active_support/reloader.rb:114:in `run!'
activesupport (6.1.7.6) lib/active_support/execution_wrapper.rb:77:in `block in run!'
<internal:kernel>:90:in `tap'
activesupport (6.1.7.6) lib/active_support/execution_wrapper.rb:74:in `run!'
activesupport (6.1.7.6) lib/active_support/reloader.rb:63:in `run!'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:16:30 +0900
  
ActionController::RoutingError (No route matches [GET] "/notifications/check_unread_notifications"):
  
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 13:20:16 +0900
  
ActionController::RoutingError (No route matches [GET] "/pages/new_reviews"):
  
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 13:22:08 +0900
  [1m[35m (0.9ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 306ms (Views: 2.4ms | ActiveRecord: 18.5ms | Allocations: 116388)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:23:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 868)


Started GET "/pages/popular_books" for ::1 at 2023-09-27 13:23:21 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 13:23:21 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-09-27 13:23:21 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (13.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  [1m[36mBook Load (4.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 8.7ms | Allocations: 11894)


  [1m[36mReview Load (2.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (7.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 102ms (Views: 1.6ms | ActiveRecord: 17.9ms | Allocations: 67306)


  [1m[36mFavoriteBook Load (33.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 176ms (Views: 1.1ms | ActiveRecord: 74.5ms | Allocations: 113164)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-09-27 13:23:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-09-27 13:23:23 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-09-27 13:23:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (4.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
[36m  S3 Storage (188.9ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=34f02ce7af0aa7a26d42522cfb53a063ccfa82781fffd6c49149e1cc0181912a)[0m
[36m  S3 Storage (131.2ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=95a4533e5c016358f146241c65099575a5b9dbbdf171a7e37e291b0e743ca1ab)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=34f02ce7af0aa7a26d42522cfb53a063ccfa82781fffd6c49149e1cc0181912a
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=95a4533e5c016358f146241c65099575a5b9dbbdf171a7e37e291b0e743ca1ab
[36m  S3 Storage (352.7ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=d75bb9ec935505c151ef3625ed8f8b66d6dbad613b9a9d64baf5925764a513db)[0m
Completed 302 Found in 210ms (ActiveRecord: 2.0ms | Allocations: 63787)


Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=d75bb9ec935505c151ef3625ed8f8b66d6dbad613b9a9d64baf5925764a513db
Completed 302 Found in 208ms (ActiveRecord: 4.4ms | Allocations: 63394)


Completed 302 Found in 379ms (ActiveRecord: 0.7ms | Allocations: 90092)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:24:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 750)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 13:24:19 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 5020)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 13:24:19 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 13:24:19 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 26ms (ActiveRecord: 9.0ms | Allocations: 3792)


Started GET "/users/1" for ::1 at 2023-09-27 13:24:19 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (4.6ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (3.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (3.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 659ms (Views: 18.1ms | ActiveRecord: 51.6ms | Allocations: 477363)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 13:24:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.8ms | Allocations: 1142)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 13:24:21 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.8ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.9ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 239ms (Views: 225.2ms | ActiveRecord: 10.0ms | Allocations: 210409)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 14:29:39 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 3.0ms | Allocations: 4616)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:29:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 14:29:39 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.5ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 210ms (Views: 197.1ms | ActiveRecord: 8.9ms | Allocations: 204147)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 14:30:38 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 3.3ms | Allocations: 4413)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:30:38 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.3ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 14:30:39 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 227ms (Views: 213.5ms | ActiveRecord: 9.4ms | Allocations: 204152)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-09-27 14:43:20 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
[36m  S3 Storage (4.2ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054321Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c5bdf39444e8c96ecf1653282f6debdf7afe553582de473f2a1281c6812a20bf)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054321Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c5bdf39444e8c96ecf1653282f6debdf7afe553582de473f2a1281c6812a20bf
Completed 302 Found in 41ms (ActiveRecord: 7.7ms | Allocations: 2426)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:43:22 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.8ms | Allocations: 1221)


Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 14:43:22 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 14:43:22 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-09-27 14:43:22 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (2.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (10.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (7.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (4.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (3.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 109ms (Views: 1.9ms | ActiveRecord: 13.5ms | Allocations: 75689)


  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (24.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
Completed 200 OK in 179ms (Views: 0.8ms | ActiveRecord: 41.8ms | Allocations: 141435)


  [1m[36mBook Load (31.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 199ms (Views: 0.7ms | ActiveRecord: 54.8ms | Allocations: 152193)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-09-27 14:43:25 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-09-27 14:43:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
[36m  S3 Storage (6.8ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c1f2bcb8912b9abb6503f59251a55c6a56e55eeeaf4b1d908b8fcafe04fd0551)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c1f2bcb8912b9abb6503f59251a55c6a56e55eeeaf4b1d908b8fcafe04fd0551
Completed 302 Found in 66ms (ActiveRecord: 2.3ms | Allocations: 5225)


[36m  S3 Storage (3.3ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=56676b2105067c280bcc1d49e5872fbaf5419f8e926794aa01f71e09e1566ad3)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=56676b2105067c280bcc1d49e5872fbaf5419f8e926794aa01f71e09e1566ad3
Completed 302 Found in 103ms (ActiveRecord: 0.6ms | Allocations: 5484)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 14:46:33 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 4721)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:46:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.2ms | Allocations: 1077)


Started GET "/pages/popular_books" for ::1 at 2023-09-27 14:46:34 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 14:46:34 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 14:46:34 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (4.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (6.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (8.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (16.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (65.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (14.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (20.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (46.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (44.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 320ms (Views: 3.1ms | ActiveRecord: 49.3ms | Allocations: 84989)


  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 469ms (Views: 0.8ms | ActiveRecord: 66.9ms | Allocations: 141069)


  [1m[36mBook Load (75.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 495ms (Views: 0.8ms | ActiveRecord: 200.3ms | Allocations: 151086)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 12ms (ActiveRecord: 6.2ms | Allocations: 1202)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:01:14 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (1.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (3.4ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.7ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (1.0ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (1.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 659ms (Views: 19.4ms | ActiveRecord: 27.8ms | Allocations: 401912)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:01:16 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 4465)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1073)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:01:16 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:01:16 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:01:16 +0900
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (4.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (5.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (7.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (23.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (8.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (5.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 96ms (Views: 1.7ms | ActiveRecord: 19.4ms | Allocations: 85423)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (24.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
Completed 200 OK in 159ms (Views: 0.8ms | ActiveRecord: 43.9ms | Allocations: 141410)


  [1m[36mBook Load (32.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 171ms (Views: 1.2ms | ActiveRecord: 88.1ms | Allocations: 147885)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-09-27 15:01:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
[36m  S3 Storage (1.7ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060117Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=7786452fa06db1bfa77f87b6e58dd95a163f88614c48ffbb7aa12cb0bbe8201f)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060117Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=7786452fa06db1bfa77f87b6e58dd95a163f88614c48ffbb7aa12cb0bbe8201f
Completed 302 Found in 8ms (ActiveRecord: 0.8ms | Allocations: 2315)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
[36m  S3 Storage (3.6ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=4cf461df1cb2f38f41975c0e3b286382ed7e8c3cfcac49509418152791e07f14)[0m
  [1m[36mActiveStorage::Blob Load (5.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=4cf461df1cb2f38f41975c0e3b286382ed7e8c3cfcac49509418152791e07f14
Completed 302 Found in 26ms (ActiveRecord: 3.9ms | Allocations: 6572)


[36m  S3 Storage (4.3ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=e5b7295fda92075f2f404a42e7722a4fe6992665f2e115e8baa5cde25bc9d272)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=e5b7295fda92075f2f404a42e7722a4fe6992665f2e115e8baa5cde25bc9d272
Completed 302 Found in 21ms (ActiveRecord: 5.5ms | Allocations: 5431)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
[36m  S3 Storage (2.2ms) [0m[34mGenerated URL for file at key: qybe0p98y3tev030qa4g9v56qp65 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qybe0p98y3tev030qa4g9v56qp65?response-content-disposition=inline%3B%20filename%3D%22Harry%20Potter7.jpg%22%3B%20filename%2A%3DUTF-8%27%27Harry%2520Potter7.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=807074d9f33430cd0297b4a7c199c319855f4b3b01b81041fdb6f2e5185cdb3c)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qybe0p98y3tev030qa4g9v56qp65?response-content-disposition=inline%3B%20filename%3D%22Harry%20Potter7.jpg%22%3B%20filename%2A%3DUTF-8%27%27Harry%2520Potter7.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=807074d9f33430cd0297b4a7c199c319855f4b3b01b81041fdb6f2e5185cdb3c
Completed 302 Found in 12ms (ActiveRecord: 2.8ms | Allocations: 3166)


  [1m[36mActiveStorage::Blob Load (4.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
[36m  S3 Storage (3.4ms) [0m[34mGenerated URL for file at key: ab9zecbhxt8g4ygo3dwqqr3s7yp8 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ab9zecbhxt8g4ygo3dwqqr3s7yp8?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253Fjpg.jpeg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25B9%25BB%25E6%2583%25B3%25E7%259A%2584%25EF%25BC%2591jpg.jpeg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=00c31bddf3e918253f82c528f9719c47614ac2ef0ea7ea947cc543227ca91507)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ab9zecbhxt8g4ygo3dwqqr3s7yp8?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253Fjpg.jpeg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25B9%25BB%25E6%2583%25B3%25E7%259A%2584%25EF%25BC%2591jpg.jpeg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=00c31bddf3e918253f82c528f9719c47614ac2ef0ea7ea947cc543227ca91507
Completed 302 Found in 16ms (ActiveRecord: 4.1ms | Allocations: 4930)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 1.4ms | Allocations: 1221)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:01:21 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 454ms (Views: 17.2ms | ActiveRecord: 21.1ms | Allocations: 399513)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1064)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:01:23 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:01:23 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:01:23 +0900
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (8.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (5.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (3.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (5.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (21.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (4.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 129ms (Views: 2.9ms | ActiveRecord: 8.6ms | Allocations: 85773)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (34.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 191ms (Views: 1.0ms | ActiveRecord: 22.3ms | Allocations: 133341)


  [1m[36mBook Load (37.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 209ms (Views: 1.1ms | ActiveRecord: 107.9ms | Allocations: 144255)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 2.5ms | Allocations: 1063)


Started GET "/users/1" for ::1 at 2023-09-27 15:01:33 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 611ms (Views: 23.6ms | ActiveRecord: 20.1ms | Allocations: 429680)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:36 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.3ms | Allocations: 1064)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:01:36 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.8ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 548ms (Views: 17.1ms | ActiveRecord: 22.8ms | Allocations: 399325)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:50 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:01:50 +0900
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:01:50 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:01:50 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (6.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (3.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (2.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (7.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (9.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (21.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (5.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 111ms (Views: 1.8ms | ActiveRecord: 23.5ms | Allocations: 88857)


Completed 200 OK in 140ms (Views: 0.7ms | ActiveRecord: 39.1ms | Allocations: 116385)


  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 177ms (Views: 0.7ms | ActiveRecord: 23.1ms | Allocations: 150552)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-09-27 15:01:53 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
[36m  S3 Storage (3.2ms) [0m[34mGenerated URL for file at key: 8f8i7pnjp05lnps1uch1lfs5fof6 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/8f8i7pnjp05lnps1uch1lfs5fof6?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25AA%25E9%2599%25BD%25E3%2581%25AB%25E5%2590%2591%25E3%2581%258B%25E3%2581%2586%25E9%25A2%25A8%25E8%2588%25B9%25E7%25BE%25A4.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060153Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=b90a8aea70892acffa06450464b91d570a94459d5c235177b676966f1e714c18)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/8f8i7pnjp05lnps1uch1lfs5fof6?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25AA%25E9%2599%25BD%25E3%2581%25AB%25E5%2590%2591%25E3%2581%258B%25E3%2581%2586%25E9%25A2%25A8%25E8%2588%25B9%25E7%25BE%25A4.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060153Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=b90a8aea70892acffa06450464b91d570a94459d5c235177b676966f1e714c18
Completed 302 Found in 8ms (ActiveRecord: 0.5ms | Allocations: 2508)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:30 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1221)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:02:30 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (0.9ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 562ms (Views: 90.4ms | ActiveRecord: 22.2ms | Allocations: 399530)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:32 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 14ms (ActiveRecord: 6.1ms | Allocations: 1064)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:32 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 252ms (Views: 236.8ms | ActiveRecord: 9.8ms | Allocations: 204265)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:02:51 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 4428)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:51 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.6ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:51 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.5ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.4ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.5ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 206ms (Views: 194.3ms | ActiveRecord: 7.8ms | Allocations: 204150)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:03:09 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 4414)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:03:09 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:03:09 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.4ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 207ms (Views: 194.0ms | ActiveRecord: 8.4ms | Allocations: 204148)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:04:27 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 4414)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:04:27 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:04:27 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.5ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (1.0ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 258ms (Views: 245.5ms | ActiveRecord: 8.9ms | Allocations: 204150)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:04:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:04:33 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:04:33 +0900
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:04:33 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  [1m[36mReview Load (2.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  Parameters: {"current_user_id"=>"1"}
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (7.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (5.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (0.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (5.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (9.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (20.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (101.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
Completed 200 OK in 209ms (Views: 2.6ms | ActiveRecord: 20.7ms | Allocations: 113153)


Completed 200 OK in 237ms (Views: 1.1ms | ActiveRecord: 16.0ms | Allocations: 140704)


  [1m[36mBook Load (28.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 253ms (Views: 1.3ms | ActiveRecord: 167.3ms | Allocations: 150621)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:04:36 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:04:36 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.4ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 245ms (Views: 230.9ms | ActiveRecord: 8.8ms | Allocations: 204165)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:29:45 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 1.7ms | Allocations: 1202)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:29:45 +0900
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:29:45 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:29:45 +0900
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (2.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mBook Load (6.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (4.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (1.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (2.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (3.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (24.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (5.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 130ms (Views: 1.8ms | ActiveRecord: 16.9ms | Allocations: 81845)


  [1m[36mActiveStorage::Blob Load (12.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (36.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (3.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 164ms (Views: 1.0ms | ActiveRecord: 49.8ms | Allocations: 117466)


  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 196ms (Views: 0.7ms | ActiveRecord: 57.4ms | Allocations: 147666)


Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for 127.0.0.1 at 2023-09-27 17:27:16 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 67ms (Views: 1.4ms | ActiveRecord: 4.9ms | Allocations: 4494)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for 127.0.0.1 at 2023-09-27 17:27:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 2.0ms | Allocations: 1059)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:16 +0900
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:16 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=35" for 127.0.0.1 at 2023-09-27 17:27:16 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mReview Load (3.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (14.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 16.0ms | Allocations: 8407)


  [1m[36mReview Load (51.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (2.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (0.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (59.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (9.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 340ms (Views: 2.9ms | ActiveRecord: 74.2ms | Allocations: 82248)


Completed 200 OK in 425ms (Views: 5.6ms | ActiveRecord: 78.6ms | Allocations: 107912)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for 127.0.0.1 at 2023-09-27 17:27:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
[36m  S3 Storage (10.2ms) [0m[34mGenerated URL for file at key: f91nceu85fnz367ucd6m0jb4vico (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/f91nceu85fnz367ucd6m0jb4vico?response-content-disposition=inline%3B%20filename%3D%22default_image.jpg%22%3B%20filename%2A%3DUTF-8%27%27default_image.jpg&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T082717Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=d2f35918ab4f05b0d2022e984580367895a6444476b8b4f2dedfba9f0a04ed38)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/f91nceu85fnz367ucd6m0jb4vico?response-content-disposition=inline%3B%20filename%3D%22default_image.jpg%22%3B%20filename%2A%3DUTF-8%27%27default_image.jpg&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T082717Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=d2f35918ab4f05b0d2022e984580367895a6444476b8b4f2dedfba9f0a04ed38
Completed 302 Found in 19ms (ActiveRecord: 0.5ms | Allocations: 2313)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for 127.0.0.1 at 2023-09-27 17:27:19 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.6ms | Allocations: 1216)


Started GET "/books?current_user_id=35" for 127.0.0.1 at 2023-09-27 17:27:19 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mBook Load (3.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 35) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 250ms (Views: 4.7ms | ActiveRecord: 5.8ms | Allocations: 122515)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for 127.0.0.1 at 2023-09-27 17:27:21 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
[36m  S3 Storage (1.8ms) [0m[34mGenerated URL for file at key: ab9zecbhxt8g4ygo3dwqqr3s7yp8 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ab9zecbhxt8g4ygo3dwqqr3s7yp8?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253Fjpg.jpeg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25B9%25BB%25E6%2583%25B3%25E7%259A%2584%25EF%25BC%2591jpg.jpeg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T082721Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=073e2415b0963c3c9cab04578084f32c040130f9440ac5737e5ed5dd3c937d56)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ab9zecbhxt8g4ygo3dwqqr3s7yp8?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253Fjpg.jpeg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25B9%25BB%25E6%2583%25B3%25E7%259A%2584%25EF%25BC%2591jpg.jpeg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T082721Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=073e2415b0963c3c9cab04578084f32c040130f9440ac5737e5ed5dd3c937d56
Completed 302 Found in 7ms (ActiveRecord: 0.6ms | Allocations: 2428)


Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for 127.0.0.1 at 2023-09-27 17:27:24 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.2ms | Allocations: 4689)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for 127.0.0.1 at 2023-09-27 17:27:24 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1073)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:24 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:24 +0900
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Started GET "/pages/get_same_university_books?current_user_id=35" for 127.0.0.1 at 2023-09-27 17:27:24 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (7.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Processing by PagesController#get_same_university_books as HTML
  [1m[36mBook Load (2.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  Parameters: {"current_user_id"=>"35"}
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mActiveStorage::Attachment Load (11.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 7.2ms | Allocations: 11475)


  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (2.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (25.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 153ms (Views: 2.8ms | ActiveRecord: 44.0ms | Allocations: 76266)


  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 191ms (Views: 1.0ms | ActiveRecord: 14.3ms | Allocations: 103975)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:25 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.7ms | Allocations: 620)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:27 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:27 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:27 +0900
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:27 +0900
  [1m[36mBook Load (8.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mBook Load (1.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 6.5ms | Allocations: 7950)


  [1m[36mActiveStorage::Attachment Load (7.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (7.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (1.0ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 124ms (Views: 3.0ms | ActiveRecord: 20.7ms | Allocations: 66737)


  [1m[36mActiveStorage::Attachment Load (3.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 180ms (Views: 1.1ms | ActiveRecord: 14.8ms | Allocations: 103899)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:29 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:29 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (7.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 485ms (Views: 8.4ms | ActiveRecord: 10.2ms | Allocations: 122192)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:32 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 1.1ms | Allocations: 621)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E3%81%AE%E6%AD%B4%E5%8F%B21&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:32 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本の歴史1", "current_user_id"=>"0"}
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本の歴史1%' OR author LIKE '%日本の歴史1%' OR publisher LIKE '%日本の歴史1%' OR subject LIKE '%日本の歴史1%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 1122)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:37 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.6ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:37 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:37 +0900
  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:37 +0900
  [1m[36mBook Load (6.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mActiveStorage::Attachment Load (4.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (2.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 2827)


  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (36.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 132ms (Views: 2.8ms | ActiveRecord: 11.0ms | Allocations: 66558)


  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 184ms (Views: 1.1ms | ActiveRecord: 45.7ms | Allocations: 103818)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:39 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:39 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:39 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (6.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 5376)


  [1m[36mBook Load (10.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (33.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 122ms (Views: 3.7ms | ActiveRecord: 14.0ms | Allocations: 60030)


  [1m[36mFavoriteBook Load (0.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 169ms (Views: 1.2ms | ActiveRecord: 45.4ms | Allocations: 100502)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:41 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 620)


Started GET "/books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:42 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (7.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 200ms (Views: 3.7ms | ActiveRecord: 9.6ms | Allocations: 122188)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:43 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 621)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E3%81%AE%E6%AD%B4%E5%8F%B2&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:44 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本の歴史", "current_user_id"=>"0"}
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本の歴史%' OR author LIKE '%日本の歴史%' OR publisher LIKE '%日本の歴史%' OR subject LIKE '%日本の歴史%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1044)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:51 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:51 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:51 +0900
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:51 +0900
  [1m[36mBook Load (7.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
Processing by PagesController#get_same_university_books as HTML
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  Parameters: {"current_user_id"=>"0"}
  [1m[36mActiveStorage::Attachment Load (7.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 6.4ms | Allocations: 4223)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (9.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (0.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 141ms (Views: 2.7ms | ActiveRecord: 22.4ms | Allocations: 66699)


  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 183ms (Views: 1.7ms | ActiveRecord: 11.2ms | Allocations: 103728)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:53 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:27:53 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:27:53 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:53 +0900
  [1m[36mBook Load (2.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
Processing by PagesController#popular_books as HTML
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 5747)


  [1m[36mBook Load (5.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (4.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 123ms (Views: 2.2ms | ActiveRecord: 10.1ms | Allocations: 59392)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mFavoriteBook Load (0.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 159ms (Views: 1.0ms | ActiveRecord: 9.3ms | Allocations: 95142)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:27:54 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 620)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E3%81%AE%E6%AD%B4%E5%8F%B21&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:27:54 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本の歴史1", "current_user_id"=>"0"}
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本の歴史1%' OR author LIKE '%日本の歴史1%' OR publisher LIKE '%日本の歴史1%' OR subject LIKE '%日本の歴史1%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1044)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:00 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:00 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:00 +0900
  [1m[36mReview Load (2.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:00 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (8.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (2.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  Parameters: {"current_user_id"=>"0"}
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 8497)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (6.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (9.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 171ms (Views: 2.9ms | ActiveRecord: 23.4ms | Allocations: 76116)


  [1m[36mActiveStorage::Attachment Load (57.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 207ms (Views: 1.1ms | ActiveRecord: 68.1ms | Allocations: 103878)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:02 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:02 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:02 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:02 +0900
  [1m[36mUser Load (15.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (8.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"0"}
  [1m[36mReview Load (12.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 11985)


  [1m[36mFavoriteBook Load (5.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (18.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 240ms (Views: 4.1ms | ActiveRecord: 39.7ms | Allocations: 76116)


  [1m[36mActiveStorage::Attachment Load (59.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 290ms (Views: 1.8ms | ActiveRecord: 85.1ms | Allocations: 103592)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:04 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 0.7ms | Allocations: 620)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E3%81%AE%E6%AD%B4%E5%8F%B2&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:04 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本の歴史", "current_user_id"=>"0"}
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本の歴史%' OR author LIKE '%日本の歴史%' OR publisher LIKE '%日本の歴史%' OR subject LIKE '%日本の歴史%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1044)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:11 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:11 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:11 +0900
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:11 +0900
  [1m[36mBook Load (5.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"0"}
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mFavoriteBook Load (2.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 8824)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (25.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (2.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 182ms (Views: 4.9ms | ActiveRecord: 33.0ms | Allocations: 76143)


  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 265ms (Views: 1.4ms | ActiveRecord: 14.8ms | Allocations: 103298)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:13 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:13 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:13 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mBook Load (2.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:13 +0900
  [1m[36mBook Load (9.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"0"}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 31ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 15927)


  [1m[36mReview Load (4.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 124ms (Views: 4.7ms | ActiveRecord: 9.4ms | Allocations: 59926)


  [1m[36mFavoriteBook Load (0.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 192ms (Views: 1.6ms | ActiveRecord: 15.8ms | Allocations: 100547)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:16 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (6.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 207ms (Views: 5.7ms | ActiveRecord: 8.5ms | Allocations: 122157)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:17 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.7ms | Allocations: 621)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E3%81%AE%E6%AD%B4%E5%8F%B21&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:17 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本の歴史1", "current_user_id"=>"0"}
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本の歴史1%' OR author LIKE '%日本の歴史1%' OR publisher LIKE '%日本の歴史1%' OR subject LIKE '%日本の歴史1%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1044)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.6ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:23 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:23 +0900
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:23 +0900
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (10.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2687)


  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (29.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (0.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 140ms (Views: 1.9ms | ActiveRecord: 8.6ms | Allocations: 65944)


  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 192ms (Views: 1.2ms | ActiveRecord: 41.7ms | Allocations: 100285)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:26 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:26 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (3.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 185ms (Views: 5.1ms | ActiveRecord: 5.8ms | Allocations: 122114)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:27 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E3%81%AE%E6%AD%B4%E5%8F%B2&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:27 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本の歴史", "current_user_id"=>"0"}
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本の歴史%' OR author LIKE '%日本の歴史%' OR publisher LIKE '%日本の歴史%' OR subject LIKE '%日本の歴史%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1044)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:34 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:34 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:34 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:34 +0900
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (14.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 55ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 4649)


  [1m[36mReview Load (7.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (29.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 277ms (Views: 1.8ms | ActiveRecord: 36.7ms | Allocations: 65925)


  [1m[36mFavoriteBook Load (74.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 335ms (Views: 1.1ms | ActiveRecord: 97.1ms | Allocations: 103245)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:37 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:37 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (5.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 173ms (Views: 5.0ms | ActiveRecord: 8.3ms | Allocations: 122120)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.4ms | Allocations: 621)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E5%8F%B2%E4%B8%80%E9%83%8E&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:39 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本史一郎", "current_user_id"=>"0"}
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本史一郎%' OR author LIKE '%日本史一郎%' OR publisher LIKE '%日本史一郎%' OR subject LIKE '%日本史一郎%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1049)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:45 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:45 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:45 +0900
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:45 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (1.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 7.1ms | Allocations: 5691)


  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mBook Load (7.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (29.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 131ms (Views: 2.4ms | ActiveRecord: 11.8ms | Allocations: 60101)


  [1m[36mFavoriteBook Load (1.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 177ms (Views: 1.4ms | ActiveRecord: 40.0ms | Allocations: 99441)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:47 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:47 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (4.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 167ms (Views: 3.1ms | ActiveRecord: 7.0ms | Allocations: 122107)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:49 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/books/search_books?searchBooksKeyword=%E9%83%8E&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:49 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"郎", "current_user_id"=>"0"}
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%郎%' OR author LIKE '%郎%' OR publisher LIKE '%郎%' OR subject LIKE '%郎%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1040)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:56 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:56 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:56 +0900
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:56 +0900
  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (7.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 6952)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (27.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 101ms (Views: 3.9ms | ActiveRecord: 6.4ms | Allocations: 59935)


  [1m[36mFavoriteBook Load (0.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 157ms (Views: 1.1ms | ActiveRecord: 36.9ms | Allocations: 100307)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:58 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:28:58 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:28:58 +0900
  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:58 +0900
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (4.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 4576)


  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (7.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (1.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 99ms (Views: 2.1ms | ActiveRecord: 14.0ms | Allocations: 66562)


  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 138ms (Views: 0.9ms | ActiveRecord: 8.9ms | Allocations: 103716)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:28:59 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/books/search_books?searchBooksKeyword=%E6%97%A5%E6%9C%AC%E5%8F%B2%E4%B8%80%E9%83%8E&current_user_id=0" for 127.0.0.1 at 2023-09-27 17:28:59 +0900
Processing by BooksController#search_books as HTML
  Parameters: {"searchBooksKeyword"=>"日本史一郎", "current_user_id"=>"0"}
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE (name LIKE '%日本史一郎%' OR author LIKE '%日本史一郎%' OR publisher LIKE '%日本史一郎%' OR subject LIKE '%日本史一郎%')[0m
  ↳ app/controllers/books_controller.rb:122:in `map'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1044)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:29:04 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:29:04 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:29:04 +0900
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:29:04 +0900
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (4.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 19440)


  [1m[36mActiveStorage::Blob Load (5.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mReview Load (2.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 92ms (Views: 1.7ms | ActiveRecord: 10.4ms | Allocations: 59931)


  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 133ms (Views: 1.3ms | ActiveRecord: 9.5ms | Allocations: 95429)


Started GET "/notifications/check_unread_notifications" for 127.0.0.1 at 2023-09-27 17:29:06 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/pages/new_reviews" for 127.0.0.1 at 2023-09-27 17:29:07 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for 127.0.0.1 at 2023-09-27 17:29:07 +0900
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for 127.0.0.1 at 2023-09-27 17:29:07 +0900
  [1m[36mBook Load (5.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mActiveStorage::Attachment Load (7.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (2.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mActiveStorage::Blob Load (9.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 8923)


  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (2.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 120ms (Views: 4.8ms | ActiveRecord: 20.9ms | Allocations: 66520)


  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 167ms (Views: 0.8ms | ActiveRecord: 12.3ms | Allocations: 99741)


Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for ::1 at 2023-10-01 11:07:11 +0900
  [1m[35m (2.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (6.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 126ms (Views: 0.3ms | ActiveRecord: 25.0ms | Allocations: 52362)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:07:12 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 15ms (ActiveRecord: 4.8ms | Allocations: 4179)


Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:07:12 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:07:12 +0900
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:07:12 +0900
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1537)


Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (3.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (8.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (13.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 192ms (Views: 1.9ms | ActiveRecord: 37.4ms | Allocations: 90247)


  [1m[36mActiveStorage::Attachment Load (27.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 234ms (Views: 0.9ms | ActiveRecord: 70.8ms | Allocations: 126512)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:07:12 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 161ms (ActiveRecord: 0.4ms | Allocations: 30651)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 11:07:14 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 11:07:14 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 11:07:14 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 11:07:14 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (4.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Completed 500 Internal Server Error in 18ms (ActiveRecord: 4.4ms | Allocations: 5717)


  [1m[36mActiveStorage::Blob Load (4.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 4.2ms | Allocations: 2924)


  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.2ms | Allocations: 22647)


Completed 500 Internal Server Error in 39ms (ActiveRecord: 1.6ms | Allocations: 21678)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:03 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 2.0ms | Allocations: 1143)


Started GET "/favorites?user_id=35" for ::1 at 2023-10-01 11:08:03 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"35"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (2.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 35) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (2.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (2.1ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (1.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (1.2ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (1.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 101ms (Views: 0.4ms | ActiveRecord: 33.7ms | Allocations: 37181)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:03 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1212)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:04 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 1079)


Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:08:04 +0900
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:08:04 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:08:04 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (3.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 986)


  [1m[36mReview Load (4.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (6.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (11.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 84ms (Views: 2.1ms | ActiveRecord: 21.0ms | Allocations: 74694)


  [1m[36mActiveStorage::Attachment Load (27.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 134ms (Views: 0.8ms | ActiveRecord: 36.8ms | Allocations: 107926)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:05 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.1ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 11:08:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 11:08:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 11:08:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 11:08:06 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.0ms | Allocations: 1562)


  [1m[36mActiveStorage::Blob Load (4.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 4.0ms | Allocations: 3786)


Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.1ms | Allocations: 2671)


  [1m[36mActiveStorage::Blob Load (4.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 4.3ms | Allocations: 24496)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1060)


Started GET "/notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:14 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 35 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.8ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 35[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 16ms (Views: 1.2ms | ActiveRecord: 2.2ms | Allocations: 2445)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:14 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1057)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:08:16 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:08:16 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:08:16 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mReview Load (3.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (5.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 4.7ms | Allocations: 10826)


  [1m[36mReview Load (3.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (5.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mFavoriteBook Load (1.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (9.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 96ms (Views: 2.4ms | ActiveRecord: 21.9ms | Allocations: 79665)


  [1m[36mActiveStorage::Blob Load (25.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 119ms (Views: 0.9ms | ActiveRecord: 36.7ms | Allocations: 106858)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:19 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1059)


Started GET "/favorites?user_id=35" for ::1 at 2023-10-01 11:08:19 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"35"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 35) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 35[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 5.0ms | Allocations: 7264)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:25 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1059)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:08:25 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:08:25 +0900
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:08:25 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (6.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 4006)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (3.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (6.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (11.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 105ms (Views: 2.7ms | ActiveRecord: 23.3ms | Allocations: 75369)


  [1m[36mActiveStorage::Attachment Load (29.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 142ms (Views: 0.7ms | ActiveRecord: 43.5ms | Allocations: 106889)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:26 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for ::1 at 2023-10-01 11:08:49 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 4391)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:08:49 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 1058)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:08:49 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:08:49 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:08:49 +0900
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mBook Load (7.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 6.2ms | Allocations: 7955)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (5.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (2.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (20.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 115ms (Views: 1.2ms | ActiveRecord: 38.0ms | Allocations: 82450)


Completed 200 OK in 145ms (Views: 2.0ms | ActiveRecord: 12.4ms | Allocations: 107172)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:08:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.3ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for ::1 at 2023-10-01 11:09:35 +0900
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 103ms (Views: 0.4ms | ActiveRecord: 8.1ms | Allocations: 52363)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:09:35 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 13ms (ActiveRecord: 2.6ms | Allocations: 4179)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:09:35 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:09:35 +0900
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:09:35 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mReview Load (6.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 2791)


  [1m[36mBook Load (60.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (4.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mFavoriteBook Load (1.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (13.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 205ms (Views: 1.7ms | ActiveRecord: 32.8ms | Allocations: 95254)


  [1m[36mActiveStorage::Attachment Load (30.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 238ms (Views: 0.8ms | ActiveRecord: 112.1ms | Allocations: 124818)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808/default_image.jpg" for ::1 at 2023-10-01 11:09:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBVUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b08ca06faa3766060d8673117f1c847e381bb808", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
[36m  S3 Storage (183.9ms) [0m[34mGenerated URL for file at key: f91nceu85fnz367ucd6m0jb4vico (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/f91nceu85fnz367ucd6m0jb4vico?response-content-disposition=inline%3B%20filename%3D%22default_image.jpg%22%3B%20filename%2A%3DUTF-8%27%27default_image.jpg&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T020936Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=161e41fe6f33c644af6ffa50fc64d2f841c56962cc7e58bc70a689aa5a6039fc)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/f91nceu85fnz367ucd6m0jb4vico?response-content-disposition=inline%3B%20filename%3D%22default_image.jpg%22%3B%20filename%2A%3DUTF-8%27%27default_image.jpg&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T020936Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=161e41fe6f33c644af6ffa50fc64d2f841c56962cc7e58bc70a689aa5a6039fc
Completed 302 Found in 193ms (ActiveRecord: 0.5ms | Allocations: 32145)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 11:10:00 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 11:10:00 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 11:10:00 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 11:10:00 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  [1m[36mActiveStorage::Blob Load (5.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
[36m  S3 Storage (2.5ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=5225a5674f15fc0136cc8af2ca656bc63dcb3ef07c668dbb6a79a24f2b0ece05)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=5225a5674f15fc0136cc8af2ca656bc63dcb3ef07c668dbb6a79a24f2b0ece05
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Completed 302 Found in 17ms (ActiveRecord: 5.7ms | Allocations: 4980)


  [1m[36mActiveStorage::Blob Load (4.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
[36m  S3 Storage (2.5ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=195d0cf962929d81f65751e7b5ff69be3500e9caa0de0803c24ab88006b82e55)[0m
  [1m[36mActiveStorage::Blob Load (3.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=195d0cf962929d81f65751e7b5ff69be3500e9caa0de0803c24ab88006b82e55
Completed 302 Found in 18ms (ActiveRecord: 4.0ms | Allocations: 5498)


[36m  S3 Storage (2.0ms) [0m[34mGenerated URL for file at key: ft6imn2opvlfy10brvoiix9hl6ae (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ft6imn2opvlfy10brvoiix9hl6ae?response-content-disposition=inline%3B%20filename%3D%22no%20image.png%22%3B%20filename%2A%3DUTF-8%27%27no%2520image.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=dfac766cf319466875a5b4bc42131eea774e141f95775fea2eb46265b93923f2)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ft6imn2opvlfy10brvoiix9hl6ae?response-content-disposition=inline%3B%20filename%3D%22no%20image.png%22%3B%20filename%2A%3DUTF-8%27%27no%2520image.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=dfac766cf319466875a5b4bc42131eea774e141f95775fea2eb46265b93923f2
  [1m[36mActiveStorage::Blob Load (3.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 302 Found in 18ms (ActiveRecord: 3.7ms | Allocations: 5687)


[36m  S3 Storage (3.0ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=a50f97d74be09b5bfa7754de857dbea457d8037e4da1f5f9f3e2b318e2317e35)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021000Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=a50f97d74be09b5bfa7754de857dbea457d8037e4da1f5f9f3e2b318e2317e35
Completed 302 Found in 24ms (ActiveRecord: 10.3ms | Allocations: 8195)


Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for ::1 at 2023-10-01 11:12:36 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 16ms (Views: 0.6ms | ActiveRecord: 2.8ms | Allocations: 4691)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:12:36 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1077)


Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:12:36 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:12:36 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:12:36 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1487)


  [1m[36mBook Load (5.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (2.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (5.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (9.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 86ms (Views: 2.0ms | ActiveRecord: 19.2ms | Allocations: 74576)


  [1m[36mActiveStorage::Attachment Load (25.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 119ms (Views: 0.9ms | ActiveRecord: 33.2ms | Allocations: 107268)


Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for ::1 at 2023-10-01 11:13:12 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 4385)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:13:12 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.7ms | Allocations: 1058)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:13:12 +0900
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:13:12 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:13:12 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (6.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 4342)


  [1m[36mReview Load (3.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (7.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (8.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 90ms (Views: 1.8ms | ActiveRecord: 20.8ms | Allocations: 75133)


  [1m[36mActiveStorage::Attachment Load (24.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 119ms (Views: 0.8ms | ActiveRecord: 36.3ms | Allocations: 106774)


Started GET "/users/find_user_by_uid/W0kuhhA7rgRl0t4aITV4kdHB0Mq2" for ::1 at 2023-10-01 11:13:28 +0900
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"W0kuhhA7rgRl0t4aITV4kdHB0Mq2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'W0kuhhA7rgRl0t4aITV4kdHB0Mq2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 104ms (Views: 0.6ms | ActiveRecord: 7.3ms | Allocations: 52366)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:13:28 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 13ms (ActiveRecord: 3.5ms | Allocations: 4179)


Started GET "/pages/popular_books" for ::1 at 2023-10-01 11:13:29 +0900
Started GET "/pages/get_same_university_books?current_user_id=35" for ::1 at 2023-10-01 11:13:29 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 11:13:29 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"35"}
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.5ms | Allocations: 4468)


  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (4.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (10.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (8.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (13.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 187ms (Views: 1.7ms | ActiveRecord: 104.6ms | Allocations: 91278)


  [1m[36mActiveStorage::Attachment Load (26.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 229ms (Views: 1.0ms | ActiveRecord: 81.0ms | Allocations: 127924)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:13:35 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1250)


Started GET "/questions/all_questions" for ::1 at 2023-10-01 11:13:35 +0900
Processing by QuestionsController#all_questions as HTML
  [1m[36mQuestion Load (5.2ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions`[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 3, 9, 31)[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 25, 31)[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:119:in `all_questions'
Completed 200 OK in 264ms (Views: 6.5ms | ActiveRecord: 11.4ms | Allocations: 239460)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 11:13:40 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 161ms (ActiveRecord: 0.5ms | Allocations: 30662)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:13:41 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1221)


Started GET "/questions/check_existence?book_id=1&id=2" for ::1 at 2023-10-01 11:13:41 +0900
Processing by QuestionsController#check_existence as HTML
  Parameters: {"book_id"=>"1", "id"=>"2"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:144:in `check_existence'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:147:in `check_existence'
Completed 200 OK in 5ms (ActiveRecord: 0.9ms | Allocations: 1348)


Started GET "/books/1/questions/2?current_user_id=35" for ::1 at 2023-10-01 11:13:41 +0900
Processing by QuestionsController#show as HTML
  Parameters: {"current_user_id"=>"35", "book_id"=>"1", "id"=>"2"}
Started GET "/books/1/questions/2/replies" for ::1 at 2023-10-01 11:13:41 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-01 11:13:41 +0900
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:21:in `show'
Processing by RepliesController#index as HTML
Processing by QuestionsController#index as HTML
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"book_id"=>"1", "question_id"=>"2"}
  Parameters: {"book_id"=>"1"}
  ↳ app/controllers/questions_controller.rb:25:in `show'
  [1m[36mQuestion Load (1.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:8:in `index'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:25:in `show'
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:25:in `show'
  [1m[36mQuestion Load (4.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  [1m[36mReply Load (3.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`question_id` = 2[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mQuestion Load (5.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (8.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 4, 5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 18, 19, 20, 38, 39, 40, 41, 46)[0m
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 58[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  [1m[36mQuestion Load (3.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 1, 7)[0m
  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  ↳ app/controllers/questions_controller.rb:31:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 194ms (Views: 5.3ms | ActiveRecord: 13.8ms | Allocations: 177481)


  [1m[36mActiveStorage::Attachment Load (127.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7)[0m
  [1m[36mActiveStorage::Blob Load (128.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 2 AND `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:202:in `attach_image_to_question'
  [1m[36mActiveStorage::Blob Load (11.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
Completed 200 OK in 295ms (Views: 3.9ms | ActiveRecord: 158.1ms | Allocations: 261544)


  [1m[36mQuestion Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `questions` INNER JOIN `browsing_histories` ON `questions`.`id` = `browsing_histories`.`question_id` WHERE `browsing_histories`.`user_id` = 35 AND `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:161:in `exist_question_browsing_history?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 35 AND `browsing_histories`.`question_id` IS NOT NULL[0m
  ↳ app/controllers/questions_controller.rb:167:in `save_question_browsing_history'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/questions_controller.rb:171:in `save_question_browsing_history'
  [1m[36mBrowsingHistory Create (17.9ms)[0m  [1m[32mINSERT INTO `browsing_histories` (`user_id`, `question_id`, `created_at`, `updated_at`) VALUES (35, 2, '2023-10-01 02:13:42.118071', '2023-10-01 02:13:42.118071')[0m
  ↳ app/controllers/questions_controller.rb:171:in `save_question_browsing_history'
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/questions_controller.rb:171:in `save_question_browsing_history'
Completed 200 OK in 348ms (Views: 0.3ms | ActiveRecord: 263.7ms | Allocations: 275615)


Started GET "/questions/is_favorite?current_user_id=35&question_id=2" for ::1 at 2023-10-01 11:13:42 +0900
Processing by QuestionsController#is_favorite as HTML
  Parameters: {"current_user_id"=>"35", "question_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:102:in `is_favorite'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:105:in `is_favorite'
  [1m[36mFavoriteQuestion Load (0.5ms)[0m  [1m[34mSELECT `favorite_questions`.* FROM `favorite_questions` WHERE `favorite_questions`.`user_id` = 35 AND `favorite_questions`.`question_id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:108:in `is_favorite'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 3032)


Started POST "/books/1/questions/2/replies" for ::1 at 2023-10-01 11:14:00 +0900
Processing by RepliesController#create as HTML
  Parameters: {"current_user_id"=>"35", "reply"=>{"content"=>"fff", "image"=>#<ActionDispatch::Http::UploadedFile:0x00007fd1c94cfef8 @tempfile=#<Tempfile:/var/folders/yt/n2c9x7ss2hl4j9xj69nspgsm0000gn/T/RackMultipart20231001-69782-udytsy.jpg>, @original_filename="Harry Potter7.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"reply[image]\"; filename=\"Harry Potter7.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "book_id"=>"1", "question_id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:62:in `create'
  [1m[36mQuestion Load (0.3ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:65:in `create'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/replies_controller.rb:65:in `create'
  [1m[36mCACHE Question Load (0.0ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mReply Create (1.9ms)[0m  [1m[32mINSERT INTO `replies` (`content`, `user_id`, `question_id`, `created_at`, `updated_at`) VALUES ('fff', 35, 2, '2023-10-01 02:14:00.423194', '2023-10-01 02:14:00.423194')[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 59 AND `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mActiveStorage::Blob Create (1.4ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('u7qzhhigd1bujy82n0xzm7ds4f3g', 'Harry Potter7.jpg', 'image/jpeg', '{\"identified\":true}', 'amazon_development', 53583, '3w3sWzCrC94ghd94pqqRgQ==', '2023-10-01 02:14:00')[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mActiveStorage::Attachment Create (2.7ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image', 'Reply', 59, 83, '2023-10-01 02:14:00')[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mReply Update (3.8ms)[0m  [1m[33mUPDATE `replies` SET `replies`.`updated_at` = '2023-10-01 02:14:00.442450' WHERE `replies`.`id` = 59[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/replies_controller.rb:70:in `create'
[36m  S3 Storage (398.2ms) [0m[32mUploaded file to key: u7qzhhigd1bujy82n0xzm7ds4f3g (checksum: 3w3sWzCrC94ghd94pqqRgQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3) to Async(default) with arguments: #<GlobalID:0x00007fd1c3ebd498 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/83>>
  [1m[36mActiveStorage::Blob Load (9.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 83 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3] Performing ActiveStorage::AnalyzeJob (Job ID: 4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3) from Async(default) enqueued at 2023-10-01T02:14:00Z with arguments: #<GlobalID:0x00007fd1c9555cd8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/83>>
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:174:in `create_notification_reply'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:174:in `create_notification_reply'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/replies_controller.rb:174:in `create_notification_reply'
  [1m[36mNotification Create (0.5ms)[0m  [1m[32mINSERT INTO `notifications` (`action_user_id`, `target_user_id`, `question_id`, `reply_id`, `action_type`, `action_to`, `created_at`, `updated_at`) VALUES (35, 1, 2, 59, 'Reply', 'Reply', '2023-10-01 02:14:00.880799', '2023-10-01 02:14:00.880799')[0m
  ↳ app/controllers/replies_controller.rb:174:in `create_notification_reply'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/replies_controller.rb:174:in `create_notification_reply'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT DISTINCT `replies`.`user_id` FROM `replies` WHERE `replies`.`question_id` = 2 AND `replies`.`user_id` != 35 AND `replies`.`user_id` != 1[0m
  ↳ app/controllers/replies_controller.rb:180:in `create_notification_reply'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mNotification Create (0.4ms)[0m  [1m[32mINSERT INTO `notifications` (`action_user_id`, `target_user_id`, `question_id`, `reply_id`, `action_type`, `action_to`, `created_at`, `updated_at`) VALUES (35, 4, 2, 59, 'Reply', 'Reply', '2023-10-01 02:14:00.893231', '2023-10-01 02:14:00.893231')[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mNotification Create (4.2ms)[0m  [1m[32mINSERT INTO `notifications` (`action_user_id`, `target_user_id`, `question_id`, `reply_id`, `action_type`, `action_to`, `created_at`, `updated_at`) VALUES (35, 7, 2, 59, 'Reply', 'Reply', '2023-10-01 02:14:00.901743', '2023-10-01 02:14:00.901743')[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/replies_controller.rb:188:in `block in create_notification_reply'
Completed 200 OK in 507ms (Views: 0.4ms | ActiveRecord: 33.3ms | Allocations: 40969)


Started GET "/notifications/check_unread_notifications?current_user_id=35" for ::1 at 2023-10-01 11:14:00 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"35"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 35 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 1.9ms | Allocations: 1230)


Started GET "/replies/check_existence?book_id=1&question_id=2&id=59" for ::1 at 2023-10-01 11:14:00 +0900
Processing by RepliesController#check_existence as HTML
  Parameters: {"book_id"=>"1", "question_id"=>"2", "id"=>"59"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:129:in `check_existence'
  [1m[36mQuestion Load (0.3ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:132:in `check_existence'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` = 59 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:135:in `check_existence'
Completed 200 OK in 5ms (ActiveRecord: 1.1ms | Allocations: 1688)


Started GET "/books/1/questions/2/replies" for ::1 at 2023-10-01 11:14:00 +0900
Started GET "/books/1/questions/2/replies/59?current_user_id=35" for ::1 at 2023-10-01 11:14:00 +0900
Processing by RepliesController#index as HTML
Processing by RepliesController#show as HTML
  Parameters: {"book_id"=>"1", "question_id"=>"2"}
  Parameters: {"current_user_id"=>"35", "book_id"=>"1", "question_id"=>"2", "id"=>"59"}
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:22:in `show'
  ↳ app/controllers/replies_controller.rb:8:in `index'
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:25:in `show'
  [1m[36mReply Load (1.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`question_id` = 2[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Attachment Load (6.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/replies_controller.rb:25:in `show'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 4, 5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 18, 19, 20, 38, 39, 40, 41, 46, 59)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/replies_controller.rb:25:in `show'
  [1m[36mActiveStorage::Blob Load (5.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (58, 83)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mQuestion Load (2.2ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:31:in `show'
  [1m[36mQuestion Load (1.8ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/replies_controller.rb:31:in `show'
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 1, 7, 35)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/replies_controller.rb:31:in `show'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 35)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/replies_controller.rb:31:in `show'
  [1m[36mActiveStorage::Blob Load (4.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 76)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mReply Load (2.1ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`id` = 59 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:40:in `show'
Completed 200 OK in 194ms (Views: 4.3ms | ActiveRecord: 19.1ms | Allocations: 115011)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3] [36m  S3 Storage (298.0ms) [0m[34mDownloaded file from key: u7qzhhigd1bujy82n0xzm7ds4f3g[0m
  [1m[36mActiveStorage::Attachment Load (2.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 59[0m
  ↳ app/controllers/replies_controller.rb:40:in `show'
[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3] Skipping image analysis because the mini_magick gem isn't installed
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 83[0m
  ↳ app/controllers/replies_controller.rb:40:in `show'
[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35[0m
  ↳ app/controllers/replies_controller.rb:40:in `show'
[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3]   [1m[36mActiveStorage::Blob Update (1.4ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 83[0m
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 35[0m
  ↳ app/controllers/replies_controller.rb:40:in `show'
[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3]   [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3] Performed ActiveStorage::AnalyzeJob (Job ID: 4e3a2c5c-97af-4482-8bb4-71f8f77c4ad3) from Async(default) in 409.11ms
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 76[0m
  ↳ app/controllers/replies_controller.rb:40:in `show'
  [1m[36mReply Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `replies` INNER JOIN `browsing_histories` ON `replies`.`id` = `browsing_histories`.`reply_id` WHERE `browsing_histories`.`user_id` = 35 AND `replies`.`id` = 59 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:149:in `exist_reply_browsing_history?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 35 AND `browsing_histories`.`reply_id` IS NOT NULL[0m
  ↳ app/controllers/replies_controller.rb:155:in `save_reply_browsing_history'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/replies_controller.rb:159:in `save_reply_browsing_history'
  [1m[36mBrowsingHistory Create (0.4ms)[0m  [1m[32mINSERT INTO `browsing_histories` (`user_id`, `reply_id`, `created_at`, `updated_at`) VALUES (35, 59, '2023-10-01 02:14:01.298086', '2023-10-01 02:14:01.298086')[0m
  ↳ app/controllers/replies_controller.rb:159:in `save_reply_browsing_history'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/replies_controller.rb:159:in `save_reply_browsing_history'
Completed 200 OK in 316ms (Views: 0.6ms | ActiveRecord: 30.7ms | Allocations: 133890)


Started GET "/replies/is_favorite?current_user_id=35&reply_id=59" for ::1 at 2023-10-01 11:14:01 +0900
Processing by RepliesController#is_favorite as HTML
  Parameters: {"current_user_id"=>"35", "reply_id"=>"59"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:113:in `is_favorite'
  [1m[36mReply Load (2.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` = 59 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:116:in `is_favorite'
  [1m[36mFavoriteReply Load (0.5ms)[0m  [1m[34mSELECT `favorite_replies`.* FROM `favorite_replies` WHERE `favorite_replies`.`user_id` = 35 AND `favorite_replies`.`reply_id` = 59 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:119:in `is_favorite'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.7ms | Allocations: 3554)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBXQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c2b515f347501879c9b80801c8eb12d179df5d33/Harry%20Potter7.jpg" for ::1 at 2023-10-01 11:14:01 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBXQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--c2b515f347501879c9b80801c8eb12d179df5d33", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 83 LIMIT 1[0m
[36m  S3 Storage (1.6ms) [0m[34mGenerated URL for file at key: u7qzhhigd1bujy82n0xzm7ds4f3g (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/u7qzhhigd1bujy82n0xzm7ds4f3g?response-content-disposition=inline%3B%20filename%3D%22Harry%20Potter7.jpg%22%3B%20filename%2A%3DUTF-8%27%27Harry%2520Potter7.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021401Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=0fcd9d647db3455ccc6e528f1dfffa66a586ebb1901af4cd5cdecfae79827850)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/u7qzhhigd1bujy82n0xzm7ds4f3g?response-content-disposition=inline%3B%20filename%3D%22Harry%20Potter7.jpg%22%3B%20filename%2A%3DUTF-8%27%27Harry%2520Potter7.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231001%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231001T021401Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=0fcd9d647db3455ccc6e528f1dfffa66a586ebb1901af4cd5cdecfae79827850
Completed 302 Found in 5ms (ActiveRecord: 0.5ms | Allocations: 2528)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-01 19:20:57 +0900
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 50ms (ActiveRecord: 4.1ms | Allocations: 24154)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:20:57 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:20:57 +0900
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-01 19:20:57 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  [1m[36mReview Load (4.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  Parameters: {"current_user_id"=>"0"}
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 3277)


  [1m[36mBook Load (13.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (10.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (11.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (8.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (7.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 279ms (Views: 1.8ms | ActiveRecord: 74.4ms | Allocations: 125355)


Completed 200 OK in 297ms (Views: 0.9ms | ActiveRecord: 67.2ms | Allocations: 147772)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:21:02 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 5039)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:21:03 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 10ms (ActiveRecord: 2.6ms | Allocations: 3788)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:21:03 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:21:03 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:21:03 +0900
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (5.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mReview Load (3.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (5.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (4.0ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (2.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (15.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (3.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 95ms (Views: 1.6ms | ActiveRecord: 6.9ms | Allocations: 86377)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 143ms (Views: 1.1ms | ActiveRecord: 16.9ms | Allocations: 118770)


  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 182ms (Views: 1.1ms | ActiveRecord: 52.6ms | Allocations: 148828)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:03 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 180ms (ActiveRecord: 0.5ms | Allocations: 30636)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:05 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1231)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-01 19:21:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:21:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:21:06 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:21:06 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (3.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.2ms | Allocations: 2975)


  [1m[36mActiveStorage::Blob Load (6.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 3.2ms | Allocations: 4508)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 6.8ms | Allocations: 5166)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:21:06 +0900
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (46.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 66ms (ActiveRecord: 1.9ms | Allocations: 39232)


Completed 500 Internal Server Error in 124ms (ActiveRecord: 50.0ms | Allocations: 62940)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.6ms | Allocations: 1216)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:07 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:21:10 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 7ms (ActiveRecord: 1.6ms | Allocations: 1175)


Started GET "/users/1" for ::1 at 2023-10-01 19:21:10 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (1.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.2ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (5.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (2.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 710ms (Views: 27.3ms | ActiveRecord: 50.2ms | Allocations: 475893)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:11 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1219)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:12 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:13 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-01 19:21:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 638)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:21:14 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:21:14 +0900
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-01 19:21:14 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 698)


  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (7.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (3.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (6.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (8.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 84ms (Views: 1.7ms | ActiveRecord: 18.0ms | Allocations: 74702)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 122ms (Views: 0.8ms | ActiveRecord: 15.3ms | Allocations: 107151)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-01 19:21:18 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.2ms | Allocations: 620)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:21:20 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 4421)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:21:20 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:21:20 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:20 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.2ms | Allocations: 1707)


  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 28ms (ActiveRecord: 2.1ms | Allocations: 21665)


Started GET "/users/1" for ::1 at 2023-10-01 19:21:20 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (0.9ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 585ms (Views: 18.5ms | ActiveRecord: 19.7ms | Allocations: 429691)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:21 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:22 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1304)


  [1m[36mActiveStorage::Blob Load (2.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.6ms | Allocations: 2625)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:23 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.7ms | Allocations: 1697)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 32ms (ActiveRecord: 3.9ms | Allocations: 21446)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:23 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1314)


Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.3ms | Allocations: 2143)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:21:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:21:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:21:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:21:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:22:03 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 7ms (ActiveRecord: 1.6ms | Allocations: 1091)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:22:03 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:22:03 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:22:03 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (5.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (4.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (3.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (6.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (6.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  [1m[36mActiveStorage::Blob Load (10.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (2.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 112ms (Views: 2.5ms | ActiveRecord: 23.4ms | Allocations: 88930)


  [1m[36mActiveStorage::Blob Load (26.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
Completed 200 OK in 162ms (Views: 0.7ms | ActiveRecord: 43.1ms | Allocations: 140346)


  [1m[36mBook Load (2.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 182ms (Views: 1.2ms | ActiveRecord: 20.5ms | Allocations: 151513)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:04 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:22:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:22:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:22:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:22:06 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.2ms | Allocations: 2057)


  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.7ms | Allocations: 2289)


  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.7ms | Allocations: 5659)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.3ms | Allocations: 2642)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (25.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 105ms (ActiveRecord: 28.5ms | Allocations: 76261)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-01 19:22:06 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:22:06 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1358)


Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.8ms | Allocations: 2100)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:22:23 +0900
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 99ms (Views: 0.3ms | ActiveRecord: 7.2ms | Allocations: 52400)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:22:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 13ms (ActiveRecord: 2.5ms | Allocations: 4225)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:22:23 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:22:23 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:22:23 +0900
  [1m[36mReview Load (5.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (85.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (26.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (2.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (5.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (3.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (4.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (2.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (5.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 204ms (Views: 2.0ms | ActiveRecord: 49.0ms | Allocations: 91337)


  [1m[36mActiveStorage::Attachment Load (5.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 249ms (Views: 1.0ms | ActiveRecord: 140.5ms | Allocations: 135682)


  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 283ms (Views: 0.9ms | ActiveRecord: 21.2ms | Allocations: 166310)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 178ms (ActiveRecord: 0.6ms | Allocations: 30651)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:25 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:22:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:22:25 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:22:25 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:22:25 +0900
  [1m[36mActiveStorage::Blob Load (3.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Completed 500 Internal Server Error in 28ms (ActiveRecord: 6.0ms | Allocations: 7144)


Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.8ms | Allocations: 3876)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (42.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:22:25 +0900
  [1m[36mActiveStorage::Blob Load (40.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 94ms (ActiveRecord: 43.2ms | Allocations: 40451)


Completed 500 Internal Server Error in 96ms (ActiveRecord: 42.5ms | Allocations: 40841)


  [1m[36mActiveStorage::Blob Load (3.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Completed 500 Internal Server Error in 79ms (ActiveRecord: 3.8ms | Allocations: 43015)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (24.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 24.4ms | Allocations: 19998)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:22:38 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 4611)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:22:38 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 6ms (ActiveRecord: 1.4ms | Allocations: 1108)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:22:38 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:22:38 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:22:38 +0900
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (3.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (5.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (6.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (5.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (2.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (6.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (6.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  [1m[36mActiveStorage::Blob Load (4.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (19.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 124ms (Views: 0.7ms | ActiveRecord: 22.8ms | Allocations: 92423)


  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 184ms (Views: 2.3ms | ActiveRecord: 13.0ms | Allocations: 141528)


  [1m[36mBook Load (32.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 199ms (Views: 1.4ms | ActiveRecord: 71.0ms | Allocations: 150720)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:39 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:22:40 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:40 +0900
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.5ms | Allocations: 2462)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:22:40 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:22:40 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.5ms | Allocations: 1368)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (4.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 65ms (ActiveRecord: 4.1ms | Allocations: 22298)


Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:22:40 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:22:40 +0900
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.4ms | Allocations: 2484)


  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.7ms | Allocations: 2798)


Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.7ms | Allocations: 3634)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-01 19:22:53 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:22:56 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 4ms (ActiveRecord: 1.2ms | Allocations: 1095)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-10-01 19:22:56 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (35, 16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 3, 39, 8, 7, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (59, 55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.8ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.8ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.9ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.8ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` = 59[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 35[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mCACHE Question Load (0.0ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/notifications_controller.rb:31:in `block in index'
  [1m[36mNotification Update (1.9ms)[0m  [1m[33mUPDATE `notifications` SET `notifications`.`is_checked` = TRUE, `notifications`.`updated_at` = '2023-10-01 10:22:56.907267' WHERE `notifications`.`id` = 381[0m
  ↳ app/controllers/notifications_controller.rb:31:in `block in index'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/notifications_controller.rb:31:in `block in index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 388ms (Views: 332.5ms | ActiveRecord: 30.8ms | Allocations: 263494)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:22:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1198)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:22:58 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.5ms | Allocations: 1086)


Started GET "/favorites?user_id=1" for ::1 at 2023-10-01 19:22:58 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.6ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (1.4ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 570ms (Views: 17.0ms | ActiveRecord: 32.4ms | Allocations: 411543)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:22:59 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:22:59 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms | Allocations: 1807)


Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.6ms | Allocations: 2306)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:23:12 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1085)


Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:23:12 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:23:12 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:23:12 +0900
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (7.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (4.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mBook Load (3.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (11.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mFavoriteBook Load (4.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (3.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (5.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (19.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 145ms (Views: 2.8ms | ActiveRecord: 12.4ms | Allocations: 108713)


  [1m[36mBook Load (37.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 188ms (Views: 1.0ms | ActiveRecord: 15.7ms | Allocations: 142671)


  [1m[36mActiveStorage::Attachment Load (2.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 199ms (Views: 1.0ms | ActiveRecord: 78.3ms | Allocations: 150638)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:23:13 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:23:57 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:23:57 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:23:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.2ms | Allocations: 2959)


  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.8ms | Allocations: 2665)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:23:57 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:23:57 +0900
Completed 500 Internal Server Error in 37ms (ActiveRecord: 2.1ms | Allocations: 4079)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:23:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (26.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-01 19:23:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (3.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 33ms (ActiveRecord: 26.5ms | Allocations: 21417)


Completed 500 Internal Server Error in 9ms (ActiveRecord: 3.5ms | Allocations: 3051)


Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (4.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 4.2ms | Allocations: 3844)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (44.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 48ms (ActiveRecord: 44.1ms | Allocations: 38881)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:24:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1066)


Started GET "/books/check_existence?id=30" for ::1 at 2023-10-01 19:24:21 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"30"}
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 30 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 900)


Started GET "/books/30?current_user_id=1" for ::1 at 2023-10-01 19:24:21 +0900
Started GET "/books/30/questions" for ::1 at 2023-10-01 19:24:21 +0900
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"30"}
Processing by QuestionsController#index as HTML
Started GET "/books/30/reviews" for ::1 at 2023-10-01 19:24:21 +0900
  Parameters: {"book_id"=>"30"}
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"30"}
  [1m[36mBook Load (4.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 30 LIMIT 1[0m
  [1m[36mBook Load (5.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 30 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 30 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (2.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 30[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 7.1ms | Allocations: 5059)


  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 30[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mReview Load (2.1ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 30[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 4833)


  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 30[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 30 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`book_id` IS NOT NULL[0m
  ↳ app/controllers/books_controller.rb:168:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Load (0.3ms)[0m  [1m[34mSELECT `browsing_histories`.* FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`book_id` IS NOT NULL ORDER BY `browsing_histories`.`id` ASC LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Destroy (3.4ms)[0m  [1m[31mDELETE FROM `browsing_histories` WHERE `browsing_histories`.`id` = 798[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Create (0.4ms)[0m  [1m[32mINSERT INTO `browsing_histories` (`user_id`, `book_id`, `created_at`, `updated_at`) VALUES (1, 30, '2023-10-01 10:24:21.272499', '2023-10-01 10:24:21.272499')[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
Completed 200 OK in 76ms (Views: 0.7ms | ActiveRecord: 29.8ms | Allocations: 26878)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:24:21 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1197)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/books/is_favorite?current_user_id=1&book_id=30" for ::1 at 2023-10-01 19:24:21 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"30"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 30 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 30 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 1.4ms | Allocations: 1712)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:24:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:24:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1069)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:24:23 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:24:23 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:24:23 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (2.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (5.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (3.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (3.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (7.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (4.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (33.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (29.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (27.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 153ms (Views: 2.8ms | ActiveRecord: 10.7ms | Allocations: 112767)


Completed 200 OK in 180ms (Views: 0.7ms | ActiveRecord: 74.6ms | Allocations: 139755)


  [1m[36mBook Load (60.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 201ms (Views: 0.9ms | ActiveRecord: 111.3ms | Allocations: 151106)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:24:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.1ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:26:32 +0900
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 99ms (Views: 0.3ms | ActiveRecord: 7.3ms | Allocations: 52398)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:26:32 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 12ms (ActiveRecord: 2.6ms | Allocations: 4182)


Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:26:32 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:26:32 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:26:32 +0900
Processing by PagesController#get_same_university_books as HTML
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (5.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (80.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (16.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mReview Load (4.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (2.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (3.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (2.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mFavoriteBook Load (3.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (26.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
Completed 200 OK in 230ms (Views: 1.8ms | ActiveRecord: 133.5ms | Allocations: 117467)


  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mActiveStorage::Attachment Load (3.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
Completed 200 OK in 275ms (Views: 1.1ms | ActiveRecord: 141.6ms | Allocations: 161050)


  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 284ms (Views: 0.8ms | ActiveRecord: 29.4ms | Allocations: 166800)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:26:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 149ms (ActiveRecord: 0.4ms | Allocations: 30651)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:29:46 +0900
  [1m[35m (2.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 108ms (Views: 0.2ms | ActiveRecord: 8.8ms | Allocations: 52407)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:29:47 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 12ms (ActiveRecord: 3.6ms | Allocations: 4182)


Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:29:47 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:29:47 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:29:47 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (9.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (66.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (10.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (3.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (5.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (3.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (50.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (27.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mActiveStorage::Blob Load (6.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (31.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 281ms (Views: 0.7ms | ActiveRecord: 91.7ms | Allocations: 162670)


Completed 200 OK in 247ms (Views: 2.0ms | ActiveRecord: 43.5ms | Allocations: 131113)


  [1m[36mActiveStorage::Attachment Load (4.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 292ms (Views: 1.4ms | ActiveRecord: 148.8ms | Allocations: 166667)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:29:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 151ms (ActiveRecord: 0.5ms | Allocations: 30650)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:29:49 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:29:49 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:29:49 +0900
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:29:49 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
  [1m[36mActiveStorage::Blob Load (5.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Completed 500 Internal Server Error in 11ms (ActiveRecord: 5.9ms | Allocations: 3187)


Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (5.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (33.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 41ms (ActiveRecord: 33.9ms | Allocations: 21972)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 5.6ms | Allocations: 2836)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:29:49 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:29:49 +0900
  [1m[36mActiveStorage::Blob Load (28.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 71ms (ActiveRecord: 30.2ms | Allocations: 42491)


Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.8ms | Allocations: 1351)


Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.8ms | Allocations: 2209)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-01 19:29:51 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-01 19:29:52 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 4611)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:29:53 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.7ms | Allocations: 1080)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:29:53 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:29:53 +0900
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (2.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:29:53 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (4.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (2.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (4.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (1.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  [1m[36mActiveStorage::Blob Load (11.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (8.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (6.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 118ms (Views: 1.1ms | ActiveRecord: 12.9ms | Allocations: 92021)


Completed 200 OK in 148ms (Views: 2.2ms | ActiveRecord: 33.4ms | Allocations: 118154)


  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 186ms (Views: 0.8ms | ActiveRecord: 17.2ms | Allocations: 147705)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:29:53 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:29:56 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:26 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:31:26 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-01 19:31:26 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-01 19:31:26 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (9.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 9.0ms | Allocations: 2252)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:31:26 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 55ms (ActiveRecord: 2.3ms | Allocations: 4826)


Completed 500 Internal Server Error in 43ms (ActiveRecord: 1.7ms | Allocations: 3550)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (4.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 123ms (ActiveRecord: 4.4ms | Allocations: 43315)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:31:26 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (23.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 23.7ms | Allocations: 20736)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 30ms (ActiveRecord: 2.0ms | Allocations: 21472)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-01 19:31:27 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:31:30 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.1ms | Allocations: 1064)


Started GET "/users/1" for ::1 at 2023-10-01 19:31:30 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (1.7ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (0.9ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.8ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 633ms (Views: 23.1ms | ActiveRecord: 38.1ms | Allocations: 478053)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:31 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1219)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:31 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1829)


  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.0ms | Allocations: 2621)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:31:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:33 +0900
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.1ms | Allocations: 1448)


Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1126)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:31:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:33 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:31:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1835)


  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.1ms | Allocations: 2623)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:31:33 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms | Allocations: 1330)


Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms | Allocations: 2100)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:31:35 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.6ms | Allocations: 1092)


Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:31:35 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:31:35 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:31:35 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (7.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mBook Load (4.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (3.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (5.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (4.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (5.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (33.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (11.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 128ms (Views: 2.2ms | ActiveRecord: 42.9ms | Allocations: 108984)


  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mActiveStorage::Blob Load (3.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
Completed 200 OK in 164ms (Views: 1.2ms | ActiveRecord: 21.3ms | Allocations: 142068)


  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 177ms (Views: 1.1ms | ActiveRecord: 29.2ms | Allocations: 151203)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:31:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:54 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:32:56 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1066)


Started GET "/users/1" for ::1 at 2023-10-01 19:32:56 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (1.0ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.1ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (1.5ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 537ms (Views: 20.6ms | ActiveRecord: 21.8ms | Allocations: 429692)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:56 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:32:58 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1312)


Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 2144)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1189)


Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.8ms | Allocations: 2275)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-01 19:32:58 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:32:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1304)


  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 2.0ms | Allocations: 2622)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-01 19:33:02 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.2ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:33:02 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-01 19:33:02 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:33:02 +0900
  Parameters: {"current_user_id"=>"1"}
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (7.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (2.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (6.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (3.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (6.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (22.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (5.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 122ms (Views: 1.0ms | ActiveRecord: 41.2ms | Allocations: 91394)


Completed 200 OK in 157ms (Views: 2.0ms | ActiveRecord: 24.6ms | Allocations: 117176)


  [1m[36mReview Load (5.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 206ms (Views: 0.9ms | ActiveRecord: 15.2ms | Allocations: 151510)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:33:03 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-01 19:35:01 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-01 19:35:02 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 632)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-01 19:35:03 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.5ms | Allocations: 620)


Started GET "/users/find_user_by_uid/uvmpuOVwOjZYKk2VyooIJFhkZnE2" for ::1 at 2023-10-01 19:35:05 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"uvmpuOVwOjZYKk2VyooIJFhkZnE2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'uvmpuOVwOjZYKk2VyooIJFhkZnE2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 7 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 4415)


Started GET "/users/find_user_by_uid/uvmpuOVwOjZYKk2VyooIJFhkZnE2" for ::1 at 2023-10-01 19:35:05 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"uvmpuOVwOjZYKk2VyooIJFhkZnE2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'uvmpuOVwOjZYKk2VyooIJFhkZnE2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 7 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=7" for ::1 at 2023-10-01 19:35:05 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--9432df68e13d50c4ba8b5e16e3c9e13e2dc9664f/HULh0cvA_400x400.jpg" for ::1 at 2023-10-01 19:35:05 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--9432df68e13d50c4ba8b5e16e3c9e13e2dc9664f", "filename"=>"HULh0cvA_400x400"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.0ms | Allocations: 1699)


  [1m[36mNotification Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 7 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 29ms (ActiveRecord: 2.7ms | Allocations: 21663)


Started GET "/users/7" for ::1 at 2023-10-01 19:35:05 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 7[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (8, 9, 10, 15, 16, 17, 38)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 63[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 7[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (18, 19, 20, 29, 35, 38, 39, 40, 41, 48, 49, 50, 53, 54, 55)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 38, 3, 39, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 7[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (0.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (13, 15, 17, 18, 20, 22, 34, 36)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 7[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 32, 66, 68, 70, 71)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 2, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 7[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.8ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 6, 7, 8, 12, 13, 23, 24, 25, 29, 31, 32)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 7[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 271ms (Views: 10.0ms | ActiveRecord: 13.6ms | Allocations: 240662)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--9432df68e13d50c4ba8b5e16e3c9e13e2dc9664f/HULh0cvA_400x400.jpg" for ::1 at 2023-10-01 19:35:06 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--9432df68e13d50c4ba8b5e16e3c9e13e2dc9664f", "filename"=>"HULh0cvA_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=7" for ::1 at 2023-10-01 19:35:07 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 7 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1091)


Started GET "/favorites?user_id=7" for ::1 at 2023-10-01 19:35:07 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"7"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (3.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 7) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 30, 32, 33, 34, 35, 36, 37, 46, 47, 48, 49, 50, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (1.1ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 6, 2, 7, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 45[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 9[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (0.9ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 11, 2, 1)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (39, 48)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.3ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (14, 1, 3, 2, 4)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 234ms (Views: 6.1ms | ActiveRecord: 16.0ms | Allocations: 177744)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-01 19:35:08 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-01 19:35:08 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1368)


  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms | Allocations: 2667)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--9432df68e13d50c4ba8b5e16e3c9e13e2dc9664f/HULh0cvA_400x400.jpg" for ::1 at 2023-10-01 19:35:08 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--9432df68e13d50c4ba8b5e16e3c9e13e2dc9664f", "filename"=>"HULh0cvA_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-01 19:35:10 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 631)


Started GET "/pages/new_reviews" for ::1 at 2023-10-01 19:35:10 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-01 19:35:10 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-01 19:35:10 +0900
  [1m[36mBook Load (4.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  Parameters: {"current_user_id"=>"0"}
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 11429)


  [1m[36mFavoriteBook Load (6.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 102ms (Views: 2.8ms | ActiveRecord: 13.8ms | Allocations: 79745)


  [1m[36mActiveStorage::Blob Load (29.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 131ms (Views: 1.0ms | ActiveRecord: 42.9ms | Allocations: 107368)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-02 09:44:43 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 22ms (ActiveRecord: 2.3ms | Allocations: 759)


Started GET "/pages/new_reviews" for ::1 at 2023-10-02 09:44:43 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-02 09:44:43 +0900
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-02 09:44:43 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (4.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  [1m[36mUser Load (9.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 21ms (Views: 1.4ms | ActiveRecord: 11.4ms | Allocations: 5044)


  [1m[36mBook Load (12.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (13.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (17.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
Completed 200 OK in 245ms (Views: 3.4ms | ActiveRecord: 29.7ms | Allocations: 79371)


  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 282ms (Views: 1.3ms | ActiveRecord: 31.9ms | Allocations: 106954)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-02 09:44:46 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/books?current_user_id=0" for ::1 at 2023-10-02 09:44:46 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mBook Load (8.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 0) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 154ms (Views: 4.4ms | ActiveRecord: 11.4ms | Allocations: 122501)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-02 09:44:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1185)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-02 09:44:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-02 23:07:31 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 45ms (ActiveRecord: 8.1ms | Allocations: 770)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-02 23:07:31 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (3.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 23ms (ActiveRecord: 3.4ms | Allocations: 709)


Started GET "/books/1" for ::1 at 2023-10-02 23:07:31 +0900
Started GET "/books/1/reviews" for ::1 at 2023-10-02 23:07:31 +0900
Processing by BooksController#show as HTML
  Parameters: {"id"=>"1"}
Started GET "/books/1/questions" for ::1 at 2023-10-02 23:07:31 +0900
Processing by QuestionsController#index as HTML
  [1m[36mUser Load (35.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  Parameters: {"book_id"=>"1"}
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (11.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (5.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mReview Load (5.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (10.7ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (4.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (2.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (7.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
Completed 200 OK in 123ms (Views: 0.6ms | ActiveRecord: 63.2ms | Allocations: 18253)


  [1m[36mActiveStorage::Attachment Load (16.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 358ms (Views: 6.0ms | ActiveRecord: 39.7ms | Allocations: 154013)


Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 247ms (Views: 7.9ms | ActiveRecord: 4.8ms | Allocations: 183951)


Started GET "/books/is_favorite?current_user_id=&book_id=1" for ::1 at 2023-10-02 23:07:32 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"", "book_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = NULL LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
Completed 404 Not Found in 4ms (ActiveRecord: 0.7ms | Allocations: 508)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:07:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.7ms | Allocations: 1168)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-02 23:07:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-02 23:08:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.2ms | Allocations: 628)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-02 23:08:27 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 4437)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-02 23:08:27 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.1ms | Allocations: 4412)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:27 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (3.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 3.1ms | Allocations: 1119)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-02 23:08:27 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 9ms (ActiveRecord: 6.2ms | Allocations: 1069)


Started GET "/users/1" for ::1 at 2023-10-02 23:08:27 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (1.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (2.5ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (2.4ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (6.6ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (4.2ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 584ms (Views: 22.0ms | ActiveRecord: 33.0ms | Allocations: 429746)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:28 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-02 23:08:29 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1064)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-02 23:08:29 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (3.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 136ms (Views: 3.1ms | ActiveRecord: 5.2ms | Allocations: 122185)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-02 23:08:30 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-02 23:08:30 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-02 23:08:31 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.3ms | Allocations: 1064)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-02 23:08:31 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 556)


Started GET "/books/1/reviews" for ::1 at 2023-10-02 23:08:31 +0900
Processing by ReviewsController#index as HTML
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-02 23:08:31 +0900
  Parameters: {"book_id"=>"1"}
Started GET "/books/1/questions" for ::1 at 2023-10-02 23:08:31 +0900
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (5.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (3.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 239ms (Views: 6.3ms | ActiveRecord: 11.0ms | Allocations: 206863)


  [1m[36mActiveStorage::Attachment Load (176.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 366ms (Views: 5.5ms | ActiveRecord: 194.3ms | Allocations: 337479)


  [1m[36mBook Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`book_id` IS NOT NULL[0m
  ↳ app/controllers/books_controller.rb:168:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Load (0.5ms)[0m  [1m[34mSELECT `browsing_histories`.* FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`book_id` IS NOT NULL ORDER BY `browsing_histories`.`id` ASC LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Destroy (2.6ms)[0m  [1m[31mDELETE FROM `browsing_histories` WHERE `browsing_histories`.`id` = 814[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Create (0.6ms)[0m  [1m[32mINSERT INTO `browsing_histories` (`user_id`, `book_id`, `created_at`, `updated_at`) VALUES (1, 1, '2023-10-02 14:08:32.173503', '2023-10-02 14:08:32.173503')[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
Completed 200 OK in 426ms (Views: 0.3ms | ActiveRecord: 23.9ms | Allocations: 354679)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-02 23:08:32 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 1801)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1183)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-02 23:08:34 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PATCH "/books/1" for ::1 at 2023-10-02 23:08:38 +0900
Processing by BooksController#update as HTML
  Parameters: {"current_user_id"=>"1", "book"=>{"name"=>"サンプル", "author"=>"俺", "publisher"=>"日本", "subject"=>"英単語", "description"=>"＜本書の特長＞\r\n１．大学入試で頻出の重要な問題123題を厳選しました。さらに実力を定着させるための演習問題を42題掲載しました。\r\n２．人気実力講師が考え方・解き方を丁寧に解説。確実に解く力が身につきます。\r\n３．「精講→解説」のわかりやすい２段階解説。重要ポイントをおさえながら，効率よく学習できます。\r\n\r\n＜改訂ポイント＞\r\n今回の改訂では，出題頻度の高い重要な問題だけでなく，現在の入試傾向に合わせた問題を50題以上追加し差し替えました。解説もよりわかりやすくブラッシュアップしています。また，共通テストに必要な思考力も養えます。\r\n\r\n【編集担当者の声】\r\n新たな問題が50題も加わり，ますます学びやすく，わかりやすくなりました。大学入試で押さえておくべき重要な問題を網羅する問題選定の良さは折り紙付きです。大学受験の必携書として，自信をもってお勧めできる1冊です！"}, "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:61:in `update'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:64:in `update'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:67:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mBook Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `books` WHERE `books`.`name` = 'サンプル' AND `books`.`id` != 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
  [1m[36mBook Update (1.0ms)[0m  [1m[33mUPDATE `books` SET `books`.`updated_at` = '2023-10-02 14:08:38.173035', `books`.`description` = '＜本書の特長＞\r\n１．大学入試で頻出の重要な問題123題を厳選しました。さらに実力を定着させるための演習問題を42題掲載しました。\r\n２．人気実力講師が考え方・解き方を丁寧に解説。確実に解く力が身につきます。\r\n３．「精講→解説」のわかりやすい２段階解説。重要ポイントをおさえながら，効率よく学習できます。\r\n\r\n＜改訂ポイント＞\r\n今回の改訂では，出題頻度の高い重要な問題だけでなく，現在の入試傾向に合わせた問題を50題以上追加し差し替えました。解説もよりわかりやすくブラッシュアップしています。また，共通テストに必要な思考力も養えます。\r\n\r\n【編集担当者の声】\r\n新たな問題が50題も加わり，ますます学びやすく，わかりやすくなりました。大学入試で押さえておくべき重要な問題を網羅する問題選定の良さは折り紙付きです。大学受験の必携書として，自信をもってお勧めできる1冊です！' WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 5.3ms | Allocations: 12237)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:42 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1164)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:42 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-02 23:08:43 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 2.9ms | Allocations: 1072)


Started GET "/reviews/check_existence?book_id=1&id=4" for ::1 at 2023-10-02 23:08:43 +0900
Processing by ReviewsController#check_existence as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:116:in `check_existence'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:119:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1185)


Started GET "/books/1/reviews/4?current_user_id=1" for ::1 at 2023-10-02 23:08:43 +0900
Processing by ReviewsController#show as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1", "id"=>"4"}
Started GET "/books/1/reviews" for ::1 at 2023-10-02 23:08:43 +0900
Processing by ReviewsController#index as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:20:in `show'
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mReview Load (6.4ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`id` = 4 LIMIT 1[0m
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mActiveStorage::Attachment Load (2.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (4.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `reviews` INNER JOIN `browsing_histories` ON `reviews`.`id` = `browsing_histories`.`review_id` WHERE `browsing_histories`.`user_id` = 1 AND `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:133:in `exist_review_browsing_history?'
Completed 200 OK in 47ms (Views: 0.5ms | ActiveRecord: 18.7ms | Allocations: 27887)


  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 202ms (Views: 6.0ms | ActiveRecord: 14.5ms | Allocations: 195794)


Started GET "/reviews/is_favorite?current_user_id=1&review_id=4" for ::1 at 2023-10-02 23:08:44 +0900
Processing by ReviewsController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "review_id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:100:in `is_favorite'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:103:in `is_favorite'
  [1m[36mFavoriteReview Load (0.4ms)[0m  [1m[34mSELECT `favorite_reviews`.* FROM `favorite_reviews` WHERE `favorite_reviews`.`user_id` = 1 AND `favorite_reviews`.`review_id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:106:in `is_favorite'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1692)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-02 23:08:46 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.1ms | Allocations: 1063)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-02 23:08:46 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 556)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-02 23:08:46 +0900
Started GET "/books/1/reviews" for ::1 at 2023-10-02 23:08:46 +0900
Processing by BooksController#show as HTML
Started GET "/books/1/questions" for ::1 at 2023-10-02 23:08:46 +0900
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mBook Load (2.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mQuestion Load (1.0ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (6.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (2.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (5.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (3.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (4.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (4.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Exists? (6.9ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[36mActiveStorage::Attachment Load (3.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 61ms (Views: 0.3ms | ActiveRecord: 23.2ms | Allocations: 39675)


  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (2.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 182ms (Views: 5.0ms | ActiveRecord: 18.6ms | Allocations: 170273)


  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 350ms (Views: 7.1ms | ActiveRecord: 18.2ms | Allocations: 339455)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-02 23:08:47 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 1580)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-02 23:08:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-02 23:10:26 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 14:23:08 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (10.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 46ms (ActiveRecord: 19.2ms | Allocations: 1203)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-10-03 14:23:08 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (35, 16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (5.3ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 3, 39, 8, 7, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (2.8ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (59, 55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (2.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (1.7ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (2.4ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 419ms (Views: 381.4ms | ActiveRecord: 31.1ms | Allocations: 214868)


Started POST "/subject_question_replies/create_sample_notification" for ::1 at 2023-10-03 14:23:10 +0900
Processing by SubjectQuestionRepliesController#create_sample_notification as HTML
  Parameters: {"current_user_id"=>1, "sample_user_id"=>16, "content"=>"通知確認用サンプルメッセージ", "subject_question_reply"=>{"content"=>"通知確認用サンプルメッセージ"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:134:in `create_sample_notification'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:137:in `create_sample_notification'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1 ORDER BY `subject_questions`.`id` ASC LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:140:in `create_sample_notification'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subject_question_replies_controller.rb:149:in `create_sample_notification'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:149:in `create_sample_notification'
  [1m[36mSubjectQuestionReply Create (4.8ms)[0m  [1m[32mINSERT INTO `subject_question_replies` (`content`, `user_id`, `subject_question_id`, `created_at`, `updated_at`) VALUES ('通知確認用サンプル返信', 16, 1, '2023-10-03 05:23:10.453584', '2023-10-03 05:23:10.453584')[0m
  ↳ app/controllers/subject_question_replies_controller.rb:149:in `create_sample_notification'
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subject_question_replies_controller.rb:149:in `create_sample_notification'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:190:in `create_notification_subject_question_reply'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:190:in `create_notification_subject_question_reply'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subject_question_replies_controller.rb:190:in `create_notification_subject_question_reply'
  [1m[36mNotification Create (1.5ms)[0m  [1m[32mINSERT INTO `notifications` (`action_user_id`, `target_user_id`, `subject_question_id`, `subject_question_reply_id`, `action_type`, `action_to`, `created_at`, `updated_at`) VALUES (16, 1, 1, 80, 'Reply', 'SubjectQuestionReply', '2023-10-03 05:23:10.474288', '2023-10-03 05:23:10.474288')[0m
  ↳ app/controllers/subject_question_replies_controller.rb:190:in `create_notification_subject_question_reply'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subject_question_replies_controller.rb:190:in `create_notification_subject_question_reply'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT DISTINCT `subject_question_replies`.`user_id` FROM `subject_question_replies` WHERE `subject_question_replies`.`subject_question_id` = 1 AND `subject_question_replies`.`user_id` != 16 AND `subject_question_replies`.`user_id` != 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:196:in `create_notification_subject_question_reply'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mNotification Create (1.4ms)[0m  [1m[32mINSERT INTO `notifications` (`action_user_id`, `target_user_id`, `subject_question_id`, `subject_question_reply_id`, `action_type`, `action_to`, `created_at`, `updated_at`) VALUES (16, 4, 1, 80, 'Reply', 'SubjectQuestionReply', '2023-10-03 05:23:10.486780', '2023-10-03 05:23:10.486780')[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 16 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7 LIMIT 1[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mNotification Create (1.5ms)[0m  [1m[32mINSERT INTO `notifications` (`action_user_id`, `target_user_id`, `subject_question_id`, `subject_question_reply_id`, `action_type`, `action_to`, `created_at`, `updated_at`) VALUES (16, 7, 1, 80, 'Reply', 'SubjectQuestionReply', '2023-10-03 05:23:10.498083', '2023-10-03 05:23:10.498083')[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/subject_question_replies_controller.rb:204:in `block in create_notification_subject_question_reply'
Completed 204 No Content in 65ms (ActiveRecord: 24.4ms | Allocations: 19340)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 14:23:10 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 3ms (ActiveRecord: 0.9ms | Allocations: 1102)


Started GET "/pages/new_reviews" for ::1 at 2023-10-03 14:23:10 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 14:23:10 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-03 14:23:10 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (2.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (6.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (9.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (6.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (20.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (5.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 89ms (Views: 2.0ms | ActiveRecord: 17.1ms | Allocations: 65940)


  [1m[36mActiveStorage::Blob Load (38.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  [1m[36mFavoriteBook Load (2.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (9.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (26.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 176ms (Views: 1.1ms | ActiveRecord: 60.7ms | Allocations: 138660)


  [1m[36mActiveStorage::Attachment Load (2.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 197ms (Views: 1.1ms | ActiveRecord: 69.5ms | Allocations: 151995)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 14:23:11 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1162)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 14:23:13 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 200 OK in 7ms (ActiveRecord: 2.4ms | Allocations: 1090)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-10-03 14:23:13 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 35, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (2.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 3, 39, 8, 7, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (2.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (59, 55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (2.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (1.4ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (80, 79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (2.2ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 16[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mSubjectQuestionReply Load (0.4ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` = 80[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 16[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mCACHE SubjectQuestion Load (0.0ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/notifications_controller.rb:31:in `block in index'
  [1m[36mNotification Update (1.8ms)[0m  [1m[33mUPDATE `notifications` SET `notifications`.`is_checked` = TRUE, `notifications`.`updated_at` = '2023-10-03 05:23:13.480161' WHERE `notifications`.`id` = 384[0m
  ↳ app/controllers/notifications_controller.rb:31:in `block in index'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/notifications_controller.rb:31:in `block in index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 402ms (Views: 358.7ms | ActiveRecord: 21.5ms | Allocations: 223362)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 14:23:13 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 17:14:30 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 17ms (ActiveRecord: 8.1ms | Allocations: 1172)


Started GET "/subject_questions" for ::1 at 2023-10-03 17:14:30 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (7.3ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (2.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 136ms (Views: 4.9ms | ActiveRecord: 12.2ms | Allocations: 91976)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-03 17:14:36 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 19ms (Views: 0.4ms | ActiveRecord: 2.9ms | Allocations: 4465)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 17:14:36 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 2.0ms | Allocations: 1074)


Started GET "/subject_questions" for ::1 at 2023-10-03 17:14:36 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (2.4ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 117ms (Views: 5.0ms | ActiveRecord: 4.0ms | Allocations: 91561)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 17:14:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.5ms | Allocations: 1169)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:08:29 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 17ms (ActiveRecord: 11.2ms | Allocations: 1201)


Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:08:29 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:08:29 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:08:29 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (4.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (9.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mBook Load (3.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (7.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (2.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (6.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (18.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 107ms (Views: 4.8ms | ActiveRecord: 18.0ms | Allocations: 84941)


  [1m[36mActiveStorage::Attachment Load (31.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (42.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (33.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
Completed 200 OK in 182ms (Views: 0.8ms | ActiveRecord: 84.2ms | Allocations: 140488)


  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 202ms (Views: 0.9ms | ActiveRecord: 73.3ms | Allocations: 151453)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:08:30 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:08:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:08:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:08:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:08:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-03 21:08:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.1ms | Allocations: 3432)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 31ms (ActiveRecord: 2.1ms | Allocations: 21479)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869/no%20image.png" for ::1 at 2023-10-03 21:08:32 +0900
Completed 500 Internal Server Error in 33ms (ActiveRecord: 2.5ms | Allocations: 22517)


  [1m[36mActiveStorage::Blob Load (5.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 37ms (ActiveRecord: 29.9ms | Allocations: 24262)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  [1m[36mActiveStorage::Blob Load (29.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aeaa8c00feaa1753b503ce3977bba06556c04869", "filename"=>"no image"}
Completed 500 Internal Server Error in 112ms (ActiveRecord: 33.7ms | Allocations: 82091)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (21.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
Completed 500 Internal Server Error in 25ms (ActiveRecord: 21.7ms | Allocations: 20527)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-03 21:08:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-03 21:09:04 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 2.8ms | Allocations: 4416)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:09:04 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:09:04 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:09:04 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:09:04 +0900
  [1m[36mReview Load (4.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
Processing by PagesController#popular_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (9.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (4.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (12.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mActiveStorage::Blob Load (9.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (1.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (24.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (6.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (12.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (43.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 138ms (Views: 2.4ms | ActiveRecord: 26.4ms | Allocations: 82215)


  [1m[36mReview Load (6.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 178ms (Views: 1.4ms | ActiveRecord: 57.3ms | Allocations: 113480)


  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 233ms (Views: 0.8ms | ActiveRecord: 61.0ms | Allocations: 147743)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:09:05 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:09:07 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:09:07 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:09:07 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (8.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-03 21:09:07 +0900
  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 19ms (ActiveRecord: 8.7ms | Allocations: 3286)


Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.9ms | Allocations: 3542)


Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 3.4ms | Allocations: 5003)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1243)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:09:33 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-03 21:09:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.6ms | Allocations: 2069)


  [1m[36mActiveStorage::Blob Load (2.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.5ms | Allocations: 2623)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-03 21:12:26 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 4416)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:12:26 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 2.7ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:12:26 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:12:26 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:12:26 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (6.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (3.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (5.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (2.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (7.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (10.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mFavoriteBook Load (4.0ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (5.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (37.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (17.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 180ms (Views: 3.1ms | ActiveRecord: 42.8ms | Allocations: 109359)


  [1m[36mBook Load (45.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 222ms (Views: 1.0ms | ActiveRecord: 18.7ms | Allocations: 138190)


  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 260ms (Views: 0.8ms | ActiveRecord: 101.5ms | Allocations: 151525)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:12:27 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:12:28 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.7ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:12:29 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-03 21:12:29 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.4ms | Allocations: 1307)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (3.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 63ms (ActiveRecord: 3.7ms | Allocations: 21684)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:12:29 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:12:29 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.7ms | Allocations: 1474)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 43ms (ActiveRecord: 2.8ms | Allocations: 21547)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-03 21:12:29 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (2.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-03 21:12:39 +0900
  [1m[35m (3.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (2.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 120ms (Views: 0.6ms | ActiveRecord: 20.6ms | Allocations: 52401)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:12:40 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 15ms (ActiveRecord: 4.9ms | Allocations: 4182)


Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:12:40 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:12:40 +0900
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:12:40 +0900
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mUser Load (10.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (3.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mBook Load (7.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (7.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (6.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (2.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mFavoriteBook Load (31.0ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 270ms (Views: 2.0ms | ActiveRecord: 21.9ms | Allocations: 119012)


  [1m[36mBook Load (35.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (14.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (5.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 341ms (Views: 1.2ms | ActiveRecord: 103.5ms | Allocations: 162184)


  [1m[36mActiveStorage::Blob Load (38.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 348ms (Views: 1.0ms | ActiveRecord: 162.7ms | Allocations: 166344)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:12:41 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 166ms (ActiveRecord: 0.6ms | Allocations: 30651)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:12:41 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:12:41 +0900
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-03 21:12:41 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.2ms | Allocations: 3005)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 55ms (ActiveRecord: 2.8ms | Allocations: 22022)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:12:42 +0900
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 70ms (ActiveRecord: 2.7ms | Allocations: 22309)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:12:42 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.9ms | Allocations: 19284)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (23.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 23.6ms | Allocations: 20006)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-03 21:13:13 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:17:31 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 64ms (ActiveRecord: 18.5ms | Allocations: 27759)


Started GET "/favorites?user_id=1" for ::1 at 2023-10-03 21:17:31 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (5.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (4.4ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (9.0ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (6.1ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (2.2ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (4.2ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 718ms (Views: 21.1ms | ActiveRecord: 85.0ms | Allocations: 474267)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:17:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.6ms | Allocations: 1672)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:17:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7eed67aa4168033f292ec56cb0fcc95033895639/default_image.jpg" for ::1 at 2023-10-03 21:17:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBJQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--da5bc37fb202cdf1f9608159dc5c43df370738a1/%E3%82%A4%E3%83%AA%E3%82%AA%E3%83%A2%E3%83%86%E3%83%A4%E3%83%9E%E3%83%8D%E3%82%B3.jpg" for ::1 at 2023-10-03 21:17:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBPdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--efa1de370024285c8b298b9cf902759935312f98/downloaded-image.jpg" for ::1 at 2023-10-03 21:17:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBUZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--7eed67aa4168033f292ec56cb0fcc95033895639", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (3.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 73 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBPdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--efa1de370024285c8b298b9cf902759935312f98", "filename"=>"downloaded-image"}
Completed 500 Internal Server Error in 26ms (ActiveRecord: 3.1ms | Allocations: 2831)


  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBJQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--da5bc37fb202cdf1f9608159dc5c43df370738a1", "filename"=>"イリオモテヤマネコ"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.2ms | Allocations: 2503)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (36.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 54 LIMIT 1[0m
Completed 500 Internal Server Error in 78ms (ActiveRecord: 36.4ms | Allocations: 40212)


  [1m[36mActiveStorage::Blob Load (37.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 27 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 82ms (ActiveRecord: 39.4ms | Allocations: 41155)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:17:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 3.7ms | Allocations: 1092)


Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:17:33 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:17:33 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:17:33 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (7.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (5.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mUser Load (11.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mFavoriteBook Load (3.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (3.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (29.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (14.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (2.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 137ms (Views: 2.0ms | ActiveRecord: 32.3ms | Allocations: 112187)


  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 184ms (Views: 0.8ms | ActiveRecord: 60.7ms | Allocations: 148018)


  [1m[36mActiveStorage::Blob Load (36.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 199ms (Views: 1.3ms | ActiveRecord: 82.3ms | Allocations: 154635)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:17:34 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:17:34 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:17:34 +0900
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (3.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 3.5ms | Allocations: 1807)


  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.9ms | Allocations: 3261)


Completed 500 Internal Server Error in 38ms (ActiveRecord: 3.9ms | Allocations: 21497)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-03 21:17:35 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBPQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--374617a636da001322064694b2e7ca1e5d999306/Harry%20Potter2.jpg" for ::1 at 2023-10-03 21:17:43 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBPQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--374617a636da001322064694b2e7ca1e5d999306", "filename"=>"Harry Potter2"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 51 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-03 21:18:15 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 80ms (Views: 0.2ms | ActiveRecord: 13.2ms | Allocations: 43028)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:18:15 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 12ms (ActiveRecord: 3.0ms | Allocations: 4027)


Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:18:15 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:18:15 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:18:15 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (14.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (15.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (11.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (2.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (7.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (8.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (5.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (2.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (6.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (2.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
Completed 200 OK in 160ms (Views: 2.3ms | ActiveRecord: 38.0ms | Allocations: 91127)


  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (32.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
Completed 200 OK in 242ms (Views: 0.9ms | ActiveRecord: 111.2ms | Allocations: 156024)


  [1m[36mBook Load (2.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 251ms (Views: 1.2ms | ActiveRecord: 45.0ms | Allocations: 162522)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:18:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1664)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-03 21:18:17 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:18:17 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:18:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.9ms | Allocations: 2012)


  [1m[36mActiveStorage::Blob Load (5.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (3.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 69ms (ActiveRecord: 3.8ms | Allocations: 22470)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 5.2ms | Allocations: 2868)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:18:17 +0900
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:18:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1843)


  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms | Allocations: 2624)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-03 21:18:20 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:18:24 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.4ms | Allocations: 1093)


Started GET "/books/check_existence?id=37" for ::1 at 2023-10-03 21:18:24 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"37"}
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 37 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 904)


Started GET "/books/37?current_user_id=1" for ::1 at 2023-10-03 21:18:24 +0900
Started GET "/books/37/questions" for ::1 at 2023-10-03 21:18:24 +0900
Processing by BooksController#show as HTML
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"37"}
  Parameters: {"current_user_id"=>"1", "id"=>"37"}
Started GET "/books/37/reviews" for ::1 at 2023-10-03 21:18:24 +0900
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 37 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"37"}
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 37 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mQuestion Load (2.5ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 37[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 9.1ms | Allocations: 8541)


  [1m[36mBook Load (2.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 37 LIMIT 1[0m
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 37[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 2910)


  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 37[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 37[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 37 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`book_id` IS NOT NULL[0m
  ↳ app/controllers/books_controller.rb:168:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Load (0.5ms)[0m  [1m[34mSELECT `browsing_histories`.* FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`book_id` IS NOT NULL ORDER BY `browsing_histories`.`id` ASC LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Destroy (3.2ms)[0m  [1m[31mDELETE FROM `browsing_histories` WHERE `browsing_histories`.`id` = 817[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:169:in `save_book_browsing_history'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
  [1m[36mBrowsingHistory Create (0.6ms)[0m  [1m[32mINSERT INTO `browsing_histories` (`user_id`, `book_id`, `created_at`, `updated_at`) VALUES (1, 37, '2023-10-03 12:18:24.743881', '2023-10-03 12:18:24.743881')[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:170:in `save_book_browsing_history'
Completed 200 OK in 69ms (Views: 0.2ms | ActiveRecord: 24.1ms | Allocations: 26792)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:18:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.8ms | Allocations: 1196)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/books/is_favorite?current_user_id=1&book_id=37" for ::1 at 2023-10-03 21:18:25 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"37"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 37 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 37 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 1691)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-03 21:18:26 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 1.3ms | Allocations: 1070)


Started GET "/pages/new_reviews" for ::1 at 2023-10-03 21:18:26 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-03 21:18:26 +0900
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-03 21:18:26 +0900
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (7.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (6.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (1.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (4.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (6.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (21.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
Completed 200 OK in 107ms (Views: 2.3ms | ActiveRecord: 11.4ms | Allocations: 78709)


  [1m[36mActiveStorage::Attachment Load (27.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (3.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 147ms (Views: 1.3ms | ActiveRecord: 51.3ms | Allocations: 116383)


  [1m[36mReview Load (29.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 188ms (Views: 1.2ms | ActiveRecord: 57.5ms | Allocations: 144972)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:18:27 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-03 21:18:28 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-03 21:18:28 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:18:28 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1305)


  [1m[36mActiveStorage::Blob Load (2.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.9ms | Allocations: 2622)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-03 21:18:28 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-03 21:18:28 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.1ms | Allocations: 1304)


  [1m[36mActiveStorage::Blob Load (2.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.9ms | Allocations: 2625)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBPQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--374617a636da001322064694b2e7ca1e5d999306/Harry%20Potter2.jpg" for ::1 at 2023-10-03 21:18:31 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBPQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--374617a636da001322064694b2e7ca1e5d999306", "filename"=>"Harry Potter2"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 51 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBJQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--da5bc37fb202cdf1f9608159dc5c43df370738a1/%E3%82%A4%E3%83%AA%E3%82%AA%E3%83%A2%E3%83%86%E3%83%A4%E3%83%9E%E3%83%8D%E3%82%B3.jpg" for ::1 at 2023-10-03 21:18:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-03 21:18:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBJQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--da5bc37fb202cdf1f9608159dc5c43df370738a1", "filename"=>"イリオモテヤマネコ"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 27 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.6ms | Allocations: 2386)


  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.3ms | Allocations: 2623)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-04 11:37:12 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (2.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 15ms (ActiveRecord: 3.6ms | Allocations: 1256)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 11:51:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 12ms (ActiveRecord: 5.5ms | Allocations: 1173)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-04 11:51:16 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (9.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 150ms (Views: 4.0ms | ActiveRecord: 11.5ms | Allocations: 122245)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 11:51:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-04 11:51:16 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 11:51:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1809)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (27.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 34ms (ActiveRecord: 28.5ms | Allocations: 21605)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 11:51:18 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 3.0ms | Allocations: 1065)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 11:52:32 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 4415)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 11:52:32 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1062)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 11:52:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 11:57:22 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 11:57:22 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1062)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 11:57:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:00:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 10ms (ActiveRecord: 5.2ms | Allocations: 1062)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-04 12:00:21 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (7.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 215ms (Views: 5.3ms | ActiveRecord: 10.0ms | Allocations: 122132)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:00:22 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1122)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:00:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 2.2ms | Allocations: 1064)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:06:13 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 9ms (ActiveRecord: 2.4ms | Allocations: 1171)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:07:07 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 2.4ms | Allocations: 1062)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:08:32 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1062)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-04 12:08:32 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (8.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 183ms (Views: 35.5ms | ActiveRecord: 11.1ms | Allocations: 122133)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:08:33 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.5ms | Allocations: 1122)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-04 12:08:34 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:08:35 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1065)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-04 12:08:35 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 557)


Started GET "/books/1/reviews" for ::1 at 2023-10-04 12:08:35 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-04 12:08:35 +0900
Processing by ReviewsController#index as HTML
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-04 12:08:35 +0900
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mQuestion Load (8.6ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (3.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mUser Load (11.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (5.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (3.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Blob Load (3.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (5.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 252ms (Views: 6.8ms | ActiveRecord: 21.5ms | Allocations: 205735)


  [1m[36mBook Exists? (181.9ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 277ms (Views: 0.3ms | ActiveRecord: 204.0ms | Allocations: 210070)


  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 432ms (Views: 5.4ms | ActiveRecord: 38.7ms | Allocations: 343138)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-04 12:08:36 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (1.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 9ms (Views: 0.4ms | ActiveRecord: 2.0ms | Allocations: 1580)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:08:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:08:37 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:08:43 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:08:43 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1062)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-04 12:08:43 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 3ms (ActiveRecord: 0.4ms | Allocations: 554)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-04 12:08:43 +0900
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Started GET "/books/1/reviews" for ::1 at 2023-10-04 12:08:43 +0900
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
Started GET "/books/1/questions" for ::1 at 2023-10-04 12:08:43 +0900
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (3.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mBook Load (4.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mReview Load (3.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (2.2ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (2.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (2.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (5.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
Completed 200 OK in 67ms (Views: 0.4ms | ActiveRecord: 15.0ms | Allocations: 36708)


  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 245ms (Views: 5.9ms | ActiveRecord: 24.8ms | Allocations: 170903)


  [1m[36mActiveStorage::Blob Load (171.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 476ms (Views: 7.8ms | ActiveRecord: 191.5ms | Allocations: 338494)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-04 12:08:44 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.6ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1576)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:08:44 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:08:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms | Allocations: 1331)


Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.4ms | Allocations: 2146)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:12:14 +0900
  [1m[35m (1.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 77ms (ActiveRecord: 6.9ms | Allocations: 32774)


Started GET "/pages/popular_books" for ::1 at 2023-10-04 12:12:14 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/new_reviews" for ::1 at 2023-10-04 12:12:14 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-04 12:12:14 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mBook Load (10.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:40:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (12.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (3.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (45.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (12.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mFavoriteBook Load (5.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (10.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (5.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (30.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
Completed 200 OK in 334ms (Views: 2.7ms | ActiveRecord: 75.9ms | Allocations: 152318)


Completed 200 OK in 323ms (Views: 0.9ms | ActiveRecord: 44.5ms | Allocations: 133101)


  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 387ms (Views: 1.5ms | ActiveRecord: 155.3ms | Allocations: 185845)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:12:15 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 219ms (ActiveRecord: 0.5ms | Allocations: 30650)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:12:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.6ms | Allocations: 1245)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-04 12:12:17 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-04 12:12:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1312)


  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.9ms | Allocations: 2626)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-04 12:12:18 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:12:18 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1830)


  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.4ms | Allocations: 2627)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:16:51 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 1.0ms | Allocations: 1142)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-04 12:16:51 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (4.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 137ms (Views: 4.3ms | ActiveRecord: 6.5ms | Allocations: 122601)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:16:51 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.1ms | Allocations: 1187)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:16:52 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (4.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 4.2ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-04 12:16:52 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1119)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:16:53 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1087)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-04 12:16:53 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 3ms (ActiveRecord: 0.5ms | Allocations: 711)


Started GET "/books/1/questions" for ::1 at 2023-10-04 12:16:53 +0900
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-04 12:16:53 +0900
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
Processing by BooksController#show as HTML
Started GET "/books/1/reviews" for ::1 at 2023-10-04 12:16:53 +0900
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (4.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (8.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (2.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (4.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (6.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (3.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (8.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (13.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 72ms (Views: 0.3ms | ActiveRecord: 31.5ms | Allocations: 43384)


  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (5.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (102.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 246ms (Views: 6.5ms | ActiveRecord: 30.1ms | Allocations: 215584)


Completed 200 OK in 413ms (Views: 5.8ms | ActiveRecord: 135.0ms | Allocations: 350831)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-04 12:16:54 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 1798)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:17:00 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1170)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:17:01 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:17:01 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:17:01 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:17:14 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 5012)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:17:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 41ms (ActiveRecord: 1.6ms | Allocations: 1079)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-04 12:17:14 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 5ms (ActiveRecord: 0.9ms | Allocations: 556)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-04 12:17:14 +0900
Started GET "/books/1/reviews" for ::1 at 2023-10-04 12:17:14 +0900
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Started GET "/books/1/questions" for ::1 at 2023-10-04 12:17:14 +0900
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (2.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
Processing by QuestionsController#index as HTML
  [1m[36mBook Load (3.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"book_id"=>"1"}
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mReview Load (4.5ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  [1m[36mReview Load (2.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (2.1ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (4.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (4.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Exists? (9.4ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (5.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
Completed 200 OK in 83ms (Views: 0.9ms | ActiveRecord: 24.1ms | Allocations: 38381)


  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 403ms (Views: 7.4ms | ActiveRecord: 29.1ms | Allocations: 209686)


  [1m[36mActiveStorage::Blob Load (102.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 570ms (Views: 5.0ms | ActiveRecord: 115.8ms | Allocations: 337428)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-04 12:17:15 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 1580)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:17:15 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:17:15 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1344)


  [1m[36mActiveStorage::Blob Load (3.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 3.8ms | Allocations: 2713)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:17:50 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.2ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:17:50 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (3.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 112ms (Views: 4.4ms | ActiveRecord: 6.7ms | Allocations: 99514)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:17:57 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 4468)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:17:58 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 1076)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:17:58 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.3ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 130ms (Views: 3.8ms | ActiveRecord: 2.9ms | Allocations: 91557)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:17:58 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (5.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 15ms (ActiveRecord: 5.1ms | Allocations: 1171)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:18:15 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:18:15 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.8ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:18:15 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.1ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 115ms (Views: 3.9ms | ActiveRecord: 2.9ms | Allocations: 91561)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:18:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:20:11 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 4413)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:20:12 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:20:12 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (2.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 115ms (Views: 4.8ms | ActiveRecord: 3.9ms | Allocations: 91564)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:20:12 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:20:17 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 18ms (Views: 0.8ms | ActiveRecord: 2.2ms | Allocations: 4413)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:20:17 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:20:17 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 115ms (Views: 3.2ms | ActiveRecord: 3.2ms | Allocations: 91556)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:20:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:20:26 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 4416)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:20:26 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:20:26 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.5ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 121ms (Views: 4.8ms | ActiveRecord: 3.3ms | Allocations: 91562)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:20:26 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:20:56 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:20:56 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:20:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:21:05 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 19ms (Views: 0.4ms | ActiveRecord: 2.1ms | Allocations: 4415)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:21:05 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 1.6ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:21:05 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 170ms (Views: 6.6ms | ActiveRecord: 3.5ms | Allocations: 91563)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:21:05 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:21:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:21:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:21:16 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:21:35 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 4415)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:21:35 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.8ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:21:35 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (2.4ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 130ms (Views: 5.2ms | ActiveRecord: 4.0ms | Allocations: 91562)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:21:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-04 12:25:00 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 1.6ms | Allocations: 4416)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:25:00 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.8ms | Allocations: 1063)


Started GET "/subject_questions" for ::1 at 2023-10-04 12:25:00 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.3ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 141ms (Views: 3.8ms | ActiveRecord: 2.8ms | Allocations: 91560)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:25:08 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.7ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:25:43 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.3ms | Allocations: 1064)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-04 12:25:43 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (12.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 192ms (Views: 4.4ms | ActiveRecord: 14.9ms | Allocations: 122161)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:25:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1119)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:25:45 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.2ms | Allocations: 1064)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-04 12:25:45 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 556)


Started GET "/books/1/questions" for ::1 at 2023-10-04 12:25:45 +0900
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-04 12:25:45 +0900
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
Processing by BooksController#show as HTML
Started GET "/books/1/reviews" for ::1 at 2023-10-04 12:25:45 +0900
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mQuestion Load (2.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (2.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mBook Load (3.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (4.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Load (2.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (4.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (5.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (2.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (3.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (2.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  [1m[36mBook Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
Completed 200 OK in 206ms (Views: 5.3ms | ActiveRecord: 14.1ms | Allocations: 168160)


Completed 200 OK in 205ms (Views: 0.4ms | ActiveRecord: 16.7ms | Allocations: 168052)


  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 462ms (Views: 6.1ms | ActiveRecord: 24.2ms | Allocations: 338664)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-04 12:25:46 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.5ms | Allocations: 1582)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:25:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:25:54 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:25:54 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:25:57 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:25:58 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1064)


Started GET "/questions/check_existence?book_id=1&id=2" for ::1 at 2023-10-04 12:25:58 +0900
Processing by QuestionsController#check_existence as HTML
  Parameters: {"book_id"=>"1", "id"=>"2"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:144:in `check_existence'
  [1m[36mQuestion Load (1.3ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:147:in `check_existence'
Completed 200 OK in 5ms (ActiveRecord: 1.8ms | Allocations: 1200)


Started GET "/books/1/questions/2?current_user_id=1" for ::1 at 2023-10-04 12:25:58 +0900
Processing by QuestionsController#show as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1", "id"=>"2"}
Started GET "/books/1/questions" for ::1 at 2023-10-04 12:25:58 +0900
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Started GET "/books/1/questions/2/replies" for ::1 at 2023-10-04 12:25:58 +0900
  ↳ app/controllers/questions_controller.rb:21:in `show'
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (3.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:25:in `show'
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:25:in `show'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mQuestion Load (4.7ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/questions_controller.rb:25:in `show'
  [1m[36mBook Load (4.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mQuestion Load (5.2ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (2.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (5.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 209ms (Views: 6.0ms | ActiveRecord: 20.4ms | Allocations: 155504)


  [1m[36mActiveStorage::Blob Load (147.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/questions_controller.rb:31:in `show'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 2 AND `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:202:in `attach_image_to_question'
  [1m[36mQuestion Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM `questions` INNER JOIN `browsing_histories` ON `questions`.`id` = `browsing_histories`.`question_id` WHERE `browsing_histories`.`user_id` = 1 AND `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:161:in `exist_question_browsing_history?'
Completed 200 OK in 234ms (Views: 0.5ms | ActiveRecord: 173.4ms | Allocations: 164565)


Processing by RepliesController#index as HTML
  Parameters: {"book_id"=>"1", "question_id"=>"2"}
  [1m[36mQuestion Load (0.3ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/replies_controller.rb:8:in `index'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`question_id` = 2[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 4, 5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 18, 19, 20, 38, 39, 40, 41, 46, 59)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (58, 83)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 1, 7, 35)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 35)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 76)[0m
  ↳ app/controllers/replies_controller.rb:15:in `index'
Completed 200 OK in 133ms (Views: 3.8ms | ActiveRecord: 11.6ms | Allocations: 107784)


Started GET "/questions/is_favorite?current_user_id=1&question_id=2" for ::1 at 2023-10-04 12:25:58 +0900
Processing by QuestionsController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "question_id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:102:in `is_favorite'
  [1m[36mQuestion Load (1.9ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:105:in `is_favorite'
  [1m[36mFavoriteQuestion Load (1.4ms)[0m  [1m[34mSELECT `favorite_questions`.* FROM `favorite_questions` WHERE `favorite_questions`.`user_id` = 1 AND `favorite_questions`.`question_id` = 2 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:108:in `is_favorite'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 5.5ms | Allocations: 3029)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:26:03 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1202)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:26:03 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:26:05 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-04 12:26:06 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.3ms | Allocations: 1088)


Started GET "/users/1" for ::1 at 2023-10-04 12:26:06 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.4ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.0ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (2.5ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 606ms (Views: 19.2ms | ActiveRecord: 32.8ms | Allocations: 454219)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:26:08 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1218)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-04 12:26:09 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-04 12:26:09 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/pages/new_reviews" for ::1 at 2023-10-05 19:21:24 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (21.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 245ms (Views: 3.1ms | ActiveRecord: 41.9ms | Allocations: 53799)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-05 21:12:56 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (8.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 90ms (ActiveRecord: 16.1ms | Allocations: 26745)


Started GET "/users/1" for ::1 at 2023-10-05 21:12:57 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (14.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (11.1ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (3.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (2.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (5.3ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.6ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (4.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 1151ms (Views: 21.6ms | ActiveRecord: 75.9ms | Allocations: 498774)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:12:59 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.4ms | Allocations: 1672)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PATCH "/users/1" for ::1 at 2023-10-05 21:13:38 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"sampleeeee", "introduction"=>"よろしくお願いします!!!!!", "first_choice_school"=>"AA大学", "second_choice_school"=>"BB大学", "third_choice_school"=>"明治大学"}, "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
Completed 422 Unprocessable Entity in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 780)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-05 21:14:00 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.1ms | Allocations: 1136)


Started GET "/users/1" for ::1 at 2023-10-05 21:14:00 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (1.0ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.5ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 700ms (Views: 18.7ms | ActiveRecord: 18.4ms | Allocations: 429810)


Started PATCH "/users/1" for ::1 at 2023-10-05 21:15:45 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"sampleeeee", "introduction"=>"よろしくお願いします!!!!!", "first_choice_school"=>"AA大学", "second_choice_school"=>"BB大学", "third_choice_school"=>"明治大学"}, "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mUser Exists? (11.4ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'sample@sample.com' AND `users`.`id` != 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:129:in `update'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:129:in `update'
Completed 200 OK in 193ms (Views: 0.4ms | ActiveRecord: 80.4ms | Allocations: 48240)


Started GET "/users/1" for ::1 at 2023-10-05 21:15:46 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (1.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.8ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 815ms (Views: 22.9ms | ActiveRecord: 58.8ms | Allocations: 489318)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:15:49 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1675)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-05 21:15:50 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.1ms | Allocations: 1766)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (24.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 30ms (ActiveRecord: 25.8ms | Allocations: 21636)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-05 21:15:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-05 21:28:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 81ms (ActiveRecord: 26.2ms | Allocations: 27287)


Started GET "/users/1" for ::1 at 2023-10-05 21:28:23 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (6.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (2.1ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.2ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (4.1ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 1153ms (Views: 63.1ms | ActiveRecord: 34.9ms | Allocations: 498590)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:28:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms | Allocations: 1674)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PATCH "/users/1" for ::1 at 2023-10-05 21:28:30 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"sampleeeee", "introduction"=>"よろしくお願いします!!!!!", "first_choice_school"=>"AA大学", "second_choice_school"=>"BB大学", "third_choice_school"=>"明治大学"}, "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
Completed 422 Unprocessable Entity in 3ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 664)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-05 21:28:37 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:28:37 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PATCH "/users/1" for ::1 at 2023-10-05 21:28:39 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"sampleeeee", "introduction"=>"よろしくお願いします!!!!!", "first_choice_school"=>"AA大学", "second_choice_school"=>"BB大学", "third_choice_school"=>"明治大学"}, "id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 592)


Started PATCH "/users/1" for ::1 at 2023-10-05 21:29:02 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"sampleeeee", "introduction"=>"よろしくお願いします!!!!!", "first_choice_school"=>"AA大学", "second_choice_school"=>"BB大学", "third_choice_school"=>"明治大学"}, "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
Completed 422 Unprocessable Entity in 53ms (Views: 0.2ms | ActiveRecord: 7.5ms | Allocations: 23934)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:29:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.5ms | Allocations: 828)


Started GET "/pages/new_reviews" for ::1 at 2023-10-05 21:29:14 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-05 21:29:14 +0900
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-05 21:29:14 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 26ms (Views: 0.1ms | ActiveRecord: 8.8ms | Allocations: 12399)


  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (16.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (15.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 180ms (Views: 3.7ms | ActiveRecord: 56.0ms | Allocations: 109559)


  [1m[36mActiveStorage::Attachment Load (35.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 224ms (Views: 3.1ms | ActiveRecord: 99.0ms | Allocations: 137358)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-05 21:29:15 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:29:15 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-05 21:29:15 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.4ms | Allocations: 2023)


  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.9ms | Allocations: 2345)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 6.0ms | Allocations: 3675)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:29:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 648)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:29:17 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.2ms | Allocations: 620)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:29:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.4ms | Allocations: 620)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:29:25 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 2ms (ActiveRecord: 0.3ms | Allocations: 620)


Started GET "/users/find_user_by_uid/AUWLt9IE1vZ0QJuxpUoCOibzB3E2" for ::1 at 2023-10-05 21:29:46 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"AUWLt9IE1vZ0QJuxpUoCOibzB3E2"}
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:29:46 +0900
Started POST "/users" for ::1 at 2023-10-05 21:29:46 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'AUWLt9IE1vZ0QJuxpUoCOibzB3E2' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
Processing by UsersController#create as HTML
Completed 404 Not Found in 8ms (ActiveRecord: 4.0ms | Allocations: 1343)


  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  Parameters: {"name"=>"aaaa", "email"=>"example@sample.com", "uid"=>"AUWLt9IE1vZ0QJuxpUoCOibzB3E2", "user"=>{"name"=>"aaaa", "email"=>"example@sample.com", "uid"=>"AUWLt9IE1vZ0QJuxpUoCOibzB3E2"}}
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 2.1ms | Allocations: 1859)


  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:108:in `create'
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'example@sample.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:108:in `create'
Started GET "/pages/new_reviews" for ::1 at 2023-10-05 21:29:46 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-05 21:29:46 +0900
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-05 21:29:46 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mReview Load (3.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (8.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (10.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  [1m[36mBook Load (4.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (2.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 12.4ms | Allocations: 15904)


  [1m[36mUser Create (36.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `uid`, `created_at`, `updated_at`) VALUES ('aaaa', 'example@sample.com', 'AUWLt9IE1vZ0QJuxpUoCOibzB3E2', '2023-10-05 12:29:46.513845', '2023-10-05 12:29:46.513845')[0m
  ↳ app/controllers/users_controller.rb:108:in `create'
  [1m[36mActiveStorage::Attachment Load (15.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mFavoriteBook Load (6.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mTRANSACTION (15.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:108:in `create'
  [1m[36mActiveStorage::Blob Load (10.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (26.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 145ms (Views: 3.5ms | ActiveRecord: 61.9ms | Allocations: 84438)


Completed 200 OK in 171ms (Views: 0.7ms | ActiveRecord: 20.8ms | Allocations: 111849)


  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'example@sample.com' AND `users`.`id` != 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:115:in `create'
  [1m[36mActiveStorage::Blob Create (7.8ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('a541j2z52q00i7irbebuel1kqer4', 'default_image.jpg', 'image/png', '{\"identified\":true}', 'amazon_development', 134097, 'fV7+Yblf6bt6VNpJJs5WAQ==', '2023-10-05 12:29:47')[0m
  ↳ app/controllers/users_controller.rb:115:in `create'
  [1m[36mActiveStorage::Attachment Create (4.7ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image', 'User', 38, 84, '2023-10-05 12:29:47')[0m
  ↳ app/controllers/users_controller.rb:115:in `create'
  [1m[36mUser Update (4.2ms)[0m  [1m[33mUPDATE `users` SET `users`.`updated_at` = '2023-10-05 12:29:47.130380' WHERE `users`.`id` = 38[0m
  ↳ app/controllers/users_controller.rb:115:in `create'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:115:in `create'
[36m  S3 Storage (431.9ms) [0m[32mUploaded file to key: a541j2z52q00i7irbebuel1kqer4 (checksum: fV7+Yblf6bt6VNpJJs5WAQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9fd872a8-f9f1-4044-937b-c5fcd61521f7) to Async(default) with arguments: #<GlobalID:0x00007faaadd30f68 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/84>>
Completed 200 OK in 1094ms (Views: 0.3ms | ActiveRecord: 79.8ms | Allocations: 139693)


  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7] Performing ActiveStorage::AnalyzeJob (Job ID: 9fd872a8-f9f1-4044-937b-c5fcd61521f7) from Async(default) enqueued at 2023-10-05T12:29:47Z with arguments: #<GlobalID:0x00007faab09c3b98 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/84>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7] [36m  S3 Storage (208.4ms) [0m[34mDownloaded file from key: a541j2z52q00i7irbebuel1kqer4[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7]   [1m[36mActiveStorage::Blob Update (4.4ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 84[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9fd872a8-f9f1-4044-937b-c5fcd61521f7] Performed ActiveStorage::AnalyzeJob (Job ID: 9fd872a8-f9f1-4044-937b-c5fcd61521f7) from Async(default) in 227.74ms
Started GET "/notifications/check_unread_notifications?current_user_id=38" for ::1 at 2023-10-05 21:29:50 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"38"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 38 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 13ms (ActiveRecord: 3.6ms | Allocations: 3753)


Started GET "/users/38" for ::1 at 2023-10-05 21:29:50 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"38"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 38[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (5.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (3.2ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (0.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.6ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (7.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 132ms (Views: 0.4ms | ActiveRecord: 48.3ms | Allocations: 42293)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBXUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--d98a302b1863aa54f1006243f2d6e256a8743ed8/default_image.jpg" for ::1 at 2023-10-05 21:29:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBXUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--d98a302b1863aa54f1006243f2d6e256a8743ed8", "filename"=>"default_image"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
[36m  S3 Storage (3.1ms) [0m[34mGenerated URL for file at key: a541j2z52q00i7irbebuel1kqer4 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/a541j2z52q00i7irbebuel1kqer4?response-content-disposition=inline%3B%20filename%3D%22default_image.jpg%22%3B%20filename%2A%3DUTF-8%27%27default_image.jpg&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231005%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231005T122951Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=33064b9a4c2510f901e170081a0f91158a2838f52cc97e901763d9e2afa17bca)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/a541j2z52q00i7irbebuel1kqer4?response-content-disposition=inline%3B%20filename%3D%22default_image.jpg%22%3B%20filename%2A%3DUTF-8%27%27default_image.jpg&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20231005%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20231005T122951Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=33064b9a4c2510f901e170081a0f91158a2838f52cc97e901763d9e2afa17bca
Completed 302 Found in 7ms (ActiveRecord: 0.5ms | Allocations: 2541)


Started PATCH "/users/38" for ::1 at 2023-10-05 21:29:54 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"aaaa", "introduction"=>"null", "first_choice_school"=>"null", "second_choice_school"=>"null", "third_choice_school"=>"null"}, "id"=>"38"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'example@sample.com' AND `users`.`id` != 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
  [1m[36mUser Update (3.9ms)[0m  [1m[33mUPDATE `users` SET `users`.`first_choice_school` = 'null', `users`.`second_choice_school` = 'null', `users`.`third_choice_school` = 'null', `users`.`introduction` = 'null', `users`.`updated_at` = '2023-10-05 12:29:54.393774' WHERE `users`.`id` = 38[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 6.8ms | Allocations: 10088)


Started GET "/users/38" for ::1 at 2023-10-05 21:29:54 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"38"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 38[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (2.4ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 38[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 47ms (Views: 0.3ms | ActiveRecord: 10.1ms | Allocations: 13327)


Started PATCH "/users/38" for ::1 at 2023-10-05 21:30:00 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"", "introduction"=>"null", "first_choice_school"=>"null", "second_choice_school"=>"null", "third_choice_school"=>"null"}, "id"=>"38"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'example@sample.com' AND `users`.`id` != 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
Completed 422 Unprocessable Entity in 25ms (Views: 0.4ms | ActiveRecord: 3.1ms | Allocations: 7487)


Started PATCH "/users/38" for ::1 at 2023-10-05 21:30:06 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"", "introduction"=>"null", "first_choice_school"=>"null", "second_choice_school"=>"null", "third_choice_school"=>"null"}, "id"=>"38"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'example@sample.com' AND `users`.`id` != 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
Completed 422 Unprocessable Entity in 20ms (Views: 0.1ms | ActiveRecord: 3.7ms | Allocations: 7168)


Started PATCH "/users/38" for ::1 at 2023-10-05 21:30:16 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"", "introduction"=>"null", "first_choice_school"=>"null", "second_choice_school"=>"null", "third_choice_school"=>"null"}, "id"=>"38"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = 'example@sample.com' AND `users`.`id` != 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:131:in `update'
Completed 422 Unprocessable Entity in 47ms (Views: 0.7ms | ActiveRecord: 3.0ms | Allocations: 7165)


Started DELETE "/users/38" for ::1 at 2023-10-05 21:30:20 +0900
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"38"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 38 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:140:in `destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mSurvey Load (0.5ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mSurveyAnswer Load (0.4ms)[0m  [1m[34mSELECT `survey_answers`.* FROM `survey_answers` WHERE `survey_answers`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteBook Load (0.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteReview Load (0.3ms)[0m  [1m[34mSELECT `favorite_reviews`.* FROM `favorite_reviews` WHERE `favorite_reviews`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteQuestion Load (0.5ms)[0m  [1m[34mSELECT `favorite_questions`.* FROM `favorite_questions` WHERE `favorite_questions`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteReply Load (0.4ms)[0m  [1m[34mSELECT `favorite_replies`.* FROM `favorite_replies` WHERE `favorite_replies`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `favorite_subject_questions`.* FROM `favorite_subject_questions` WHERE `favorite_subject_questions`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteSubjectQuestionReply Load (0.4ms)[0m  [1m[34mSELECT `favorite_subject_question_replies`.* FROM `favorite_subject_question_replies` WHERE `favorite_subject_question_replies`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mFavoriteSurvey Load (0.4ms)[0m  [1m[34mSELECT `favorite_surveys`.* FROM `favorite_surveys` WHERE `favorite_surveys`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mBrowsingHistory Load (2.1ms)[0m  [1m[34mSELECT `browsing_histories`.* FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mNotification Load (1.8ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`action_user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mNotification Load (0.5ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mActiveStorage::Attachment Destroy (2.7ms)[0m  [1m[31mDELETE FROM `active_storage_attachments` WHERE `active_storage_attachments`.`id` = 84[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM `users` WHERE `users`.`id` = 38[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:145:in `destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: cc10207d-717d-4c91-9620-18fd878baeed) to Async(default) with arguments: #<GlobalID:0x00007faaaa2dfc38 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/84>>
Completed 204 No Content in 98ms (ActiveRecord: 20.8ms | Allocations: 33276)


  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84 LIMIT 1[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed] Performing ActiveStorage::PurgeJob (Job ID: cc10207d-717d-4c91-9620-18fd878baeed) from Async(default) enqueued at 2023-10-05T12:30:20Z with arguments: #<GlobalID:0x00007faaaa2d4428 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/84>>
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed]   [1m[36mActiveStorage::Attachment Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM `active_storage_attachments` WHERE `active_storage_attachments`.`blob_id` = 84 LIMIT 1[0m
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:30:20 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.6ms | Allocations: 1227)


Started GET "/pages/new_reviews" for ::1 at 2023-10-05 21:30:20 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-05 21:30:20 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed]   [1m[36mActiveStorage::VariantRecord Load (13.3ms)[0m  [1m[34mSELECT `active_storage_variant_records`.* FROM `active_storage_variant_records` WHERE `active_storage_variant_records`.`blob_id` = 84[0m
  [1m[36mReview Load (2.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-10-05 21:30:20 +0900
  [1m[36mBook Load (3.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed]   [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 84 AND `active_storage_attachments`.`record_type` = 'ActiveStorage::Blob' AND `active_storage_attachments`.`name` = 'preview_image' LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Processing by PagesController#get_same_university_books as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"0"}
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed]   [1m[36mActiveStorage::Blob Destroy (10.6ms)[0m  [1m[31mDELETE FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 84[0m
  [1m[36mReview Load (5.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mBook Load (2.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed]   [1m[36mTRANSACTION (10.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFavoriteBook Load (3.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 17594)


  [1m[36mActiveStorage::Attachment Load (3.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (5.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 125ms (Views: 2.6ms | ActiveRecord: 15.0ms | Allocations: 83788)


  [1m[36mActiveStorage::Blob Load (34.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 162ms (Views: 0.8ms | ActiveRecord: 49.8ms | Allocations: 112453)


[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed] [36m  S3 Storage (222.9ms) [0m[31mDeleted file from key: a541j2z52q00i7irbebuel1kqer4[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed] [36m  S3 Storage (44.0ms) [0m[31mDeleted files by key prefix: variants/a541j2z52q00i7irbebuel1kqer4/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cc10207d-717d-4c91-9620-18fd878baeed] Performed ActiveStorage::PurgeJob (Job ID: cc10207d-717d-4c91-9620-18fd878baeed) from Async(default) in 350.89ms
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-05 21:30:21 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-05 21:30:21 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:30:21 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.5ms | Allocations: 1639)


  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.8ms | Allocations: 2911)


Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.0ms | Allocations: 3661)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-10-05 21:30:34 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.3ms | Allocations: 686)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-05 21:30:36 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 6.9ms | Allocations: 4544)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-05 21:30:36 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 2.1ms | Allocations: 4413)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-05 21:30:36 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:30:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.4ms | Allocations: 1710)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mNotification Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 31ms (ActiveRecord: 6.8ms | Allocations: 22232)


Started GET "/users/1" for ::1 at 2023-10-05 21:30:36 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (2.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (4.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.1ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (2.5ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (2.1ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 536ms (Views: 23.9ms | ActiveRecord: 26.4ms | Allocations: 445578)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-05 21:30:37 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PATCH "/users/1" for ::1 at 2023-10-05 21:30:40 +0900
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"sampleeeee", "introduction"=>"よろしくお願いします!!!!!", "first_choice_school"=>"AA大学", "second_choice_school"=>"BB大学", "third_choice_school"=>"明治大学"}, "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:126:in `update'
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 595)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:20 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (28.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 187ms (ActiveRecord: 47.5ms | Allocations: 1202)


Started GET "/pages/popular_books" for ::1 at 2023-10-06 06:01:20 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-06 06:01:20 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 06:01:20 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (14.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (31.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (16.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mReview Load (13.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (1.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (24.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (13.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (31.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (17.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mReview Load (17.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (8.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 200 OK in 323ms (Views: 3.2ms | ActiveRecord: 55.2ms | Allocations: 77215)


  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (42.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 461ms (Views: 3.0ms | ActiveRecord: 79.4ms | Allocations: 142481)


  [1m[36mBook Load (55.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 485ms (Views: 1.0ms | ActiveRecord: 195.1ms | Allocations: 151978)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:21 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:24 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1062)


Started GET "/users/1" for ::1 at 2023-10-06 06:01:24 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (2.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (4.5ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (3.0ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.9ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (5.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (2.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (3.5ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 751ms (Views: 23.3ms | ActiveRecord: 40.0ms | Allocations: 429655)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:34 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1065)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-06 06:01:34 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (3.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 152ms (Views: 10.4ms | ActiveRecord: 5.7ms | Allocations: 122609)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:01:34 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1186)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-06 06:01:39 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 1.4ms | Allocations: 4452)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.2ms | Allocations: 1072)


Started GET "/books?current_user_id=1" for ::1 at 2023-10-06 06:01:39 +0900
Processing by BooksController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (6.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books`[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 47, 48, 49, 50, 51, 52, 54, 57, 59, 60)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (26, 27, 30, 32, 33, 34, 35, 36, 37, 38, 45, 46, 47, 48, 49, 50, 51, 54, 55, 64, 66, 73, 79, 81, 82)[0m
  ↳ app/controllers/books_controller.rb:11:in `index'
Completed 200 OK in 152ms (Views: 5.1ms | ActiveRecord: 8.4ms | Allocations: 122067)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:01:40 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:40 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.2ms | Allocations: 1307)


  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.3ms | Allocations: 2622)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:42 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1065)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 06:01:42 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (1.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 5ms (ActiveRecord: 1.9ms | Allocations: 707)


Started GET "/books/1/reviews" for ::1 at 2023-10-06 06:01:42 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-06 06:01:42 +0900
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
Processing by QuestionsController#index as HTML
  [1m[36mBook Load (8.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"book_id"=>"1"}
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 06:01:42 +0900
  ↳ app/controllers/reviews_controller.rb:7:in `index'
Processing by BooksController#show as HTML
  [1m[36mBook Load (3.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mReview Load (3.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mQuestion Load (2.4ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (2.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (5.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Load (2.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (3.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Blob Load (5.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (3.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (14.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 99ms (Views: 0.6ms | ActiveRecord: 11.3ms | Allocations: 43651)


  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 255ms (Views: 5.2ms | ActiveRecord: 26.1ms | Allocations: 173132)


Completed 200 OK in 517ms (Views: 12.7ms | ActiveRecord: 37.3ms | Allocations: 342082)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-06 06:01:43 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (2.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (1.7ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 6.0ms | Allocations: 1765)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:01:43 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1169)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:45 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:46 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 1.0ms | Allocations: 1069)


Started GET "/reviews/check_existence?book_id=1&id=4" for ::1 at 2023-10-06 06:01:46 +0900
Processing by ReviewsController#check_existence as HTML
  Parameters: {"book_id"=>"1", "id"=>"4"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:116:in `check_existence'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:119:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 1.0ms | Allocations: 1183)


Started GET "/books/1/reviews" for ::1 at 2023-10-06 06:01:46 +0900
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
Started GET "/books/1/reviews/4?current_user_id=1" for ::1 at 2023-10-06 06:01:46 +0900
  [1m[36mBook Load (1.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
Processing by ReviewsController#show as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1", "id"=>"4"}
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:20:in `show'
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (7.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mActiveStorage::Attachment Load (2.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 207ms (Views: 6.3ms | ActiveRecord: 10.3ms | Allocations: 192637)


  [1m[36mActiveStorage::Blob Load (158.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mReview Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `reviews` INNER JOIN `browsing_histories` ON `reviews`.`id` = `browsing_histories`.`review_id` WHERE `browsing_histories`.`user_id` = 1 AND `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:133:in `exist_review_browsing_history?'
Completed 200 OK in 216ms (Views: 1.2ms | ActiveRecord: 172.5ms | Allocations: 196755)


Started GET "/reviews/is_favorite?current_user_id=1&review_id=4" for ::1 at 2023-10-06 06:01:47 +0900
Processing by ReviewsController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "review_id"=>"4"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:100:in `is_favorite'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:103:in `is_favorite'
  [1m[36mFavoriteReview Load (1.5ms)[0m  [1m[34mSELECT `favorite_reviews`.* FROM `favorite_reviews` WHERE `favorite_reviews`.`user_id` = 1 AND `favorite_reviews`.`review_id` = 4 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:106:in `is_favorite'
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 1683)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:01:53 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1062)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 06:01:53 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 556)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 06:01:53 +0900
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Started GET "/books/1/reviews" for ::1 at 2023-10-06 06:01:53 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-06 06:01:53 +0900
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
Processing by ReviewsController#index as HTML
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mQuestion Load (6.5ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mReview Load (2.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (4.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mBook Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 56ms (Views: 0.3ms | ActiveRecord: 6.6ms | Allocations: 23844)


  [1m[36mBook Load (2.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (2.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (5.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (5.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 229ms (Views: 6.2ms | ActiveRecord: 21.0ms | Allocations: 207651)


  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 375ms (Views: 5.4ms | ActiveRecord: 24.0ms | Allocations: 338540)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-06 06:01:54 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1576)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:01:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:01:56 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:03:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.4ms | Allocations: 1065)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:03:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 06:03:39 +0900
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.7ms | Allocations: 1699)


  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1205)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 06:03:39 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 3ms (ActiveRecord: 0.4ms | Allocations: 687)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 06:03:39 +0900
Processing by BooksController#show as HTML
Started GET "/books/1/reviews" for ::1 at 2023-10-06 06:03:39 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-06 06:03:39 +0900
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mBook Load (2.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mReview Load (3.2ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mQuestion Load (1.7ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Load (3.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (6.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (6.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (3.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (2.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (2.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
Completed 200 OK in 53ms (Views: 0.4ms | ActiveRecord: 11.3ms | Allocations: 31843)


  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (6.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 06:03:39 +0900
  [1m[36mActiveStorage::Attachment Load (2.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 312ms (Views: 7.4ms | ActiveRecord: 27.5ms | Allocations: 208111)


  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Processing by BooksController#show as HTML
Completed 200 OK in 445ms (Views: 4.9ms | ActiveRecord: 20.9ms | Allocations: 339618)


  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Started GET "/books/1/reviews" for ::1 at 2023-10-06 06:03:40 +0900
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
Started GET "/books/1/questions" for ::1 at 2023-10-06 06:03:40 +0900
  [1m[36mBook Load (2.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
Processing by QuestionsController#index as HTML
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  Parameters: {"book_id"=>"1"}
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  [1m[36mQuestion Load (2.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mBook Load (4.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 42ms (Views: 0.3ms | ActiveRecord: 7.6ms | Allocations: 25363)


  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 372ms (Views: 7.9ms | ActiveRecord: 10.5ms | Allocations: 170313)


Completed 200 OK in 586ms (Views: 7.2ms | ActiveRecord: 13.6ms | Allocations: 337098)


Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-06 06:03:44 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.9ms | Allocations: 1576)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:03:44 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:03:54 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1063)


Started GET "/pages/popular_books" for ::1 at 2023-10-06 06:03:54 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/new_reviews" for ::1 at 2023-10-06 06:03:54 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 06:03:54 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mBook Load (5.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (5.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mFavoriteBook Load (4.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (2.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (12.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mActiveStorage::Attachment Load (6.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (5.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (28.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
Completed 200 OK in 119ms (Views: 0.7ms | ActiveRecord: 26.8ms | Allocations: 89487)


  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 156ms (Views: 2.0ms | ActiveRecord: 35.5ms | Allocations: 116913)


  [1m[36mReview Load (35.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 195ms (Views: 1.0ms | ActiveRecord: 59.0ms | Allocations: 144638)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:03:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.6ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-06 06:03:55 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-06 06:03:55 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms | Allocations: 1304)


  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.2ms | Allocations: 2773)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:04:42 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.8ms | Allocations: 1120)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-06 06:23:40 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 4558)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:23:40 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 2.4ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-10-06 06:23:40 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-06 06:23:40 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 06:23:40 +0900
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (6.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (6.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (4.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (8.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (4.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (3.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
Completed 200 OK in 103ms (Views: 2.5ms | ActiveRecord: 12.4ms | Allocations: 69016)


  [1m[36mActiveStorage::Attachment Load (9.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (4.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
Completed 200 OK in 228ms (Views: 1.4ms | ActiveRecord: 31.3ms | Allocations: 116981)


  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 274ms (Views: 1.3ms | ActiveRecord: 25.5ms | Allocations: 148433)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:25:45 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.1ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-06 06:34:46 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 25ms (Views: 0.4ms | ActiveRecord: 6.6ms | Allocations: 4523)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:34:46 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 8ms (ActiveRecord: 2.7ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-10-06 06:34:46 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-06 06:34:46 +0900
  [1m[36mReview Load (2.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 06:34:46 +0900
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#get_same_university_books as HTML
  [1m[36mBook Load (2.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  [1m[36mBook Load (10.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (9.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (14.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mFavoriteBook Load (1.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (3.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (46.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (14.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (7.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
Completed 200 OK in 334ms (Views: 4.1ms | ActiveRecord: 33.6ms | Allocations: 82875)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (94.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
Completed 200 OK in 412ms (Views: 1.8ms | ActiveRecord: 23.7ms | Allocations: 111026)


  [1m[36mActiveStorage::Blob Load (75.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mBook Load (2.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 480ms (Views: 2.0ms | ActiveRecord: 240.6ms | Allocations: 139658)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:34:47 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.7ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:34:48 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:34:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-06 06:34:50 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-06 06:34:50 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (6.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 53ms (ActiveRecord: 6.6ms | Allocations: 22763)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 06:34:52 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:34:52 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1309)


Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.3ms | Allocations: 2145)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-06 06:34:52 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-06 06:35:29 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 4419)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:35:29 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 2.9ms | Allocations: 1063)


Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 06:35:29 +0900
Started GET "/pages/popular_books" for ::1 at 2023-10-06 06:35:29 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
Started GET "/pages/new_reviews" for ::1 at 2023-10-06 06:35:29 +0900
Processing by PagesController#popular_books as HTML
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (2.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (3.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (9.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (4.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (2.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (9.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (20.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (17.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 140ms (Views: 2.5ms | ActiveRecord: 25.1ms | Allocations: 114214)


Completed 200 OK in 175ms (Views: 0.7ms | ActiveRecord: 28.5ms | Allocations: 141243)


  [1m[36mBook Load (66.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 194ms (Views: 0.9ms | ActiveRecord: 106.6ms | Allocations: 152460)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:35:30 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.7ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:35:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-06 06:35:32 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-06 06:35:32 +0900
  [1m[36mActiveStorage::Blob Load (3.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 2.2ms | Allocations: 2332)


Completed 500 Internal Server Error in 18ms (ActiveRecord: 3.5ms | Allocations: 3286)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:35:32 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 06:35:32 +0900
  [1m[36mActiveStorage::Blob Load (2.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.1ms | Allocations: 1172)


Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (5.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 11ms (ActiveRecord: 5.8ms | Allocations: 2165)


Completed 500 Internal Server Error in 124ms (ActiveRecord: 0.7ms | Allocations: 20204)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:46:04 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.0ms | Allocations: 1229)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 06:46:07 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 3.2ms | Allocations: 1065)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 06:46:07 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 556)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 06:46:07 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-06 06:46:07 +0900
Started GET "/books/1/reviews" for ::1 at 2023-10-06 06:46:07 +0900
Processing by QuestionsController#index as HTML
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  Parameters: {"book_id"=>"1"}
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mQuestion Load (3.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (12.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mBook Load (1.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (2.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (6.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mActiveStorage::Attachment Load (3.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (8.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
Completed 200 OK in 68ms (Views: 0.4ms | ActiveRecord: 31.8ms | Allocations: 40957)


  [1m[36mActiveStorage::Blob Load (3.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 218ms (Views: 5.9ms | ActiveRecord: 17.7ms | Allocations: 170687)


  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 443ms (Views: 6.9ms | ActiveRecord: 22.9ms | Allocations: 339484)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:46:07 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1122)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-06 06:46:08 +0900
Processing by BooksController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mBook Load (2.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  [1m[36mFavoriteBook Load (0.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 1576)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 06:46:08 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 06:46:10 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PATCH "/books/1" for ::1 at 2023-10-06 06:46:14 +0900
Processing by BooksController#update as HTML
  Parameters: {"current_user_id"=>"1", "book"=>{"name"=>"サンプル", "author"=>"俺", "publisher"=>"日本", "subject"=>"英単語", "description"=>"＜本書の特長＞\r\n１．大学入試で頻出の重要な問題123題を厳選しました。さらに実力を定着させるための演習問題を42題掲載しました。\r\n２．人気実力講師が考え方・解き方を丁寧に解説。確実に解く力が身につきます。\r\n３．「精講→解説」のわかりやすい２段階解説。重要ポイントをおさえながら，効率よく学習できます。\r\n\r\n＜改訂ポイント＞\r\n今回の改訂では，出題頻度の高い重要な問題だけでなく，現在の入試傾向に合わせた問題を50題以上追加し差し替えました。解説もよりわかりやすくブラッシュアップしています。また，共通テストに必要な思考力も養えます。\r\n\r\n【編集担当者の声】\r\n新たな問題が50題も加わり，ますます学びやすく，わかりやすくなりました。大学入試で押さえておくべき重要な問題を網羅する問題選定の良さは折り紙付きです。大学受験の必携書として，自信をもってお勧めできる1冊です！"}, "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:61:in `update'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:64:in `update'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:67:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mBook Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `books` WHERE `books`.`name` = 'サンプル' AND `books`.`id` != 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 8.4ms | Allocations: 10934)


Started PATCH "/books/1" for ::1 at 2023-10-06 06:46:54 +0900
Processing by BooksController#update as HTML
  Parameters: {"current_user_id"=>"1", "book"=>{"name"=>"サンプル", "author"=>"俺", "publisher"=>"日本", "subject"=>"英単語", "description"=>"＜本書の特長＞\r\n１．大学入試で頻出の重要な問題123題を厳選しました。さらに実力を定着させるための演習問題を42題掲載しました。\r\n２．人気実力講師が考え方・解き方を丁寧に解説。確実に解く力が身につきます。\r\n３．「精講→解説」のわかりやすい２段階解説。重要ポイントをおさえながら，効率よく学習できます。\r\n\r\n＜改訂ポイント＞\r\n今回の改訂では，出題頻度の高い重要な問題だけでなく，現在の入試傾向に合わせた問題を50題以上追加し差し替えました。解説もよりわかりやすくブラッシュアップしています。また，共通テストに必要な思考力も養えます。\r\n\r\n【編集担当者の声】\r\n新たな問題が50題も加わり，ますます学びやすく，わかりやすくなりました。大学入試で押さえておくべき重要な問題を網羅する問題選定の良さは折り紙付きです。大学受験の必携書として，自信をもってお勧めできる1冊です！"}, "id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:61:in `update'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:64:in `update'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:67:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mBook Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `books` WHERE `books`.`name` = 'サンプル' AND `books`.`id` != 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
Completed 200 OK in 34ms (Views: 0.8ms | ActiveRecord: 4.0ms | Allocations: 10205)


Started PATCH "/books/1" for ::1 at 2023-10-06 06:46:58 +0900
Processing by BooksController#update as HTML
  Parameters: {"current_user_id"=>"1", "book"=>{"name"=>"サンプル", "author"=>"俺", "publisher"=>"日本", "subject"=>"英単語", "description"=>"＜本書の特長＞\r\n１．大学入試で頻出の重要な問題123題を厳選しました。さらに実力を定着させるための演習問題を42題掲載しました。\r\n２．人気実力講師が考え方・解き方を丁寧に解説。確実に解く力が身につきます。\r\n３．「精講→解説」のわかりやすい２段階解説。重要ポイントをおさえながら，効率よく学習できます。\r\n\r\n＜改訂ポイント＞\r\n今回の改訂では，出題頻度の高い重要な問題だけでなく，現在の入試傾向に合わせた問題を50題以上追加し差し替えました。解説もよりわかりやすくブラッシュアップしています。また，共通テストに必要な思考力も養えます。\r\n\r\n【編集担当者の声】\r\n新たな問題が50題も加わり，ますます学びやすく，わかりやすくなりました。大学入試で押さえておくべき重要な問題を網羅する問題選定の良さは折り紙付きです。大学受験の必携書として，自信をもってお勧めできる1冊です！"}, "id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:61:in `update'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:64:in `update'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:67:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  ↳ app/models/concerns/custom_validation.rb:10:in `image_size_validation'
  [1m[36mBook Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `books` WHERE `books`.`name` = 'サンプル' AND `books`.`id` != 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:70:in `update'
Completed 200 OK in 25ms (Views: 0.4ms | ActiveRecord: 3.0ms | Allocations: 10205)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:06:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 26ms (ActiveRecord: 7.2ms | Allocations: 1171)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:06:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 10:06:14 +0900
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Processing by BooksController#check_existence as HTML
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  Parameters: {"id"=>"1"}
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 11ms (ActiveRecord: 2.3ms | Allocations: 1711)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:06:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mBook Load (3.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"current_user_id"=>"1"}
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 10ms (ActiveRecord: 4.6ms | Allocations: 2098)


  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 9ms (ActiveRecord: 2.6ms | Allocations: 1873)


Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 10:06:14 +0900
Processing by BooksController#check_existence as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 4ms (ActiveRecord: 0.7ms | Allocations: 554)


Started GET "/books/1/reviews" for ::1 at 2023-10-06 10:06:14 +0900
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
Started GET "/books/check_existence?id=1" for ::1 at 2023-10-06 10:06:14 +0900
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
Processing by BooksController#check_existence as HTML
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 10:06:14 +0900
Started GET "/books/1/questions" for ::1 at 2023-10-06 10:06:14 +0900
  Parameters: {"id"=>"1"}
  [1m[36mReview Load (3.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
Processing by BooksController#show as HTML
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  [1m[36mBook Load (6.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:139:in `check_existence'
Completed 200 OK in 25ms (ActiveRecord: 6.0ms | Allocations: 8194)


  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mActiveStorage::Blob Load (2.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (5.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mBook Load (6.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mQuestion Load (2.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (3.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (8.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  [1m[36mBook Load (3.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (2.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (10.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (4.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Blob Load (204.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 390ms (Views: 10.8ms | ActiveRecord: 28.7ms | Allocations: 200307)


  [1m[36mActiveStorage::Blob Load (6.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
Started GET "/books/1/reviews" for ::1 at 2023-10-06 10:06:14 +0900
  [1m[36mBook Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
Completed 200 OK in 399ms (Views: 0.3ms | ActiveRecord: 33.5ms | Allocations: 208910)


Processing by ReviewsController#index as HTML
  ↳ app/controllers/questions_controller.rb:14:in `index'
  Parameters: {"book_id"=>"1"}
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (2.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
Completed 200 OK in 610ms (Views: 9.4ms | ActiveRecord: 228.9ms | Allocations: 335106)


Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 10:06:15 +0900
  [1m[36mReview Load (4.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Processing by BooksController#show as HTML
  Parameters: {"current_user_id"=>"1", "id"=>"1"}
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Started GET "/books/1/questions" for ::1 at 2023-10-06 10:06:15 +0900
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
  [1m[36mActiveStorage::Attachment Load (4.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (8.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mBook Load (9.8ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (8.2ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  [1m[36mActiveStorage::Attachment Load (3.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mBook Load (4.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (6.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (4.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (3.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (212.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
Completed 200 OK in 899ms (Views: 15.0ms | ActiveRecord: 26.2ms | Allocations: 328517)


  [1m[36mActiveStorage::Blob Load (8.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  ↳ app/controllers/questions_controller.rb:14:in `index'
Started GET "/books/is_favorite?current_user_id=1&book_id=1" for ::1 at 2023-10-06 10:06:15 +0900
Processing by BooksController#is_favorite as HTML
  [1m[36mBook Exists? (13.7ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"current_user_id"=>"1", "book_id"=>"1"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Started GET "/books/1/reviews" for ::1 at 2023-10-06 10:06:15 +0900
Completed 200 OK in 713ms (Views: 0.8ms | ActiveRecord: 250.0ms | Allocations: 203773)


  ↳ app/controllers/books_controller.rb:96:in `is_favorite'
  [1m[36mActiveStorage::Attachment Load (3.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Processing by ReviewsController#index as HTML
  [1m[36mBook Load (4.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  Parameters: {"book_id"=>"1"}
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/books_controller.rb:99:in `is_favorite'
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:7:in `index'
Started GET "/books/1?current_user_id=1" for ::1 at 2023-10-06 10:06:16 +0900
  [1m[36mFavoriteBook Load (206.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`user_id` = 1 AND `favorite_books`.`book_id` = 1 LIMIT 1[0m
  [1m[36mReview Load (32.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
Completed 200 OK in 964ms (Views: 5.7ms | ActiveRecord: 42.5ms | Allocations: 335375)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:06:16 +0900
Processing by BooksController#show as HTML
  ↳ app/controllers/books_controller.rb:102:in `is_favorite'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 319ms (Views: 0.2ms | ActiveRecord: 212.4ms | Allocations: 137951)


  Parameters: {"current_user_id"=>"1", "id"=>"1"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mBook Load (3.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Started GET "/books/1/questions" for ::1 at 2023-10-06 10:06:16 +0900
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:18:in `show'
Processing by QuestionsController#index as HTML
  Parameters: {"book_id"=>"1"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1354)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mBook Load (3.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mBook Load (28.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/questions_controller.rb:8:in `index'
  [1m[36mActiveStorage::Attachment Load (7.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mQuestion Load (7.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`book_id` = 1[0m
  [1m[36mActiveStorage::Blob Load (5.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  [1m[36mBook Load (2.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/books_controller.rb:22:in `show'
  [1m[36mActiveStorage::Attachment Load (7.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Attachment Load (5.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (2.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mBook Exists? (9.7ms)[0m  [1m[34mSELECT 1 AS one FROM `books` INNER JOIN `browsing_histories` ON `books`.`id` = `browsing_histories`.`book_id` WHERE `browsing_histories`.`user_id` = 1 AND `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:162:in `exist_book_browsing_history?'
Completed 200 OK in 103ms (Views: 0.3ms | ActiveRecord: 20.0ms | Allocations: 53982)


  [1m[36mActiveStorage::Blob Load (4.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 613ms (Views: 8.0ms | ActiveRecord: 67.7ms | Allocations: 361270)


  [1m[36mActiveStorage::Attachment Load (202.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/questions_controller.rb:14:in `index'
Completed 200 OK in 507ms (Views: 6.3ms | ActiveRecord: 253.7ms | Allocations: 350528)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:14:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 11ms (ActiveRecord: 3.9ms | Allocations: 1173)


Started GET "/subject_questions" for ::1 at 2023-10-06 10:14:39 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (3.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 197ms (Views: 6.9ms | ActiveRecord: 5.3ms | Allocations: 91980)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:14:41 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1188)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:14:41 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-06 10:18:23 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 4445)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:18:24 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 20ms (ActiveRecord: 3.1ms | Allocations: 1073)


Started GET "/subject_questions" for ::1 at 2023-10-06 10:18:24 +0900
Processing by SubjectQuestionsController#index as HTML
  [1m[36mSubjectQuestion Load (1.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions`[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 4, 7, 14)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/subject_questions_controller.rb:10:in `index'
Completed 200 OK in 151ms (Views: 4.8ms | ActiveRecord: 2.7ms | Allocations: 91562)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:18:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:18:26 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1062)


Started GET "/pages/popular_books" for ::1 at 2023-10-06 10:18:26 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 10:18:26 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-06 10:18:26 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (7.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Processing by PagesController#new_reviews as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (2.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (2.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mFavoriteBook Load (4.9ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (16.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Attachment Load (4.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (5.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  [1m[36mActiveStorage::Blob Load (6.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Completed 200 OK in 107ms (Views: 0.8ms | ActiveRecord: 25.2ms | Allocations: 75977)


  [1m[36mReview Load (33.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (2.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (24.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
Completed 200 OK in 172ms (Views: 1.9ms | ActiveRecord: 38.0ms | Allocations: 140301)


  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 220ms (Views: 1.5ms | ActiveRecord: 64.0ms | Allocations: 152295)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:18:27 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.9ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:18:35 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1064)


Started GET "/favorites?user_id=1" for ::1 at 2023-10-06 10:18:35 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (3.9ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (3.3ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (2.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (3.2ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (3.1ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (1.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 539ms (Views: 16.0ms | ActiveRecord: 37.9ms | Allocations: 400308)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:18:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1169)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 10:18:36 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:18:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.4ms | Allocations: 1836)


  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.2ms | Allocations: 2605)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:07 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 9ms (ActiveRecord: 1.8ms | Allocations: 1078)


Started GET "/favorites?user_id=1" for ::1 at 2023-10-06 10:19:07 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (4.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (2.1ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (1.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (1.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (1.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 571ms (Views: 19.2ms | ActiveRecord: 31.9ms | Allocations: 399334)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 10:19:08 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:08 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.8ms | Allocations: 1833)


  [1m[36mActiveStorage::Blob Load (1.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.3ms | Allocations: 2625)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-10-06 10:19:14 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:174:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:177:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:178:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 4430)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms | Allocations: 1063)


Started GET "/favorites?user_id=1" for ::1 at 2023-10-06 10:19:14 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (0.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 479ms (Views: 17.6ms | ActiveRecord: 20.6ms | Allocations: 399334)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:15 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 10:19:15 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:15 +0900
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1623)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.7ms | Allocations: 1325)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (3.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 54ms (ActiveRecord: 3.2ms | Allocations: 21527)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:17 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/pages/popular_books" for ::1 at 2023-10-06 10:19:17 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-10-06 10:19:17 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 10:19:17 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (1.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (6.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (13.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mReview Load (6.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mBook Load (1.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mFavoriteBook Load (8.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (4.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mActiveStorage::Blob Load (14.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (2.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (2.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (24.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mBook Load (30.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 178ms (Views: 3.1ms | ActiveRecord: 14.2ms | Allocations: 141117)


Completed 200 OK in 153ms (Views: 0.8ms | ActiveRecord: 47.6ms | Allocations: 117025)


  [1m[36mActiveStorage::Attachment Load (4.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 194ms (Views: 1.4ms | ActiveRecord: 68.2ms | Allocations: 151602)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:18 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:19 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1062)


Started GET "/favorites?user_id=1" for ::1 at 2023-10-06 10:19:19 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (2.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (2.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (2.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (1.4ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (2.1ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (1.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 559ms (Views: 16.2ms | ActiveRecord: 30.1ms | Allocations: 399338)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:20 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 10:19:20 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:20 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1305)


  [1m[36mActiveStorage::Blob Load (2.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.2ms | Allocations: 2627)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:21 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:22 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1063)


Started GET "/users/1" for ::1 at 2023-10-06 10:19:22 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (0.8ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.0ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 584ms (Views: 29.1ms | ActiveRecord: 19.7ms | Allocations: 429673)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.6ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:24 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.7ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1121)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:26 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/reviews/check_existence?book_id=1&id=8" for ::1 at 2023-10-06 10:19:26 +0900
Processing by ReviewsController#check_existence as HTML
  Parameters: {"book_id"=>"1", "id"=>"8"}
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:116:in `check_existence'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` = 8 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:119:in `check_existence'
Completed 200 OK in 3ms (ActiveRecord: 0.6ms | Allocations: 1046)


Started GET "/books/1/reviews/8?current_user_id=1" for ::1 at 2023-10-06 10:19:26 +0900
Processing by ReviewsController#show as HTML
  Parameters: {"current_user_id"=>"1", "book_id"=>"1", "id"=>"8"}
Started GET "/books/1/reviews" for ::1 at 2023-10-06 10:19:26 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Processing by ReviewsController#index as HTML
  Parameters: {"book_id"=>"1"}
  ↳ app/controllers/reviews_controller.rb:20:in `show'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  ↳ app/controllers/reviews_controller.rb:7:in `index'
  [1m[36mActiveStorage::Attachment Load (1.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`book_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:24:in `show'
  [1m[36mReview Load (7.9ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`id` = 8 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mBook Load (2.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mActiveStorage::Blob Load (5.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/reviews_controller.rb:30:in `show'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 7)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[36mReview Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `reviews` INNER JOIN `browsing_histories` ON `reviews`.`id` = `browsing_histories`.`review_id` WHERE `browsing_histories`.`user_id` = 1 AND `reviews`.`id` = 8 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:133:in `exist_review_browsing_history?'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7, 14)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`review_id` IS NOT NULL[0m
  ↳ app/controllers/reviews_controller.rb:139:in `save_review_browsing_history'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (43, 71, 44)[0m
  ↳ app/controllers/reviews_controller.rb:13:in `index'
Completed 200 OK in 227ms (Views: 6.8ms | ActiveRecord: 9.9ms | Allocations: 195834)


  [1m[36mBrowsingHistory Load (0.8ms)[0m  [1m[34mSELECT `browsing_histories`.* FROM `browsing_histories` WHERE `browsing_histories`.`user_id` = 1 AND `browsing_histories`.`review_id` IS NOT NULL ORDER BY `browsing_histories`.`id` ASC LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:140:in `save_review_browsing_history'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/reviews_controller.rb:140:in `save_review_browsing_history'
  [1m[36mBrowsingHistory Destroy (3.9ms)[0m  [1m[31mDELETE FROM `browsing_histories` WHERE `browsing_histories`.`id` = 835[0m
  ↳ app/controllers/reviews_controller.rb:140:in `save_review_browsing_history'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/reviews_controller.rb:140:in `save_review_browsing_history'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/reviews_controller.rb:141:in `save_review_browsing_history'
  [1m[36mBrowsingHistory Create (1.3ms)[0m  [1m[32mINSERT INTO `browsing_histories` (`user_id`, `review_id`, `created_at`, `updated_at`) VALUES (1, 8, '2023-10-06 01:19:26.822172', '2023-10-06 01:19:26.822172')[0m
  ↳ app/controllers/reviews_controller.rb:141:in `save_review_browsing_history'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/reviews_controller.rb:141:in `save_review_browsing_history'
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 205.7ms | Allocations: 207025)


Started GET "/reviews/is_favorite?current_user_id=1&review_id=8" for ::1 at 2023-10-06 10:19:27 +0900
Processing by ReviewsController#is_favorite as HTML
  Parameters: {"current_user_id"=>"1", "review_id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:100:in `is_favorite'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` = 8 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:103:in `is_favorite'
  [1m[36mFavoriteReview Load (0.5ms)[0m  [1m[34mSELECT `favorite_reviews`.* FROM `favorite_reviews` WHERE `favorite_reviews`.`user_id` = 1 AND `favorite_reviews`.`review_id` = 8 LIMIT 1[0m
  ↳ app/controllers/reviews_controller.rb:106:in `is_favorite'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1512)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:27 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:30 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms | Allocations: 1122)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-10-06 10:19:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-10-06 10:19:33 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-10-06 10:19:33 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-10-06 10:19:33 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (1.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (3.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  [1m[36mBook Load (2.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mReview Load (9.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:65:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (5.8ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (3.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:65:in `map'
  [1m[36mActiveStorage::Attachment Load (17.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (24.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 141ms (Views: 1.9ms | ActiveRecord: 33.4ms | Allocations: 112935)


  [1m[36mBook Load (2.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (26.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 172ms (Views: 0.7ms | ActiveRecord: 62.7ms | Allocations: 141067)


  [1m[36mBook Load (31.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:99:in `map'
Completed 200 OK in 192ms (Views: 0.8ms | ActiveRecord: 47.6ms | Allocations: 152052)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:34 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.9ms | Allocations: 1118)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-10-06 10:19:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms | Allocations: 1117)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-10-06 10:19:36 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-10-06 10:19:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.6ms | Allocations: 1918)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveStorage::Blob Load (1.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
Completed 500 Internal Server Error in 33ms (ActiveRecord: 1.4ms | Allocations: 20514)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-10-06 10:19:36 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-10-06 10:19:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.7ms | Allocations: 1323)


  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.4ms | Allocations: 2625)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-10-06 10:19:36 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms | Allocations: 1122)


  
KeyError (Missing configuration for the amazon Active Storage service. Configurations available for the test、local、amazon_development、amazon_production services.):
  
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:18:in `block in fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) lib/active_storage/service/registry.rb:11:in `fetch'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:309:in `service'
activestorage (6.1.7.6) app/models/active_storage/blob.rb:199:in `url'
activestorage (6.1.7.6) app/controllers/active_storage/blobs/redirect_controller.rb:12:in `show'
actionpack (6.1.7.6) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:228:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:117:in `block in run_callbacks'
actiontext (6.1.7.6) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (6.1.7.6) lib/action_text/engine.rb:59:in `block (4 levels) in <class:Engine>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:137:in `run_callbacks'
actionpack (6.1.7.6) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `block in instrument'
activesupport (6.1.7.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.1.7.6) lib/active_support/notifications.rb:203:in `instrument'
actionpack (6.1.7.6) lib/action_controller/metal/instrumentation.rb:33:in `process_action'
actionpack (6.1.7.6) lib/action_controller/metal/params_wrapper.rb:249:in `process_action'
activerecord (6.1.7.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.1.7.6) lib/abstract_controller/base.rb:165:in `process'
actionview (6.1.7.6) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.7.6) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.7.6) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.7.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.7.6) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (7.0.7) lib/bullet/rack.rb:17:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (6.1.7.6) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.7.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'

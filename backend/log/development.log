Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:16:20 +0900
  
LoadError (cannot load such file -- /Users/yoshito-t/Desktop/spa-portfolio-app/backend/config/routes.rb):
  
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `load'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `block in load_paths'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `each'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:47:in `load_paths'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:21:in `reload!'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:35:in `block in updater'
activesupport (6.1.7.6) lib/active_support/file_update_checker.rb:83:in `execute'
railties (6.1.7.6) lib/rails/application/routes_reloader.rb:10:in `execute'
railties (6.1.7.6) lib/rails/application/finisher.rb:208:in `block (2 levels) in <module:Finisher>'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:427:in `instance_exec'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:427:in `block in make_lambda'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:198:in `block (2 levels) in halting'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:604:in `block (2 levels) in default_terminator'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:603:in `catch'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:603:in `block in default_terminator'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:199:in `block in halting'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:512:in `block in invoke_before'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:512:in `each'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:512:in `invoke_before'
activesupport (6.1.7.6) lib/active_support/callbacks.rb:105:in `run_callbacks'
activesupport (6.1.7.6) lib/active_support/execution_wrapper.rb:114:in `run!'
activesupport (6.1.7.6) lib/active_support/reloader.rb:114:in `run!'
activesupport (6.1.7.6) lib/active_support/execution_wrapper.rb:77:in `block in run!'
<internal:kernel>:90:in `tap'
activesupport (6.1.7.6) lib/active_support/execution_wrapper.rb:74:in `run!'
activesupport (6.1.7.6) lib/active_support/reloader.rb:63:in `run!'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.7.6) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.7.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.7.6) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.7.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.7.6) lib/action_dispatch/middleware/host_authorization.rb:148:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (6.1.7.6) lib/rails/engine.rb:539:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:16:30 +0900
  
ActionController::RoutingError (No route matches [GET] "/notifications/check_unread_notifications"):
  
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 13:20:16 +0900
  
ActionController::RoutingError (No route matches [GET] "/pages/new_reviews"):
  
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 13:22:08 +0900
  [1m[35m (0.9ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 306ms (Views: 2.4ms | ActiveRecord: 18.5ms | Allocations: 116388)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:23:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 868)


Started GET "/pages/popular_books" for ::1 at 2023-09-27 13:23:21 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 13:23:21 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/get_same_university_books?current_user_id=0" for ::1 at 2023-09-27 13:23:21 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"0"}
  [1m[36mReview Load (0.9ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (13.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 0 LIMIT 1[0m
  [1m[36mBook Load (4.0ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 8.7ms | Allocations: 11894)


  [1m[36mReview Load (2.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mActiveStorage::Blob Load (7.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
Completed 200 OK in 102ms (Views: 1.6ms | ActiveRecord: 17.9ms | Allocations: 67306)


  [1m[36mFavoriteBook Load (33.1ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 176ms (Views: 1.1ms | ActiveRecord: 74.5ms | Allocations: 113164)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-09-27 13:23:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-09-27 13:23:23 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-09-27 13:23:23 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (4.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
[36m  S3 Storage (188.9ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=34f02ce7af0aa7a26d42522cfb53a063ccfa82781fffd6c49149e1cc0181912a)[0m
[36m  S3 Storage (131.2ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=95a4533e5c016358f146241c65099575a5b9dbbdf171a7e37e291b0e743ca1ab)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=34f02ce7af0aa7a26d42522cfb53a063ccfa82781fffd6c49149e1cc0181912a
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=95a4533e5c016358f146241c65099575a5b9dbbdf171a7e37e291b0e743ca1ab
[36m  S3 Storage (352.7ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=d75bb9ec935505c151ef3625ed8f8b66d6dbad613b9a9d64baf5925764a513db)[0m
Completed 302 Found in 210ms (ActiveRecord: 2.0ms | Allocations: 63787)


Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T042323Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=d75bb9ec935505c151ef3625ed8f8b66d6dbad613b9a9d64baf5925764a513db
Completed 302 Found in 208ms (ActiveRecord: 4.4ms | Allocations: 63394)


Completed 302 Found in 379ms (ActiveRecord: 0.7ms | Allocations: 90092)


Started GET "/notifications/check_unread_notifications" for ::1 at 2023-09-27 13:24:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IS NULL LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.4ms | Allocations: 750)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 13:24:19 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 5020)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 13:24:19 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 4412)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 13:24:19 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 26ms (ActiveRecord: 9.0ms | Allocations: 3792)


Started GET "/users/1" for ::1 at 2023-09-27 13:24:19 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (1.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (4.6ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (1.5ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (3.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (1.9ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (3.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 659ms (Views: 18.1ms | ActiveRecord: 51.6ms | Allocations: 477363)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 13:24:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.8ms | Allocations: 1142)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 13:24:21 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.8ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.9ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 239ms (Views: 225.2ms | ActiveRecord: 10.0ms | Allocations: 210409)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 14:29:39 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 3.0ms | Allocations: 4616)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:29:39 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.1ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 14:29:39 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.9ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.7ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.5ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 210ms (Views: 197.1ms | ActiveRecord: 8.9ms | Allocations: 204147)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 14:30:38 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (2.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 3.3ms | Allocations: 4413)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:30:38 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.3ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 14:30:39 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.6ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 227ms (Views: 213.5ms | ActiveRecord: 9.4ms | Allocations: 204152)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-09-27 14:43:20 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
[36m  S3 Storage (4.2ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054321Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c5bdf39444e8c96ecf1653282f6debdf7afe553582de473f2a1281c6812a20bf)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054321Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c5bdf39444e8c96ecf1653282f6debdf7afe553582de473f2a1281c6812a20bf
Completed 302 Found in 41ms (ActiveRecord: 7.7ms | Allocations: 2426)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:43:22 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 6ms (ActiveRecord: 1.8ms | Allocations: 1221)


Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 14:43:22 +0900
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 14:43:22 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-09-27 14:43:22 +0900
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Processing by PagesController#popular_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (2.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (10.0ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (7.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (4.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  [1m[36mReview Load (1.1ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (3.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mFavoriteBook Load (3.5ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 109ms (Views: 1.9ms | ActiveRecord: 13.5ms | Allocations: 75689)


  [1m[36mActiveStorage::Attachment Load (2.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (24.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
Completed 200 OK in 179ms (Views: 0.8ms | ActiveRecord: 41.8ms | Allocations: 141435)


  [1m[36mBook Load (31.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 199ms (Views: 0.7ms | ActiveRecord: 54.8ms | Allocations: 152193)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-09-27 14:43:25 +0900
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-09-27 14:43:25 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
[36m  S3 Storage (6.8ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c1f2bcb8912b9abb6503f59251a55c6a56e55eeeaf4b1d908b8fcafe04fd0551)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c1f2bcb8912b9abb6503f59251a55c6a56e55eeeaf4b1d908b8fcafe04fd0551
Completed 302 Found in 66ms (ActiveRecord: 2.3ms | Allocations: 5225)


[36m  S3 Storage (3.3ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=56676b2105067c280bcc1d49e5872fbaf5419f8e926794aa01f71e09e1566ad3)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T054325Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=56676b2105067c280bcc1d49e5872fbaf5419f8e926794aa01f71e09e1566ad3
Completed 302 Found in 103ms (ActiveRecord: 0.6ms | Allocations: 5484)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 14:46:33 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 4721)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 14:46:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.2ms | Allocations: 1077)


Started GET "/pages/popular_books" for ::1 at 2023-09-27 14:46:34 +0900
Processing by PagesController#popular_books as HTML
Started GET "/pages/new_reviews" for ::1 at 2023-09-27 14:46:34 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 14:46:34 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (4.5ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (1.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (6.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mBook Load (8.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (16.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (65.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (14.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (20.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (46.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (44.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mReview Load (2.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 320ms (Views: 3.1ms | ActiveRecord: 49.3ms | Allocations: 84989)


  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 469ms (Views: 0.8ms | ActiveRecord: 66.9ms | Allocations: 141069)


  [1m[36mBook Load (75.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 495ms (Views: 0.8ms | ActiveRecord: 200.3ms | Allocations: 151086)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:14 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 12ms (ActiveRecord: 6.2ms | Allocations: 1202)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:01:14 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (1.3ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (3.4ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.7ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (1.0ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (1.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 659ms (Views: 19.4ms | ActiveRecord: 27.8ms | Allocations: 401912)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:01:16 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 4465)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:16 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.0ms | Allocations: 1073)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:01:16 +0900
Processing by PagesController#new_reviews as HTML
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:01:16 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:01:16 +0900
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (4.4ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (5.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (7.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.2ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (23.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (8.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (5.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 96ms (Views: 1.7ms | ActiveRecord: 19.4ms | Allocations: 85423)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (24.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
Completed 200 OK in 159ms (Views: 0.8ms | ActiveRecord: 43.9ms | Allocations: 141410)


  [1m[36mBook Load (32.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 171ms (Views: 1.2ms | ActiveRecord: 88.1ms | Allocations: 147885)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615/KhxHPHLP_400x400.png" for ::1 at 2023-09-27 15:01:17 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as PNG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--724e252d1815a32a7ce48a592ad0babaa9c57615", "filename"=>"KhxHPHLP_400x400"}
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
[36m  S3 Storage (1.7ms) [0m[34mGenerated URL for file at key: qlbbu96xwrwjstlb688ky5ao30ys (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060117Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=7786452fa06db1bfa77f87b6e58dd95a163f88614c48ffbb7aa12cb0bbe8201f)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qlbbu96xwrwjstlb688ky5ao30ys?response-content-disposition=inline%3B%20filename%3D%22KhxHPHLP_400x400.png%22%3B%20filename%2A%3DUTF-8%27%27KhxHPHLP_400x400.png&response-content-type=image%2Fpng&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060117Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=7786452fa06db1bfa77f87b6e58dd95a163f88614c48ffbb7aa12cb0bbe8201f
Completed 302 Found in 8ms (ActiveRecord: 0.8ms | Allocations: 2315)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827/%E3%82%B3%E3%83%AD%E3%83%9B%E3%82%99%E3%83%83%E3%82%AF%E3%83%AB%E3%81%AE%E3%81%99%E3%82%80%E5%B1%B1.jpg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--73737c3639ac1a6a0106cf185d479d28ceb93827", "filename"=>"コロボックルのすむ山"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6/%E5%A4%A7%E5%AD%A6%E5%85%A5%E8%A9%A6%20%E6%9F%B3%E7%94%9F%E5%A5%BD%E4%B9%8B%E3%81%AE%E7%8F%BE%E4%BB%A3%E6%96%87%E3%83%95%E3%82%9A%E3%83%A9%E3%83%81%E3%83%8A%E3%83%AB%E3%83%BC%E3%83%AB%20.jpg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBNdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--bd1ccdb6e40a4d5236f51486466e0fc03b1011a6", "filename"=>"大学入試 柳生好之の現代文プラチナルール "}
  [1m[36mActiveStorage::Blob Load (3.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
[36m  S3 Storage (3.6ms) [0m[34mGenerated URL for file at key: jycuv4luq90qnf71l6rtx30umoaj (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=4cf461df1cb2f38f41975c0e3b286382ed7e8c3cfcac49509418152791e07f14)[0m
  [1m[36mActiveStorage::Blob Load (5.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/jycuv4luq90qnf71l6rtx30umoaj?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E3%2582%25B3%25E3%2583%25AD%25E3%2583%259B%25E3%2582%2599%25E3%2583%2583%25E3%2582%25AF%25E3%2583%25AB%25E3%2581%25AE%25E3%2581%2599%25E3%2582%2580%25E5%25B1%25B1.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=4cf461df1cb2f38f41975c0e3b286382ed7e8c3cfcac49509418152791e07f14
Completed 302 Found in 26ms (ActiveRecord: 3.9ms | Allocations: 6572)


[36m  S3 Storage (4.3ms) [0m[34mGenerated URL for file at key: mqdlx1rkboht2p92gyre9c2ad1bh (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=e5b7295fda92075f2f404a42e7722a4fe6992665f2e115e8baa5cde25bc9d272)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/mqdlx1rkboht2p92gyre9c2ad1bh?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%20%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%253F%20.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25A7%25E5%25AD%25A6%25E5%2585%25A5%25E8%25A9%25A6%2520%25E6%259F%25B3%25E7%2594%259F%25E5%25A5%25BD%25E4%25B9%258B%25E3%2581%25AE%25E7%258F%25BE%25E4%25BB%25A3%25E6%2596%2587%25E3%2583%2595%25E3%2582%259A%25E3%2583%25A9%25E3%2583%2581%25E3%2583%258A%25E3%2583%25AB%25E3%2583%25BC%25E3%2583%25AB%2520.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=e5b7295fda92075f2f404a42e7722a4fe6992665f2e115e8baa5cde25bc9d272
Completed 302 Found in 21ms (ActiveRecord: 5.5ms | Allocations: 5431)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5/Harry%20Potter7.jpg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBOdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--2de26a3a3340893144bbdf6ab9750af64a4511b5", "filename"=>"Harry Potter7"}
Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec/%E5%B9%BB%E6%83%B3%E7%9A%84%EF%BC%91jpg.jpeg" for ::1 at 2023-09-27 15:01:19 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBKUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--102bbe88e75d7a3426fae7396148e1725ffac9ec", "filename"=>"幻想的１jpg"}
  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
[36m  S3 Storage (2.2ms) [0m[34mGenerated URL for file at key: qybe0p98y3tev030qa4g9v56qp65 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qybe0p98y3tev030qa4g9v56qp65?response-content-disposition=inline%3B%20filename%3D%22Harry%20Potter7.jpg%22%3B%20filename%2A%3DUTF-8%27%27Harry%2520Potter7.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=807074d9f33430cd0297b4a7c199c319855f4b3b01b81041fdb6f2e5185cdb3c)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/qybe0p98y3tev030qa4g9v56qp65?response-content-disposition=inline%3B%20filename%3D%22Harry%20Potter7.jpg%22%3B%20filename%2A%3DUTF-8%27%27Harry%2520Potter7.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=807074d9f33430cd0297b4a7c199c319855f4b3b01b81041fdb6f2e5185cdb3c
Completed 302 Found in 12ms (ActiveRecord: 2.8ms | Allocations: 3166)


  [1m[36mActiveStorage::Blob Load (4.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
[36m  S3 Storage (3.4ms) [0m[34mGenerated URL for file at key: ab9zecbhxt8g4ygo3dwqqr3s7yp8 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ab9zecbhxt8g4ygo3dwqqr3s7yp8?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253Fjpg.jpeg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25B9%25BB%25E6%2583%25B3%25E7%259A%2584%25EF%25BC%2591jpg.jpeg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=00c31bddf3e918253f82c528f9719c47614ac2ef0ea7ea947cc543227ca91507)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/ab9zecbhxt8g4ygo3dwqqr3s7yp8?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253Fjpg.jpeg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25B9%25BB%25E6%2583%25B3%25E7%259A%2584%25EF%25BC%2591jpg.jpeg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060119Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=00c31bddf3e918253f82c528f9719c47614ac2ef0ea7ea947cc543227ca91507
Completed 302 Found in 16ms (ActiveRecord: 4.1ms | Allocations: 4930)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:21 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 1.4ms | Allocations: 1221)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:01:21 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.7ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.9ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 454ms (Views: 17.2ms | ActiveRecord: 21.1ms | Allocations: 399513)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:23 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 0.9ms | Allocations: 1064)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:01:23 +0900
Processing by PagesController#new_reviews as HTML
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:01:23 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:01:23 +0900
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mBook Load (8.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mActiveStorage::Attachment Load (1.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (5.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mReview Load (3.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mFavoriteBook Load (5.4ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  [1m[36mActiveStorage::Blob Load (21.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (1.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Attachment Load (4.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
Completed 200 OK in 129ms (Views: 2.9ms | ActiveRecord: 8.6ms | Allocations: 85773)


  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mReview Load (34.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
Completed 200 OK in 191ms (Views: 1.0ms | ActiveRecord: 22.3ms | Allocations: 133341)


  [1m[36mBook Load (37.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 209ms (Views: 1.1ms | ActiveRecord: 107.9ms | Allocations: 144255)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:33 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 7ms (ActiveRecord: 2.5ms | Allocations: 1063)


Started GET "/users/1" for ::1 at 2023-09-27 15:01:33 +0900
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 1[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43[0m
  ↳ app/controllers/users_controller.rb:7:in `show'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` WHERE `reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 28, 9, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 28, 31, 49)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 47, 46, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_reviews` INNER JOIN `reviews` `review` ON `review`.`id` = `favorite_reviews`.`review_id` WHERE `review`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:17:in `show'
  [1m[36mQuestion Load (0.9ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 5, 6, 7, 11, 12, 13, 14, 18, 19, 20, 21, 22, 23, 25, 29, 34, 37, 39, 42, 43, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (2, 15, 16, 56)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 25, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 9, 25)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 51)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_questions` INNER JOIN `questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `questions`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:21:in `show'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` WHERE `replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (5, 8, 9, 10, 12, 13, 14, 15, 16, 17, 27, 28, 30, 31, 32, 33, 34, 42, 43, 45, 46, 47, 52)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (18, 58)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 15, 23, 29, 9, 37, 8)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_replies` INNER JOIN `replies` `reply` ON `reply`.`id` = `favorite_replies`.`reply_id` WHERE `reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:25:in `show'
  [1m[36mSubjectQuestion Load (1.0ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` WHERE `subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 11, 12, 23, 24, 25, 26, 27, 30, 33)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (20, 59)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_questions` INNER JOIN `subject_questions` `subject_question` ON `subject_question`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `subject_question`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:29:in `show'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` WHERE `subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (2, 3, 10, 11, 14, 15, 16, 17, 18, 29, 30, 35, 36, 37, 38, 39, 42, 61, 62, 63, 64, 65, 69)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (22, 60, 61)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 19, 16, 17, 18, 28, 30, 33, 34)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_subject_question_replies` INNER JOIN `subject_question_replies` `subject_question_reply` ON `subject_question_reply`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `subject_question_reply`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:33:in `show'
  [1m[36mSurvey Load (0.7ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` WHERE `surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 2, 3, 4, 14, 17, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `favorite_surveys` INNER JOIN `surveys` `survey` ON `survey`.`id` = `favorite_surveys`.`survey_id` WHERE `survey`.`user_id` = 1[0m
  ↳ app/controllers/users_controller.rb:37:in `show'
Completed 200 OK in 611ms (Views: 23.6ms | ActiveRecord: 20.1ms | Allocations: 429680)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:36 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.3ms | Allocations: 1064)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:01:36 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.7ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.8ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (1.2ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.8ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 548ms (Views: 17.1ms | ActiveRecord: 22.8ms | Allocations: 399325)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:01:50 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1063)


Started GET "/pages/new_reviews" for ::1 at 2023-09-27 15:01:50 +0900
Started GET "/pages/popular_books" for ::1 at 2023-09-27 15:01:50 +0900
Started GET "/pages/get_same_university_books?current_user_id=1" for ::1 at 2023-09-27 15:01:50 +0900
Processing by PagesController#new_reviews as HTML
Processing by PagesController#popular_books as HTML
Processing by PagesController#get_same_university_books as HTML
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  Parameters: {"current_user_id"=>"1"}
  [1m[36mBook Load (6.1ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count FROM `books` GROUP BY `books`.`id` ORDER BY favorite_books_count DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/pages_controller.rb:54:in `get_same_university_books'
  [1m[36mReview Load (3.4ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mBook Load (2.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 9, 3)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mBook Load (7.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'AA大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (9.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 7)[0m
  ↳ app/controllers/pages_controller.rb:9:in `map'
  [1m[36mFavoriteBook Load (3.3ms)[0m  [1m[34mSELECT `favorite_books`.* FROM `favorite_books` WHERE `favorite_books`.`book_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  ↳ app/controllers/pages_controller.rb:64:in `map'
  [1m[36mActiveStorage::Attachment Load (21.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (31, 30, 29, 28, 27, 26, 35, 32, 1, 3)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  [1m[36mActiveStorage::Blob Load (4.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (6.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/pages_controller.rb:64:in `map'
  ↳ app/controllers/pages_controller.rb:11:in `block in new_reviews'
  [1m[36mActiveStorage::Blob Load (5.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 48, 47, 49, 33, 46, 34, 35)[0m
  [1m[36mReview Load (1.0ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/pages_controller.rb:40:in `map'
  ↳ app/controllers/pages_controller.rb:64:in `map'
Completed 200 OK in 111ms (Views: 1.8ms | ActiveRecord: 23.5ms | Allocations: 88857)


Completed 200 OK in 140ms (Views: 0.7ms | ActiveRecord: 39.1ms | Allocations: 116385)


  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = 'BB大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 50[0m
  ↳ app/controllers/pages_controller.rb:80:in `map'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` INNER JOIN `favorite_books` ON `favorite_books`.`book_id` = `books`.`id` INNER JOIN `users` ON `users`.`id` = `favorite_books`.`user_id` WHERE (users.first_choice_school = '明治大学') GROUP BY `book_id` ORDER BY count(favorite_books.id) DESC LIMIT 10[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`book_id` IN (35, 36, 37)[0m
  ↳ app/controllers/pages_controller.rb:96:in `map'
Completed 200 OK in 177ms (Views: 0.7ms | ActiveRecord: 23.1ms | Allocations: 150552)


Started GET "/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c/%E5%A4%AA%E9%99%BD%E3%81%AB%E5%90%91%E3%81%8B%E3%81%86%E9%A2%A8%E8%88%B9%E7%BE%A4.jpg" for ::1 at 2023-09-27 15:01:53 +0900
Processing by ActiveStorage::Blobs::RedirectController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBLQT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--480db478f3c6119be667e435e56525ab2b10aa6c", "filename"=>"太陽に向かう風船群"}
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
[36m  S3 Storage (3.2ms) [0m[34mGenerated URL for file at key: 8f8i7pnjp05lnps1uch1lfs5fof6 (https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/8f8i7pnjp05lnps1uch1lfs5fof6?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25AA%25E9%2599%25BD%25E3%2581%25AB%25E5%2590%2591%25E3%2581%258B%25E3%2581%2586%25E9%25A2%25A8%25E8%2588%25B9%25E7%25BE%25A4.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060153Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=b90a8aea70892acffa06450464b91d570a94459d5c235177b676966f1e714c18)[0m
Redirected to https://study-feedback-bucket.s3.ap-northeast-1.amazonaws.com/8f8i7pnjp05lnps1uch1lfs5fof6?response-content-disposition=inline%3B%20filename%3D%22%253F%253F%253F%253F%253F%253F%253F%253F%253F.jpg%22%3B%20filename%2A%3DUTF-8%27%27%25E5%25A4%25AA%25E9%2599%25BD%25E3%2581%25AB%25E5%2590%2591%25E3%2581%258B%25E3%2581%2586%25E9%25A2%25A8%25E8%2588%25B9%25E7%25BE%25A4.jpg&response-content-type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAXP2C2RCQ6GU4DNUY%2F20230927%2Fap-northeast-1%2Fs3%2Faws4_request&X-Amz-Date=20230927T060153Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=b90a8aea70892acffa06450464b91d570a94459d5c235177b676966f1e714c18
Completed 302 Found in 8ms (ActiveRecord: 0.5ms | Allocations: 2508)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:30 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 5ms (ActiveRecord: 1.2ms | Allocations: 1221)


Started GET "/favorites?user_id=1" for ::1 at 2023-09-27 15:02:30 +0900
Processing by FavoritesController#index as HTML
  Parameters: {"user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/favorites_controller.rb:6:in `index'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT books.*, (SELECT COUNT(*) FROM reviews WHERE reviews.book_id = books.id) AS reviews_count, (SELECT ROUND(AVG(reviews.rating), 1) FROM reviews where reviews.book_id = books.id) AS average_rating, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id) AS favorite_books_count, (SELECT COUNT(*) FROM favorite_books WHERE favorite_books.book_id = books.id and favorite_books.user_id = 1) AS check_favorite, (SELECT COUNT(*) FROM questions WHERE questions.book_id = books.id) AS questions_count FROM `books` INNER JOIN `favorite_books` ON `books`.`id` = `favorite_books`.`book_id` WHERE `favorite_books`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 6, 9, 31, 41, 49, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46, 27, 54, 73)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:10:in `map'
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT reviews.*, (SELECT COUNT(*) FROM favorite_reviews WHERE favorite_reviews.review_id = reviews.id) AS favorite_reviews_count FROM `reviews` INNER JOIN `favorite_reviews` ON `reviews`.`id` = `favorite_reviews`.`review_id` WHERE `favorite_reviews`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:21:in `map'
  [1m[36mQuestion Load (0.8ms)[0m  [1m[34mSELECT questions.*, (SELECT COUNT(*) FROM replies WHERE replies.question_id = questions.id) AS replies_count, (SELECT COUNT(*) FROM favorite_questions WHERE favorite_questions.question_id = questions.id) AS favorite_questions_count FROM `questions` INNER JOIN `favorite_questions` ON `questions`.`id` = `favorite_questions`.`question_id` WHERE `favorite_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Question' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 8, 15, 16, 17, 33, 38, 10, 30, 32, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (52, 63)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, 3, 31, 9)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Book' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (1, 3, 9, 31)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (32, 50, 51, 46)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:51:in `map'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT replies.*, (SELECT COUNT(*) FROM favorite_replies WHERE favorite_replies.reply_id = replies.id) AS favorite_replies_count FROM `replies` INNER JOIN `favorite_replies` ON `replies`.`id` = `favorite_replies`.`reply_id` WHERE `favorite_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Reply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (3, 48, 53, 2, 21, 22, 23, 24, 25, 26, 29, 35, 36, 37)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (2, 38, 8, 15)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:103:in `map'
  [1m[36mSubjectQuestion Load (0.9ms)[0m  [1m[34mSELECT subject_questions.*, (SELECT COUNT(*) FROM subject_question_replies WHERE subject_question_replies.subject_question_id = subject_questions.id) AS subject_question_replies_count, (SELECT COUNT(*) FROM favorite_subject_questions WHERE favorite_subject_questions.subject_question_id = subject_questions.id) AS favorite_subject_questions_count FROM `subject_questions` INNER JOIN `favorite_subject_questions` ON `subject_questions`.`id` = `favorite_subject_questions`.`subject_question_id` WHERE `favorite_subject_questions`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestion' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (9, 10, 17, 18, 20, 31, 34, 8, 13, 15, 22)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 14)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` IN (71, 44)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:82:in `map'
  [1m[36mSubjectQuestionReply Load (0.7ms)[0m  [1m[34mSELECT subject_question_replies.*, (SELECT COUNT(*) FROM favorite_subject_question_replies WHERE favorite_subject_question_replies.subject_question_reply_id = subject_question_replies.id) AS favorite_subject_question_replies_count FROM `subject_question_replies` INNER JOIN `favorite_subject_question_replies` ON `subject_question_replies`.`id` = `favorite_subject_question_replies`.`subject_question_reply_id` WHERE `favorite_subject_question_replies`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'SubjectQuestionReply' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (19, 20, 21, 8, 66, 9, 44, 43, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 34, 13)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 4, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (4, 7, 16)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:132:in `map'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT surveys.*, (SELECT COUNT(*) FROM survey_answers WHERE survey_answers.survey_id = surveys.id) AS survey_answers_count, (SELECT COUNT(*) FROM favorite_surveys WHERE favorite_surveys.survey_id = surveys.id) AS favorite_surveys_count FROM `surveys` INNER JOIN `favorite_surveys` ON `surveys`.`id` = `favorite_surveys`.`survey_id` WHERE `favorite_surveys`.`user_id` = 1[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Survey' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` IN (6, 12, 23, 5, 13, 32, 31, 29, 25, 24, 7)[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 7[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
  [1m[36mCACHE ActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71[0m
  ↳ app/controllers/concerns/shared_actions/attach_image.rb:160:in `map'
Completed 200 OK in 562ms (Views: 90.4ms | ActiveRecord: 22.2ms | Allocations: 399530)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:32 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 14ms (ActiveRecord: 6.1ms | Allocations: 1064)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:32 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.5ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.6ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.6ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.8ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.6ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 252ms (Views: 236.8ms | ActiveRecord: 9.8ms | Allocations: 204265)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:02:51 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 4428)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:51 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 3ms (ActiveRecord: 0.6ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:02:51 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.5ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.4ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.4ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.5ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.7ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 206ms (Views: 194.3ms | ActiveRecord: 7.8ms | Allocations: 204150)


Started GET "/users/find_user_by_uid/Vrq4p702Yfgl7yQkHd4sbr2k7sC3" for ::1 at 2023-09-27 15:03:09 +0900
Processing by UsersController#find_user_by_uid as HTML
  Parameters: {"uid"=>"Vrq4p702Yfgl7yQkHd4sbr2k7sC3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`uid` = 'Vrq4p702Yfgl7yQkHd4sbr2k7sC3' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:172:in `find_user_by_uid'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'User' AND `active_storage_attachments`.`name` = 'image' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:175:in `find_user_by_uid'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:176:in `find_user_by_uid'
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 4414)


Started GET "/notifications/check_unread_notifications?current_user_id=1" for ::1 at 2023-09-27 15:03:09 +0900
Processing by NotificationsController#check_unread_notifications as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:38:in `check_unread_notifications'
  [1m[36mNotification Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:43:in `check_unread_notifications'
Completed 204 No Content in 4ms (ActiveRecord: 1.0ms | Allocations: 1063)


Started GET "/notifications?current_user_id=1" for ::1 at 2023-09-27 15:03:09 +0900
Processing by NotificationsController#index as HTML
  Parameters: {"current_user_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/notifications_controller.rb:7:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (16, 7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT `reviews`.* FROM `reviews` WHERE `reviews`.`id` IN (7, 6)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.5ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (3, 39, 8, 7, 2, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mReply Load (0.6ms)[0m  [1m[34mSELECT `replies`.* FROM `replies` WHERE `replies`.`id` IN (55, 54, 53, 51, 50, 49, 45, 41, 40, 39, 38, 37, 36, 35)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (7, 14, 1)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mQuestion Load (0.4ms)[0m  [1m[34mSELECT `questions`.* FROM `questions` WHERE `questions`.`id` IN (15, 2, 9, 3, 39, 8)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.4ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (1, 2, 34, 3, 11, 17)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestionReply Load (0.5ms)[0m  [1m[34mSELECT `subject_question_replies`.* FROM `subject_question_replies` WHERE `subject_question_replies`.`id` IN (79, 73, 72, 71, 70, 68, 39, 67, 41, 40)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` IN (1, 14, 16, 7)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSubjectQuestion Load (0.5ms)[0m  [1m[34mSELECT `subject_questions`.* FROM `subject_questions` WHERE `subject_questions`.`id` IN (17, 1, 2, 3, 34)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mSurvey Load (0.4ms)[0m  [1m[34mSELECT `surveys`.* FROM `surveys` WHERE `surveys`.`id` IN (17, 4, 2, 22, 3, 14, 1, 15)[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:21:in `index'
  [1m[36mNotification Load (0.6ms)[0m  [1m[34mSELECT `notifications`.* FROM `notifications` WHERE `notifications`.`target_user_id` = 1 AND `notifications`.`is_checked` = FALSE ORDER BY `notifications`.`created_at` DESC[0m
  ↳ app/controllers/notifications_controller.rb:30:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `notifications` WHERE `notifications`.`target_user_id` = 1[0m
  ↳ app/controllers/notifications_controller.rb:54:in `delete_over100_notifications'
Completed 200 OK in 207ms (Views: 194.0ms | ActiveRecord: 8.4ms | Allocations: 204148)



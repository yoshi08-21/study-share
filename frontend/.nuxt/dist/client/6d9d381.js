(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{575:function(e,t,r){"use strict";t.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},626:function(e,t,r){"use strict";var n=r(2),o=(r(40),r(61),r(270),r(14),r(6),r(12),r(48),r(113),r(11),r(13),r(15),r(16),r(7)),c=r(105),l=r(137);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=Object(o.a)(c.a,Object(l.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var e=this,t=function(input){return input.$watch("hasError",(function(t){e.$set(e.errorBag,input._uid,t)}),{immediate:!0})},r={_uid:input._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=input.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(input._uid)||(r.valid=t(input)))})):r.valid=t(input),r},validate:function(){return 0===this.inputs.filter((function(input){return!input.validate(!0)})).length},reset:function(){this.inputs.forEach((function(input){return input.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(input){return input.resetValidation()})),this.resetErrorBag()},register:function(input){this.inputs.push(input),this.watchers.push(this.watchInput(input))},unregister:function(input){var e=this.inputs.find((function(i){return i._uid===input._uid}));if(e){var t=this.watchers.find((function(i){return i._uid===e._uid}));t&&(t.valid(),t.shouldValidate()),this.watchers=this.watchers.filter((function(i){return i._uid!==e._uid})),this.inputs=this.inputs.filter((function(i){return i._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:h({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},778:function(e,t,r){"use strict";r(361);var n=r(1);t.a=Object(n.i)("spacer","div","v-spacer")},819:function(e,t,r){"use strict";r.r(t);var n=r(265),o=r(566),c=r(626),l=r(567),d=r(778),h=r(162),f=r(26),m=(r(82),r(33),r(215)),v=r(363),w=r(575),k=r(44),_={middleware:v.default,mixins:[w.a],watch:{"$route.query.message":function(e,t){e!==t&&(this.flashMessage=e,this.snackbar=!0,this.snackbarColor="red accent-2")}},data:function(){return{email:"",password:"",user:{},emailRules:[function(e){return!!e||"メールアドレスを入力してください"},function(e){return(e||"").length<=250||"最大入力文字数は250文字です"},function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"正しい形式のメールアドレスを入力してください"}],passwordRules:[function(e){return!!e||"パスワードを入力してください"},function(e){return(e||"").length<=30||"最大入力文字数は30文字です"}],showPassword:!1}},methods:{login:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("/users/check_is_activated",{params:{email:e.email}});case 3:if("unactivated"!==t.sent.data.status){t.next=11;break}return t.next=7,k.a.get("/users/check_email_existence",{params:{email:e.email}});case 7:return e.flashMessage="このアカウントは有効化されていません。メールアドレス確認用のメールを再送信しましたので、メールに記載されているリンクをクリックしてユーザー登録を完了させてください。",e.snackbarColor="info",e.snackbar=!0,t.abrupt("return");case 11:return r=Object(m.c)(e.$firebase),t.next=14,Object(m.d)(r,e.email,e.password);case 14:n=t.sent,e.$store.dispatch("auth/setLoginState",!0),e.$store.dispatch("auth/setUserUid",n.user.uid),e.$store.dispatch("auth/setEmail",n.user.email),t.next=28;break;case 20:return t.prev=20,t.t0=t.catch(0),console.error("エラーが発生しました:",t.t0),o="",o="auth/invalid-email"===t.t0.code?"正しいメールアドレスを入力してください":"auth/user-not-found"===t.t0.code?"メールアドレスが登録されていません":"auth/missing-password"===t.t0.code?"パスワードを入力してください":"auth/wrong-password"===t.t0.code?"パスワードが間違っています":"ログインエラーが発生しました",console.log(o),e.$router.push({query:{message:o}}),t.abrupt("return");case 28:return t.prev=28,c=e.$store.getters["auth/getUserUid"],t.next=32,k.a.get("/users/find_user_by_uid/".concat(c));case 32:l=t.sent,e.user=l.data,e.$store.dispatch("auth/setCurrentUser",e.user),t.next=40;break;case 37:t.prev=37,t.t1=t.catch(28),console.error("エラーが発生しました:",t.t1);case 40:e.$router.push({path:"/mypage",query:{message:"ログインしました"}});case 41:case"end":return t.stop()}}),t,null,[[0,20],[28,37]])})))()},loginAsUser1:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=7;break;case 5:t.next=12;break;case 7:return e.email="kanagawa369@sample.com",e.password="kanakana",t.next=12,e.login();case 12:case"end":return t.stop()}}),t)})))()},loginAsUser2:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=7;break;case 5:t.next=12;break;case 7:return e.email="kanagawa123@sample.com",e.password="kanakana2",t.next=12,e.login();case 12:case"end":return t.stop()}}),t)})))()}}},y=r(69),component=Object(y.a)(_,(function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticStyle:{"text-align":"center"}},[e._v("ログイン")]),e._v(" "),t(o.a,[t(c.a,[t(h.a,{attrs:{rules:e.emailRules,label:"メールアドレス","data-cy":"email-field"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),t(h.a,{attrs:{rules:e.passwordRules,label:"パスワード","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","data-cy":"password-field"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),t(n.a,{attrs:{"data-cy":"login-button",color:"primary"},on:{click:e.login}},[e._v("ログイン")])],1),e._v(" "),t(d.a,{style:{height:"20px"}}),e._v(" "),t(n.a,{attrs:{color:"success"},on:{click:e.loginAsUser1}},[e._v("ゲストユーザー1でログイン")]),e._v(" "),t(d.a,{style:{height:"20px"}}),e._v(" "),t(n.a,{attrs:{color:"info"},on:{click:e.loginAsUser2}},[e._v("ゲストユーザー2でログイン")]),e._v(" ＊通知の作成など、別のユーザーが必要なときにお使いください。\n    "),t(d.a,{style:{height:"20px"}}),e._v(" "),t(n.a,{attrs:{block:""},on:{click:function(t){return e.$router.push("/auth/signup")}}},[e._v("新規登録はこちらから")])],1),e._v(" "),t("br"),e._v(" "),t(l.a,{attrs:{timeout:3e3,color:e.snackbarColor},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.flashMessage))])],1)}),[],!1,null,null,null);t.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{790:function(t,n,e){var map={"./af":629,"./af.js":629,"./ar":630,"./ar-dz":631,"./ar-dz.js":631,"./ar-kw":632,"./ar-kw.js":632,"./ar-ly":633,"./ar-ly.js":633,"./ar-ma":634,"./ar-ma.js":634,"./ar-sa":635,"./ar-sa.js":635,"./ar-tn":636,"./ar-tn.js":636,"./ar.js":630,"./az":637,"./az.js":637,"./be":638,"./be.js":638,"./bg":639,"./bg.js":639,"./bm":640,"./bm.js":640,"./bn":641,"./bn-bd":642,"./bn-bd.js":642,"./bn.js":641,"./bo":643,"./bo.js":643,"./br":644,"./br.js":644,"./bs":645,"./bs.js":645,"./ca":646,"./ca.js":646,"./cs":647,"./cs.js":647,"./cv":648,"./cv.js":648,"./cy":649,"./cy.js":649,"./da":650,"./da.js":650,"./de":651,"./de-at":652,"./de-at.js":652,"./de-ch":653,"./de-ch.js":653,"./de.js":651,"./dv":654,"./dv.js":654,"./el":655,"./el.js":655,"./en-au":656,"./en-au.js":656,"./en-ca":657,"./en-ca.js":657,"./en-gb":658,"./en-gb.js":658,"./en-ie":659,"./en-ie.js":659,"./en-il":660,"./en-il.js":660,"./en-in":661,"./en-in.js":661,"./en-nz":662,"./en-nz.js":662,"./en-sg":663,"./en-sg.js":663,"./eo":664,"./eo.js":664,"./es":665,"./es-do":666,"./es-do.js":666,"./es-mx":667,"./es-mx.js":667,"./es-us":668,"./es-us.js":668,"./es.js":665,"./et":669,"./et.js":669,"./eu":670,"./eu.js":670,"./fa":671,"./fa.js":671,"./fi":672,"./fi.js":672,"./fil":673,"./fil.js":673,"./fo":674,"./fo.js":674,"./fr":675,"./fr-ca":676,"./fr-ca.js":676,"./fr-ch":677,"./fr-ch.js":677,"./fr.js":675,"./fy":678,"./fy.js":678,"./ga":679,"./ga.js":679,"./gd":680,"./gd.js":680,"./gl":681,"./gl.js":681,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":683,"./gom-latn.js":683,"./gu":684,"./gu.js":684,"./he":685,"./he.js":685,"./hi":686,"./hi.js":686,"./hr":687,"./hr.js":687,"./hu":688,"./hu.js":688,"./hy-am":689,"./hy-am.js":689,"./id":690,"./id.js":690,"./is":691,"./is.js":691,"./it":692,"./it-ch":693,"./it-ch.js":693,"./it.js":692,"./ja":694,"./ja.js":694,"./jv":695,"./jv.js":695,"./ka":696,"./ka.js":696,"./kk":697,"./kk.js":697,"./km":698,"./km.js":698,"./kn":699,"./kn.js":699,"./ko":700,"./ko.js":700,"./ku":701,"./ku.js":701,"./ky":702,"./ky.js":702,"./lb":703,"./lb.js":703,"./lo":704,"./lo.js":704,"./lt":705,"./lt.js":705,"./lv":706,"./lv.js":706,"./me":707,"./me.js":707,"./mi":708,"./mi.js":708,"./mk":709,"./mk.js":709,"./ml":710,"./ml.js":710,"./mn":711,"./mn.js":711,"./mr":712,"./mr.js":712,"./ms":713,"./ms-my":714,"./ms-my.js":714,"./ms.js":713,"./mt":715,"./mt.js":715,"./my":716,"./my.js":716,"./nb":717,"./nb.js":717,"./ne":718,"./ne.js":718,"./nl":719,"./nl-be":720,"./nl-be.js":720,"./nl.js":719,"./nn":721,"./nn.js":721,"./oc-lnc":722,"./oc-lnc.js":722,"./pa-in":723,"./pa-in.js":723,"./pl":724,"./pl.js":724,"./pt":725,"./pt-br":726,"./pt-br.js":726,"./pt.js":725,"./ro":727,"./ro.js":727,"./ru":728,"./ru.js":728,"./sd":729,"./sd.js":729,"./se":730,"./se.js":730,"./si":731,"./si.js":731,"./sk":732,"./sk.js":732,"./sl":733,"./sl.js":733,"./sq":734,"./sq.js":734,"./sr":735,"./sr-cyrl":736,"./sr-cyrl.js":736,"./sr.js":735,"./ss":737,"./ss.js":737,"./sv":738,"./sv.js":738,"./sw":739,"./sw.js":739,"./ta":740,"./ta.js":740,"./te":741,"./te.js":741,"./tet":742,"./tet.js":742,"./tg":743,"./tg.js":743,"./th":744,"./th.js":744,"./tk":745,"./tk.js":745,"./tl-ph":746,"./tl-ph.js":746,"./tlh":747,"./tlh.js":747,"./tr":748,"./tr.js":748,"./tzl":749,"./tzl.js":749,"./tzm":750,"./tzm-latn":751,"./tzm-latn.js":751,"./tzm.js":750,"./ug-cn":752,"./ug-cn.js":752,"./uk":753,"./uk.js":753,"./ur":754,"./ur.js":754,"./uz":755,"./uz-latn":756,"./uz-latn.js":756,"./uz.js":755,"./vi":757,"./vi.js":757,"./x-pseudo":758,"./x-pseudo.js":758,"./yo":759,"./yo.js":759,"./zh-cn":760,"./zh-cn.js":760,"./zh-hk":761,"./zh-hk.js":761,"./zh-mo":762,"./zh-mo.js":762,"./zh-tw":763,"./zh-tw.js":763};function o(t){var n=c(t);return e(n)}function c(t){if(!e.o(map,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=c,t.exports=o,o.id=790},808:function(t,n,e){"use strict";e.r(n);var o=e(265),c=e(255),r=e(111),l=e(566),j=e(805),_=e(597),f=e(565),v=(e(32),e(26)),d=(e(55),e(82),e(359)),m=e(164),y=(e(35),e(574)),h=e.n(y),k={props:{notification:Object},methods:{formattedTime:function(t){return h()(t).format("YYYY/MM/DD HH:mm")}}},x=e(69),z=Object(x.a)(k,(function(){var t=this,n=t._self._c;return n("div",[n(f.a,{staticClass:"justify-center"},[n(l.a,{attrs:{cols:"10"}},[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-comment-account-outline")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n              "),n("nuxt-link",{attrs:{to:"/surveys/".concat(t.notification.survey_id)}},[t._v("あなたのアンケート")]),t._v("に回答しました\n            ")],1),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n              "+t._s(t.formattedTime(t.notification.created_at))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,w={props:{notification:Object,contentUrl:String,contentTitle:String},methods:{formattedTime:function(t){return h()(t).format("YYYY/MM/DD HH:mm")}}},S=Object(x.a)(w,(function(){var t=this,n=t._self._c;return n("div",[n(f.a,{staticClass:"justify-center"},[n(l.a,{attrs:{cols:"10"}},[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-account-heart")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n              "),n("nuxt-link",{attrs:{to:t.contentUrl}},[t._v("あなたの"+t._s(t.contentTitle))]),t._v("にいいね!しました\n            ")],1),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n              "+t._s(t.formattedTime(t.notification.created_at))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,U={props:{notification:Object,questionInNotification:Object,replyInNotification:Object,questionUrl:String,replyUrl:String},methods:{formattedTime:function(t){return h()(t).format("YYYY/MM/DD HH:mm")}}},T=Object(x.a)(U,(function(){var t=this,n=t._self._c;return n("div",[n(f.a,{staticClass:"justify-center"},[n(l.a,{attrs:{cols:"10"}},[t.notification.target_user_id===t.questionInNotification.user_id?[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-comment-account-outline")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n                  "),n("nuxt-link",{attrs:{to:t.questionUrl}},[t._v("あなたの質問")]),t._v("に\n                  "),n("nuxt-link",{attrs:{to:t.replyUrl}},[t._v("返信")]),t._v("しました\n              ")],1),t._v(" "),n(r.c,[t._v("\n                "+t._s(t.$truncate(t.replyInNotification.content,100))+"\n              ")]),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n                "+t._s(t.formattedTime(t.notification.created_at))+"\n              ")])],1)],1)],1)]:[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-comment-account-outline")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n                  "),n("nuxt-link",{attrs:{to:t.questionUrl}},[t._v("あなたが返信した質問")]),t._v("に\n                  "),n("nuxt-link",{attrs:{to:t.replyUrl,"data-cy":"notification-reply-link"}},[t._v("返信")]),t._v("しました\n              ")],1),t._v(" "),n(r.c,[t._v("\n                "+t._s(t.$truncate(t.replyInNotification.content,100))+"\n              ")]),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n                "+t._s(t.formattedTime(t.notification.created_at))+"\n              ")])],1)],1)],1)]],2)],1)],1)}),[],!1,null,null,null).exports,N=e(119),O=e(44),C={middleware:d.default,mixins:[N.a],components:{AnswerToSurveyNotification:z,FavoriteNotification:S,ReplyNotification:T},asyncData:function(t){return Object(v.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.store,n.prev=1,n.next=4,O.a.get("/notifications",{params:{current_user_id:e.getters["auth/getCurrentUser"].id}});case 4:return o=n.sent,n.abrupt("return",{notifications:o.data});case 8:n.prev=8,n.t0=n.catch(1),console.error("エラーが発生しました:",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},data:function(){return{perPage:10,page:1}},computed:{notificationsChunk:function(){var t=(this.page-1)*this.perPage,n=t+this.perPage;return this.notifications.slice(t,n)},totalPages:function(){return Math.ceil(this.notifications.length/this.perPage)}},methods:{createSampleNotification:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.a.post("subject_question_replies/create_sample_notification",{current_user_id:t.currentUser.id,sample_user_id:16,content:"通知確認用サンプルメッセージ"});case 3:t.$router.push({path:"/",query:{message:"通知が作成されました"}}),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error("エラーが発生しました:",n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}}},R=Object(x.a)(C,(function(){var t=this,n=t._self._c;return n("div",[n("h2",{staticStyle:{"text-align":"center"}},[t._v("通知一覧")]),t._v(" "),n("br"),n("br"),t._v(" "),n(f.a,[n(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[n(c.a,{attrs:{width:"70%"}},[n(r.d,[n(f.a,{staticClass:"d-flex justify-center"},[n(l.a,{attrs:{cols:"9"}},[n(o.a,{attrs:{block:""},on:{click:t.createSampleNotification}},[t._v("通知サンプル作成")])],1)],1)],1),t._v(" "),n(r.c,{staticStyle:{"text-align":"center"}},[n("h4",[t._v("\n            ボタンを押すと通知が作成されます。通知機能の確認にお使いください。\n          ")])])],1)],1)],1),t._v(" "),n("br"),n("br"),t._v(" "),n(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(n){t.page=n},expression:"page"}}),t._v(" "),n("br"),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("\n    *通知が100件を超えると古い通知から削除されます\n  ")]),t._v(" "),t._l(t.notificationsChunk,(function(e,o){return n(j.a,{key:"notification_"+o,attrs:{"mb-5":"","data-cy":"each-notifications"}},["Favorite"==e.action_type?n("div",["Review"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/books/".concat(e.review.book_id,"/reviews/").concat(e.review.id),contentTitle:"レビュー"}})],1):"Question"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/books/".concat(e.question.book_id,"/questions/").concat(e.question.id),contentTitle:"質問"}})],1):"Reply"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/books/".concat(e.reply.question.book_id,"/questions/").concat(e.reply.question_id,"/replies/").concat(e.reply.id),contentTitle:"返信"}})],1):"SubjectQuestion"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/subjectQuestions/".concat(e.subject_question.id),contentTitle:"質問(科目別)"}})],1):"SubjectQuestionReply"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/subjectQuestions/".concat(e.subject_question_reply.subject_question_id,"/subjectQuestionReplies/").concat(e.subject_question_reply.id),contentTitle:"返信(科目別)"}})],1):t._e(),t._v(" "),"Survey"===e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/surveys/".concat(e.survey_id),contentTitle:"アンケート"}})],1):t._e()]):"Reply"==e.action_type?n("div",["Reply"==e.action_to?n("div",[n("reply-notification",{attrs:{notification:e,questionInNotification:e.question,replyInNotification:e.reply,questionUrl:"/books/".concat(e.reply.question.book_id,"/questions/").concat(e.reply.question_id),replyUrl:"/books/".concat(e.reply.question.book_id,"/questions/").concat(e.reply.question_id,"/replies/").concat(e.reply.id)}})],1):"SubjectQuestionReply"==e.action_to?n("div",[n("reply-notification",{attrs:{notification:e,questionInNotification:e.subject_question,replyInNotification:e.subject_question_reply,questionUrl:"/subjectQuestions/".concat(e.subject_question.id),replyUrl:"/subjectQuestions/".concat(e.subject_question_reply.subject_question_id,"/subjectQuestionReplies/").concat(e.subject_question_reply.id)}})],1):t._e()]):"SurveyAnswer"===e.action_type?n("div",[n("answer-to-survey-notification",{attrs:{notification:e}})],1):t._e()])})),t._v(" "),n(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(n){t.page=n},expression:"page"}})],2)}),[],!1,null,null,null);n.default=R.exports}}]);
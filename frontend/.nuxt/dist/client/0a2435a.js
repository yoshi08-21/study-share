(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{575:function(e,r,n){"use strict";r.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},820:function(e,r,n){"use strict";n.r(r);var t=n(265),o=n(567),c=n(162),l=(n(35),n(26)),d=(n(82),n(33),n(215)),f=n(363),m=n(575),w=n(44),h={middleware:f.default,mixins:[m.a],data:function(){var e=this;return{name:"",email:"",password:"",passwordConfirmation:"",uid:"",nameRules:[function(e){return!!e||"ユーザー名を入力してください"},function(e){return(e||"").length<=30||"最大入力文字数は30文字です"}],emailRules:[function(e){return!!e||"メールアドレスを入力してください"},function(e){return(e||"").length<=250||"最大入力文字数は250文字です"},function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"正しい形式のメールアドレスを入力してください"}],passwordRules:[function(e){return!!e||"パスワードを入力してください"},function(e){return(e||"").length>=6||"パスワードは6文字以上で設定してください"},function(e){return(e||"").length<=30||"最大入力文字数は30文字です"}],passwordConfirmationRules:[function(e){return!!e||"パスワード確認を入力してください"},function(r){return r===e.password||"パスワードが一致していません"},function(e){return(e||"").length<=30||"最大入力文字数は30文字です"}],showPassword:!1,showPasswordConfirmation:!1}},methods:{signUp:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var n,t,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w.a.get("/users/check_email_existence",{params:{email:e.email}});case 3:if(!0!==(n=r.sent).data.existence||"activated"!==n.data.status){r.next=11;break}return e.flashMessage="このメールアドレスはすでに登録されています。パスワードをお忘れの場合はパスワードの再設定を行ってください",e.snackbarColor="info",e.snackbar=!0,r.abrupt("return");case 11:if(!0!==n.data.existence||"unactivated"!==n.data.status){r.next=16;break}return e.flashMessage="このメールアドレスはすでに登録されています。メールアドレス確認用のメールを再送信しましたので、メールに記載されているリンクをクリックしてユーザー登録を完了させてください。",e.snackbarColor="info",e.snackbar=!0,r.abrupt("return");case 16:return t=Object(d.c)(e.$firebase),r.next=19,Object(d.a)(t,e.email,e.password);case 19:o=r.sent,e.userSetup(o.user.uid),e.$router.push({path:"/",query:{message:"メールアドレス確認のためのメールを送信しました。メールに記載されているリンクをクリックしてユーザー登録を完了させてください。"}}),r.next=30;break;case 24:r.prev=24,r.t0=r.catch(0),console.error("エラーが発生しました:",r.t0),e.snackbar=!0,e.snackbarColor="red accent-2",e.flashMessage="エラーが発生しました。入力フォームを確認してください";case 30:case"end":return r.stop()}}),r,null,[[0,24]])})))()},userSetup:function(e){var r=this;return Object(l.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.a.post("/users",{name:r.name,email:r.email,uid:e});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.error("エラーが発生しました:",n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()}}},k=n(69),component=Object(k.a)(h,(function(){var e=this,r=e._self._c;return r("div",[r("h2",{staticStyle:{"text-align":"center"}},[e._v("ユーザー登録")]),e._v(" "),r("br"),e._v(" "),r(c.a,{attrs:{rules:e.nameRules,label:"ユーザー名"},model:{value:e.name,callback:function(r){e.name=r},expression:"name"}}),e._v(" "),r(c.a,{attrs:{rules:e.emailRules,label:"メールアドレス"},model:{value:e.email,callback:function(r){e.email=r},expression:"email"}}),e._v(" "),r(c.a,{attrs:{rules:e.passwordRules,label:"パスワード","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password"},on:{"click:append":function(r){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}}),e._v(" "),r(c.a,{attrs:{rules:e.passwordConfirmationRules,label:"パスワード確認","append-icon":e.showPasswordConfirmation?"mdi-eye":"mdi-eye-off",type:e.showPasswordConfirmation?"text":"password"},on:{"click:append":function(r){e.showPasswordConfirmation=!e.showPasswordConfirmation}},model:{value:e.passwordConfirmation,callback:function(r){e.passwordConfirmation=r},expression:"passwordConfirmation"}}),e._v(" "),r("br"),e._v(" "),r(t.a,{attrs:{block:""},on:{click:e.signUp}},[e._v("登録")]),e._v(" "),r("br"),e._v(" "),r(o.a,{attrs:{timeout:3e3,color:e.snackbarColor},model:{value:e.snackbar,callback:function(r){e.snackbar=r},expression:"snackbar"}},[e._v(e._s(e.flashMessage))])],1)}),[],!1,null,null,null);r.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[30,7,9,10],{574:function(t,e,n){"use strict";e.a={methods:{goToUser:function(t){this.currentUser&&this.currentUser.id===t.id?this.$router.push({path:"/mypage"}):this.$router.push({path:"/users/".concat(t.id)})}}}},576:function(t,e,n){"use strict";e.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},577:function(t,e,n){"use strict";n.r(e);var o=n(601),r=n(265),c=n(255),l=n(111),d=n(565),v=n(262),_=n(564),f={props:{showDeleteConfirmation:Boolean,contentTitle:String},data:function(){return{localShowDeleteConfirmation:this.showDeleteConfirmation}},watch:{showDeleteConfirmation:function(t){this.localShowDeleteConfirmation=t}},methods:{deleteContent:function(){this.$emit("deleteContent")},closeDeleteConfirmation:function(){this.$emit("closeDeleteConfirmation")}}},m=n(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{width:"800"},model:{value:t.localShowDeleteConfirmation,callback:function(e){t.localShowDeleteConfirmation=e},expression:"localShowDeleteConfirmation"}},[e(c.a,{attrs:{height:"300"}},[e(_.a,{staticClass:"d-flex justify-center"},[e(d.a,[e(l.d,{staticStyle:{height:"120px"}},[e(o.a,{attrs:{type:"error",dense:"",text:"",prominent:"",border:"left",width:"100%"}},[t._v("\n            削除した"+t._s(t.contentTitle)+"は復元できません!\n          ")])],1),t._v(" "),e(l.c,{staticStyle:{"text-align":"center",height:"90px"}},[e("h1",[t._v("\n            "+t._s(t.contentTitle)+"を削除しますか？\n          ")])]),t._v(" "),e(l.a,[e(_.a,[e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"6"}},[e(r.a,{attrs:{large:"",width:"300",color:"error",dark:"","data-cy":"delete-confirm-button"},on:{click:t.deleteContent}},[t._v("\n                削除する\n              ")])],1),t._v(" "),e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"6"}},[e(r.a,{attrs:{large:"",width:"300"},on:{click:t.closeDeleteConfirmation}},[t._v("\n                戻る\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},582:function(t,e,n){"use strict";e.a={methods:{checkFileSize:function(t){console.log(t);t&&t.size>3145728?(this.errorMessage="添付できるファイルは3MBまでです",this.error=!0):(this.errorMessage="",this.error=!1)}}}},585:function(t,e,n){"use strict";n.r(e);var o=n(265),r=n(565),c=n(164),l=n(564),d={props:{content:String},methods:{previousContent:function(){this.$emit("previousContent")},nextContent:function(){this.$emit("nextContent")}}},v=n(69),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e(l.a,{staticClass:"d-flex justify-space-between"},[e(r.a,{staticClass:"d-flex justify-start",attrs:{cols:"6"}},[e(o.a,{attrs:{"x-large":"","data-cy":"previous-content-button"},on:{click:t.previousContent}},[e(c.a,[t._v("mdi-arrow-left-bold")]),t._v("前の"+t._s(t.content))],1)],1),t._v(" "),e(r.a,{staticClass:"d-flex justify-end",attrs:{cols:"6"}},[e(o.a,{attrs:{"x-large":"","data-cy":"next-content-button"},on:{click:t.nextContent}},[t._v("次の"+t._s(t.content)),e(c.a,[t._v("mdi-arrow-right-bold")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},586:function(t,e,n){"use strict";n.r(e);var o=n(265),r=n(164),c=(n(22),{props:{currentUser:Object,user:Object,isFavorite:Boolean,favoriteCount:Number},methods:{addToFavorite:function(){this.$emit("addToFavorite")},removeFromFavorite:function(){this.$emit("removeFromFavorite")}}}),l=n(69),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{attrs:{"data-cy":"favorite-section"}},[t.currentUser&&t.user.id!==t.currentUser.id?[t.isFavorite?[e(o.a,{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"pink","data-cy":"remove-favorite-button"},on:{click:t.removeFromFavorite}},[e(r.a,{attrs:{dark:""}},[t._v("\n          mdi-heart\n        ")])],1),t._v("\n      ("+t._s(t.favoriteCount)+")\n    ")]:[e(o.a,{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"pink",outlined:"","data-cy":"add-favorite-button"},on:{click:t.addToFavorite}},[e(r.a,{attrs:{dark:""}},[t._v("\n          mdi-heart-plus-outline\n        ")])],1),t._v("\n      ("+t._s(t.favoriteCount)+")\n    ")]]:[e(r.a,[t._v("mdi-heart-multiple")]),t._v("\n    いいね! ("+t._s(t.favoriteCount)+")\n  ")]],2)}),[],!1,null,null,null);e.default=component.exports},594:function(t,e,n){"use strict";n.r(e);var o=n(265),r=n(255),c=n(111),l=n(565),d=n(262),v=n(209),_=n(564),f={props:{showFullImage:Boolean,image:String},data:function(){return{localShowFullImage:this.showFullImage}},watch:{showFullImage:function(t){this.localShowFullImage=t}}},m=n(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(d.a,{model:{value:t.localShowFullImage,callback:function(e){t.localShowFullImage=e},expression:"localShowFullImage"}},[e(r.a,{staticStyle:{padding:"10px"},attrs:{"max-height":"800px"}},[e(_.a,[e(l.a,{staticClass:"d-flex justify-start",attrs:{cols:"6"}},[e(c.d,[t._v("拡大画像")])],1),t._v(" "),e(l.a,{staticClass:"d-flex justify-end align-center",attrs:{cols:"6"}},[e(o.a,{on:{click:function(e){return t.$emit("closeShowFullImage")}}},[t._v("閉じる")])],1)],1),t._v(" "),e("hr"),t._v(" "),e(_.a,{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[e(l.a,{staticClass:"d-flex justify-center"},[e(v.a,{attrs:{src:t.image,"max-height":"500","max-width":"500",contain:""}})],1)],1),t._v(" "),e(_.a,[e(l.a,{staticClass:"d-flex justify-center"},[e(o.a,{on:{click:function(e){return t.$emit("closeShowFullImage")}}},[t._v("閉じる")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},620:function(t,e,n){"use strict";var o=n(601),r=n(801),c=n(625),l=n(567),d=n(213),v=n(582),_={components:{VTextarea:l.a,SubmitButton:d.default},mixins:[v.a],data:function(){return{content:"",contentRules:[function(t){return!!t||"本文を入力してください"},function(t){return(t||"").length<=1e3||"最大入力文字数は1000文字です"}],selectedFile:null,errorMessage:"",error:!1}},methods:{submitForm:function(){this.$emit("submitReply",{content:this.content,image:this.selectedFile})}}},f=n(69),component=Object(f.a)(_,(function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" "),e(c.a,[e(l.a,{attrs:{outlined:"",counter:"",label:"本文",rules:t.contentRules,"data-cy":"create-content-field"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v("\n    *画像を添付できます(「.jpeg」「.jpg」「.png」のみ添付できます)\n    "),e("br"),t._v("\n    *添付できる画像のファイルサイズは3MBまでです\n    "),e("br"),e("br"),t._v(" "),e(r.a,{staticStyle:{width:"500px"},attrs:{accept:"image/jpeg, image/png","show-size":"","truncate-length":"15",outlined:"",label:"ファイルを選択","prepend-icon":"mdi-image-plus"},on:{change:t.checkFileSize},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}}),t._v(" "),t.errorMessage?[e(o.a,{attrs:{type:"error",dense:"",text:"",border:"left"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")])]:t._e(),t._v(" "),e("submit-button",{attrs:{error:t.error,buttonTitle:"投稿する"},on:{submitForm:t.submitForm,closeDialog:function(e){return t.$emit("closeDialog")}}})],2)],1)}),[],!1,null,null,null);e.a=component.exports;installComponents(component,{SubmitButton:n(213).default})},808:function(t,e,n){"use strict";n.r(e);var o=n(601),r=n(254),c=n(265),l=n(255),d=n(111),v=n(565),_=n(262),f=n(164),m=n(209),h=n(596),j=n(564),x=n(566),y=n(567),C=(n(35),n(30)),k=n(26),Q=(n(82),n(6),n(49),n(56),n(55),n(32),n(268),n(801)),S=n(625),w=n(803),F=n(802),R=n(777),D=n(162),I=n(213),$=n(582),M={props:{title:String,content:String,subject:String},components:{VTextField:D.a,VTextarea:y.a,SubmitButton:I.default},mixins:[$.a],data:function(){return{editedTitle:this.title,editedContent:this.content,editedSubject:this.subject,titleRules:[function(t){return!!t||"タイトルを入力してください"},function(t){return(t||"").length<=60||"最大入力文字数は60文字です"}],contentRules:[function(t){return!!t||"本文を入力してください"},function(t){return(t||"").length<=1e3||"最大入力文字数は1000文字です"}],selectSubjectDialog:!1,categories:[{name:"国語",subcategories:["現代文","古文","漢文"]},{name:"社会",subcategories:["日本史","世界史","地理","倫理・政治経済"]},{name:"数学",subcategories:["数学I・A","数学Ⅱ・B","数学Ⅲ・C"]},{name:"英語",subcategories:["英文法","英文読解","英作文","英単語","リスニング"]},{name:"理科",subcategories:["物理","生物","化学","地学"]},{name:"その他",subcategories:["過去問","小論文","その他科目"]}],selectedFile:null,errorMessage:"",error:!1}},methods:{submitForm:function(){this.$emit("submitSubjectQuestion",{title:this.editedTitle,content:this.editedContent,subject:this.editedSubject,image:this.selectedFile})}}},T=n(69),component=Object(T.a)(M,(function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" "),e(S.a,[e("br"),t._v(" "),e(v.a,{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[e(c.a,{on:{click:function(e){t.selectSubjectDialog=!0}}},[t._v("科目を選択する(必須)")])],1),t._v(" "),t.editedSubject?e("h3",[t._v("選択された科目："+t._s(t.editedSubject))]):t._e(),t._v(" "),e("br"),t._v(" "),e(D.a,{attrs:{counter:"",label:"タイトル",rules:t.titleRules,"data-cy":"edit-title-field"},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}}),t._v(" "),e(y.a,{attrs:{outlined:"",counter:"",label:"本文",rules:t.contentRules,"data-cy":"edit-content-field"},model:{value:t.editedContent,callback:function(e){t.editedContent=e},expression:"editedContent"}}),t._v("\n    *画像を添付できます(「.jpeg」「.jpg」「.png」のみ添付できます)\n    "),e("br"),t._v("\n    *添付できる画像のファイルサイズは3MBまでです\n    "),e("br"),e("br"),t._v(" "),e(Q.a,{staticStyle:{width:"500px"},attrs:{accept:"image/jpeg, image/png","show-size":"","truncate-length":"15",outlined:"",label:"ファイルを選択","prepend-icon":"mdi-image-plus"},on:{change:t.checkFileSize},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}}),t._v(" "),t.errorMessage?[e(o.a,{attrs:{type:"error",dense:"",text:"",border:"left"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")])]:t._e(),t._v(" "),e("submit-button",{attrs:{error:t.error,buttonTitle:"編集する"},on:{submitForm:t.submitForm,closeDialog:function(e){return t.$emit("closeDialog")}}})],2),t._v(" "),e(_.a,{attrs:{"max-width":"500px"},model:{value:t.selectSubjectDialog,callback:function(e){t.selectSubjectDialog=e},expression:"selectSubjectDialog"}},[e(l.a,[e(d.d,{staticClass:"headline"},[t._v("科目選択")]),t._v(" "),e(d.c,[e(F.a,{attrs:{"data-cy":"select-subject-group"},model:{value:t.editedSubject,callback:function(e){t.editedSubject=e},expression:"editedSubject"}},[t._l(t.categories,(function(n){return[e("p",{key:n.name},[t._v(t._s(n.name))]),t._v(" "),t._l(n.subcategories,(function(t){return e(w.a,{key:t,attrs:{label:t,value:t}})}))]}))],2)],1),t._v(" "),e("h3",[t._v("選択された科目:"+t._s(t.editedSubject))]),t._v(" "),e(d.a,[e(R.a),t._v(" "),e(c.a,{attrs:{color:"primary",block:"","data-cy":"close-select-subject-dialog"},on:{click:function(e){t.selectSubjectDialog=!1}}},[t._v("閉じる")])],1)],1)],1)],1)}),[],!1,null,null,null),U=component.exports;installComponents(component,{SubmitButton:n(213).default});var O=n(620),B=n(586),z=n(585),P={props:{subjectQuestionReplies:[]}},N=Object(T.a)(P,(function(){var t=this,e=t._self._c;return e("div",t._l(t.subjectQuestionReplies,(function(n,o){return e(j.a,{key:"subjectQuestionReply_"+o,attrs:{"mb-5":"","data-cy":"each-subject-question-subject-question-replies"}},[e(v.a,[n.user_id!==n.subject_question.user_id?[e(j.a,{staticClass:"justify-start"},[e(v.a,{attrs:{cols:"10"}},[e(l.a,{attrs:{to:"/subjectQuestions/".concat(n.subject_question_id,"/subjectQuestionReplies/").concat(n.id),elevation:"8",height:"200"}},[e(j.a,[e(v.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e(j.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e(r.a,{attrs:{size:"80"}},[e(m.a,{attrs:{src:n.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(j.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(n.user.name,10)))])])],1)],1),t._v(" "),e(v.a,{staticClass:"mt-n2",attrs:{cols:"9"}},[e(d.c,[e(y.a,{staticStyle:{height:"125px"},attrs:{value:n.content,readonly:"",filled:"",rounded:"",dense:"","no-resize":"",rows:"4"}})],1),t._v(" "),e(d.a,[e(j.a,{staticClass:"d-flex align-center justify-center"},[n.image?[e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-file-image-plus")]),t._v("\n                            画像\n                          ")],1)]:t._e(),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-heart-multiple")]),t._v("\n                          いいね! ("+t._s(n.favorite_subject_question_replies_count)+")\n                        ")],1),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-calendar-clock")]),t._v("\n                          "+t._s(n.created_at)+"\n                        ")],1)],2),t._v(" "),e("p")],1)],1)],1)],1)],1)],1)]:[e(j.a,{staticClass:"justify-end"},[e(v.a,{attrs:{cols:"10"}},[e(l.a,{staticStyle:{"background-color":"lightgreen"},attrs:{to:"/subjectQuestions/".concat(n.subject_question_id,"/subjectQuestionReplies/").concat(n.id),elevation:"8",height:"200"}},[e(j.a,{staticClass:"justify-end"},[e(v.a,{staticClass:"mt-n2",attrs:{cols:"9"}},[e(d.c,[e(y.a,{staticStyle:{height:"125px","background-color":"beige"},attrs:{value:n.content,readonly:"",rounded:"",dense:"","no-resize":"",rows:"4"}})],1),t._v(" "),e(d.a,[e(j.a,{staticClass:"d-flex align-center justify-center"},[n.image?[e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-file-image-plus")]),t._v("\n                            画像\n                          ")],1)]:t._e(),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-heart-multiple")]),t._v("\n                          いいね! ("+t._s(n.favorite_subject_question_replies_count)+")\n                        ")],1),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-calendar-clock")]),t._v("\n                          "+t._s(n.created_at)+"\n                        ")],1)],2),t._v(" "),e("p")],1)],1),t._v(" "),e(v.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e(j.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e(r.a,{attrs:{size:"80"}},[e(m.a,{attrs:{src:n.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(j.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(n.user.name,10)))])])],1)],1)],1)],1)],1)],1)]],2)],1)})),1)}),[],!1,null,null,null).exports,V=n(577),J=n(594),A=n(119),E=n(576),G=n(574),H=n(44),K={components:{EditSubjectQuestion:U,ReplyForm:O.a,FavoriteButton:B.default,ContentNavigator:z.default,SubjectQuestionSubjectQuestionReplies:N,DeleteConfirmationDialog:V.default,ShowFullImageDialog:J.default},mixins:[A.a,E.a,G.a],asyncData:function(t){return Object(k.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,l,d,v,_,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,o=t.store,e.prev=1,r=null,(c=o.getters["auth/getCurrentUser"])&&c.id&&(r=c.id),e.next=7,Promise.all([H.a.get("subject_questions/".concat(n.id),{params:{current_user_id:r}}),H.a.get("/subject_questions/questions_to_specific_subject",{params:{subject_question_id:n.id}}),H.a.get("subject_questions/".concat(n.id,"/subject_question_replies"))]);case 7:return l=e.sent,d=Object(C.a)(l,3),v=d[0],_=d[1],f=d[2],console.log(v.data),console.log(_.data),console.log(f.data),e.abrupt("return",{subjectQuestion:v.data.subject_question,user:v.data.subject_question_user,subjectQuestions:_.data,subjectQuestionReplies:f.data,params:n});case 18:throw e.prev=18,e.t0=e.catch(1),console.log(e.t0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))()},data:function(){return{dialog:!1,showDeleteConfirmation:!1,isFavorite:!1,favoriteSubjectQuestionId:"",subjectQuestionReplyDialog:!1,perPage:10,page:1,showFullImage:!1}},computed:{subjectQuestionReplyChunk:function(){var t=(this.page-1)*this.perPage,e=t+this.perPage;return this.subjectQuestionReplies.slice(t,e)},totalPages:function(){return Math.ceil(this.subjectQuestionReplies.length/this.perPage)}},created:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="",(o=t.$store.getters["auth/getCurrentUser"])&&o.id&&(n=o.id),e.next=6,H.a.get("subject_questions/is_favorite",{params:{current_user_id:n,subject_question_id:t.$route.params.id}});case 6:r=e.sent,console.log(r),t.isFavorite=r.data.is_favorite,t.favoriteSubjectQuestionId=r.data.favorite_subject_question_id,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("エラー文です"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},methods:{editSubjectQuestion:function(data){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("current_user_id",t.currentUser.id),n.append("subject_question[title]",data.title),n.append("subject_question[content]",data.content),n.append("subject_question[subject]",data.subject),data.image&&n.append("subject_question[image]",data.image),e.prev=6,e.next=9,H.a.patch("/subject_questions/".concat(t.subjectQuestion.id),n);case 9:o=e.sent,console.log(o.data),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="質問の編集が完了しました",t.subjectQuestion.title=o.data.subject_question.title,t.subjectQuestion.content=o.data.subject_question.content,t.subjectQuestion.subject=o.data.subject_question.subject,o.data.image_url&&(t.subjectQuestion.image=o.data.image_url),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="質問を編集できませんでした";case 26:t.dialog=!1;case 27:case"end":return e.stop()}}),e,null,[[6,20]])})))()},deleteSubjectQuestion:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.delete("/subject_questions/".concat(t.subjectQuestion.id),{params:{current_user_id:t.currentUser.id}});case 3:n=e.sent,console.log(n),t.$router.push({path:"/subjectQuestions/allSubjectQuestions",query:{message:"質問を削除しました"}}),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="質問を削除できませんでした",t.dialog=!1;case 15:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addToFavorite:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.post("/subject_questions/".concat(t.subjectQuestion.id,"/favorite_subject_questions"),{current_user_id:t.currentUser.id});case 3:n=e.sent,console.log(n),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="いいね!しました",t.isFavorite=!0,t.favoriteSubjectQuestionId=n.data.id,t.subjectQuestion.favorite_subject_questions_count+=1,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="すでにいいね!されています";case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},removeFromFavorite:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.delete("/subject_questions/".concat(t.subjectQuestion.id,"/favorite_subject_questions/").concat(t.favoriteSubjectQuestionId),{params:{current_user_id:t.currentUser.id}});case 3:n=e.sent,console.log(n.data),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="いいね!を削除しました",t.isFavorite=!t.isFavorite,t.favoriteSubjectQuestionId=null,t.subjectQuestion.favorite_subject_questions_count-=1,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="いいね!されていません";case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},openSubjectQuestionReplyDialog:function(){this.currentUser?this.subjectQuestionReplyDialog=!0:this.$router.push({path:"/auth/login",query:{message:"ログインが必要です"}})},submitSubjectQuestionReply:function(data){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("current_user_id",t.currentUser.id),n.append("subject_question_reply[content]",data.content),data.image&&n.append("subject_question_reply[image]",data.image),e.prev=4,e.next=7,H.a.post("/subject_questions/".concat(t.subjectQuestion.id,"/subject_question_replies"),n);case 7:o=e.sent,console.log(o),t.$router.push({path:"/subjectQuestions/".concat(t.subjectQuestion.id,"/subjectQuestionReplies/").concat(o.data.id),query:{message:"返信の投稿が完了しました"}}),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="返信を投稿できませんでした";case 18:t.subjectQuestionReplyDialog=!1;case 19:case"end":return e.stop()}}),e,null,[[4,12]])})))()},nextQuestion:function(){var t=this,e=this.subjectQuestions.findIndex((function(e){return e.id===t.subjectQuestion.id}))+1,n=this.subjectQuestions[e],o=this.subjectQuestions[this.subjectQuestions.length-1];this.subjectQuestion.id!==o.id?this.$router.push({path:"/subjectQuestions/".concat(n.id)}):(this.snackbar=!0,this.snackbarColor="blue-grey",this.flashMessage="最後の質問です")},previousQuestion:function(){var t=this,e=this.subjectQuestions.findIndex((function(e){return e.id===t.subjectQuestion.id}))-1,n=this.subjectQuestions[e],o=this.subjectQuestions[0];this.subjectQuestion.id!==o.id?this.$router.push({path:"/subjectQuestions/".concat(n.id)}):(this.snackbar=!0,this.snackbarColor="blue-grey",this.flashMessage="最初の質問です")}}},L=Object(T.a)(K,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex justify-space-between",staticStyle:{"margin-top":"50px","margin-bottom":"10px"}},[e("h2",[t._v("質問詳細(科目別)")]),t._v(" "),e("nuxt-link",{attrs:{to:"/subjectQuestions/allSubjectQuestions"}},[t._v("質問一覧に戻る")])],1),t._v(" "),e(l.a,{staticStyle:{"padding-bottom":"1px"},attrs:{elevation:"8","data-cy":"subject-question-detail"}},[e(j.a,[e(v.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.goToUser(t.user)}}},[e(j.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e(r.a,{attrs:{size:"100"}},[e(m.a,{attrs:{src:t.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(j.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(t.user.name,10)))])])],1)],1)]),t._v(" "),e(v.a,{staticClass:"mt-n2",attrs:{cols:"8"}},[e(d.d,[e("h3",[t._v(t._s(t.subjectQuestion.title))])]),t._v(" "),e(d.b,{staticStyle:{"margin-top":"10px"}},[e("h3",[t._v("科目: "+t._s(t.subjectQuestion.subject))])]),t._v(" "),e(d.c,[e(y.a,{attrs:{value:t.subjectQuestion.content,readonly:"",outlined:"",rounded:"",dense:"","auto-grow":""}})],1),t._v(" "),t.subjectQuestion.image?[e(j.a,[e(v.a,{staticClass:"d-flex justify-center"},[e(m.a,{staticStyle:{cursor:"pointer"},attrs:{src:t.subjectQuestion.image,alt:"画像",contain:"","max-height":"250","max-width":"250"},on:{click:function(e){t.showFullImage=!0}}})],1)],1),t._v(" "),e(j.a,[e(v.a,{staticClass:"d-flex justify-center"},[t._v("\n              *画像をクリックすると拡大できます\n            ")])],1)]:t._e(),t._v(" "),e("br"),t._v(" "),e(d.a,[e(j.a,{staticClass:"d-flex align-center justify-center"},[e(v.a,{attrs:{cols:"4","data-cy":"subject-question-reply-section"}},[e(f.a,[t._v("mdi-comment-text-outline")]),t._v("\n                返信: "+t._s(t.subjectQuestion.subject_question_replies_count)+"件\n            ")],1),t._v(" "),e(v.a,{attrs:{cols:"4"}},[e("favorite-button",{attrs:{currentUser:t.currentUser,user:t.user,isFavorite:t.isFavorite,favoriteCount:t.subjectQuestion.favorite_subject_questions_count},on:{addToFavorite:t.addToFavorite,removeFromFavorite:t.removeFromFavorite}})],1),t._v(" "),e(v.a,{attrs:{cols:"4"}},[e(f.a,[t._v("mdi-calendar-clock")]),t._v("\n              "+t._s(t.subjectQuestion.created_at)+"\n            ")],1)],1)],1)],2),t._v(" "),e(v.a,{staticClass:"d-flex flex-column",staticStyle:{padding:"20px"},attrs:{cols:"2"}},[t.currentUser&&t.user.id==t.currentUser.id?[e(c.a,{staticStyle:{"margin-bottom":"10px"},on:{click:function(e){t.dialog=!0}}},[t._v("編集する")]),t._v(" "),e(c.a,{on:{click:function(e){t.showDeleteConfirmation=!0}}},[t._v("削除する")])]:t._e()],2)],1)],1),t._v(" "),e("br"),e("br"),t._v(" "),e("content-navigator",{attrs:{content:"".concat(t.subjectQuestion.subject,"の質問")},on:{previousContent:t.previousQuestion,nextContent:t.nextQuestion}}),t._v(" "),e("br"),e("br"),t._v(" "),e("hr"),t._v(" "),e("br"),e("br"),e("br"),e("br"),t._v(" "),e(l.a,{attrs:{height:"100px"}},[e(j.a,{staticStyle:{height:"100%"}},[e(v.a,{staticClass:"d-flex justify-center align-center"},[e(c.a,{attrs:{"x-large":"",rounded:"",color:"success",width:"600px"},on:{click:t.openSubjectQuestionReplyDialog}},[t._v("\n        返信を投稿する\n      ")])],1)],1)],1),t._v(" "),e("br"),e("br"),t._v(" "),0!==t.subjectQuestionReplies.length?[e(j.a,[e(v.a,{staticClass:"d-flex justify-center"},[e("h2",[t._v("返信一覧")])])],1),t._v(" "),e("br"),t._v(" "),e(h.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),e("br"),t._v(" "),e("subject-question-subject-question-replies",{attrs:{subjectQuestionReplies:t.subjectQuestionReplyChunk}}),t._v(" "),e("br"),t._v(" "),e(h.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]:[e(j.a,[e(v.a,{staticClass:"d-flex justify-center"},[e("h2",[t._v("返信一覧")])])],1),t._v(" "),e(j.a,[e(v.a,{staticClass:"d-flex justify-center"},[e(o.a,{attrs:{type:"info"}},[t._v("\n        返信は投稿されていません\n        ")])],1)],1)],t._v(" "),e(_.a,{model:{value:t.subjectQuestionReplyDialog,callback:function(e){t.subjectQuestionReplyDialog=e},expression:"subjectQuestionReplyDialog"}},[e(l.a,[e(d.d,{staticStyle:{"justify-content":"center"}},[e("h2",[t._v("返信を投稿する")])]),t._v(" "),e(d.c,[e("reply-form",{on:{submitReply:t.submitSubjectQuestionReply,closeDialog:function(e){t.subjectQuestionReplyDialog=!1}}})],1)],1)],1),t._v(" "),e(_.a,{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(l.a,[e(d.d,{staticStyle:{"justify-content":"center"}},[e("h2",[t._v("質問を編集する")])]),t._v(" "),e(d.c,[e("edit-subject-question",{attrs:{title:t.subjectQuestion.title,content:t.subjectQuestion.content,subject:t.subjectQuestion.subject},on:{submitSubjectQuestion:t.editSubjectQuestion,closeDialog:function(e){t.dialog=!1}}})],1)],1)],1),t._v(" "),e("delete-confirmation-dialog",{attrs:{showDeleteConfirmation:t.showDeleteConfirmation,contentTitle:"質問"},on:{deleteContent:t.deleteSubjectQuestion,closeDeleteConfirmation:function(e){t.showDeleteConfirmation=!1}}}),t._v(" "),e("show-full-image-dialog",{attrs:{showFullImage:t.showFullImage,image:t.subjectQuestion.image},on:{closeShowFullImage:function(e){t.showFullImage=!1}}}),t._v(" "),e("br"),t._v(" "),e(x.a,{attrs:{timeout:3e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.flashMessage))])],2)}),[],!1,null,null,null);e.default=L.exports;installComponents(L,{FavoriteButton:n(586).default,ContentNavigator:n(585).default,DeleteConfirmationDialog:n(577).default,ShowFullImageDialog:n(594).default})}}]);
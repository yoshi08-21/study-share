(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{212:function(t,e,r){"use strict";var n=r(265);e.a=n.a},578:function(t,e,r){"use strict";var n=r(100),o=r(4);e.a=o.a.extend({name:"rippleable",directives:{ripple:n.a},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(data.staticClass="v-input--selection-controls__ripple",data.directives=data.directives||[],data.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",data)):null}}})},583:function(t,e,r){var content=r(584);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("5939d713",content,!0,{sourceMap:!1})},584:function(t,e,r){var n=r(17)(!1);n.push([t.i,".v-rating{max-width:100%;white-space:nowrap}.v-rating .v-icon{padding:.5rem;border-radius:50%;-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none}.v-rating .v-icon:after{display:none}.v-application--is-ltr .v-rating .v-icon{transform:scaleX(1)}.v-application--is-rtl .v-rating .v-icon{transform:scaleX(-1)}.v-rating--readonly .v-icon{pointer-events:none}.v-rating--dense .v-icon{padding:.1rem}",""]),t.exports=n},587:function(t,e,r){var content=r(588);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("5db1c400",content,!0,{sourceMap:!1})},588:function(t,e,r){var n=r(17)(!1);n.push([t.i,'.theme--light.v-alert .v-alert--prominent .v-alert__icon:after{background:rgba(0,0,0,.12)}.theme--dark.v-alert .v-alert--prominent .v-alert__icon:after{background:hsla(0,0%,100%,.12)}.v-sheet.v-alert{border-radius:4px}.v-sheet.v-alert:not(.v-sheet--outlined){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-sheet.v-alert.v-sheet--shaped{border-radius:24px 4px}.v-alert{display:block;font-size:16px;margin-bottom:16px;padding:16px;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-alert:not(.v-sheet--tile){border-radius:4px}.v-application--is-ltr .v-alert>.v-alert__content,.v-application--is-ltr .v-alert>.v-icon{margin-right:16px}.v-application--is-rtl .v-alert>.v-alert__content,.v-application--is-rtl .v-alert>.v-icon{margin-left:16px}.v-application--is-ltr .v-alert>.v-icon+.v-alert__content{margin-right:0}.v-application--is-rtl .v-alert>.v-icon+.v-alert__content{margin-left:0}.v-application--is-ltr .v-alert>.v-alert__content+.v-icon{margin-right:0}.v-application--is-rtl .v-alert>.v-alert__content+.v-icon{margin-left:0}.v-alert__border{border-style:solid;border-width:4px;content:"";position:absolute}.v-alert__border:not(.v-alert__border--has-color){opacity:.26}.v-alert__border--left,.v-alert__border--right{bottom:0;top:0}.v-alert__border--bottom,.v-alert__border--top{left:0;right:0}.v-alert__border--bottom{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0}.v-application--is-ltr .v-alert__border--left{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.v-application--is-ltr .v-alert__border--right,.v-application--is-rtl .v-alert__border--left{border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0}.v-application--is-rtl .v-alert__border--right{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.v-alert__border--top{border-top-left-radius:inherit;border-top-right-radius:inherit;top:0}.v-alert__content{flex:1 1 auto}.v-application--is-ltr .v-alert__dismissible{margin:-16px -8px -16px 8px}.v-application--is-rtl .v-alert__dismissible{margin:-16px 8px -16px -8px}.v-alert__icon{align-self:flex-start;border-radius:50%;height:24px;min-width:24px;position:relative}.v-application--is-ltr .v-alert__icon{margin-right:16px}.v-application--is-rtl .v-alert__icon{margin-left:16px}.v-alert__icon.v-icon{font-size:24px}.v-alert__wrapper{align-items:center;border-radius:inherit;display:flex}.v-application--is-ltr .v-alert--border.v-alert--prominent .v-alert__icon{margin-left:8px}.v-application--is-rtl .v-alert--border.v-alert--prominent .v-alert__icon{margin-right:8px}.v-alert--dense{padding-top:8px;padding-bottom:8px}.v-alert--dense .v-alert__border{border-width:medium}.v-alert--outlined{background:transparent!important;border:thin solid!important}.v-alert--outlined .v-alert__icon{color:inherit!important}.v-alert--prominent .v-alert__icon{align-self:center;height:48px;min-width:48px}.v-alert--prominent .v-alert__icon.v-icon{font-size:32px}.v-alert--prominent .v-alert__icon.v-icon:after{background:currentColor!important;border-radius:50%;bottom:0;content:"";left:0;opacity:.16;position:absolute;right:0;top:0}.v-alert--prominent.v-alert--dense .v-alert__icon.v-icon:after{transform:scale(1)}.v-alert--text{background:transparent!important}.v-alert--text:before{background-color:currentColor;border-radius:inherit;bottom:0;content:"";left:0;opacity:.12;position:absolute;pointer-events:none;right:0;top:0}',""]),t.exports=n},598:function(t,e,r){"use strict";r(22),r(266),r(76),r(583);var n=r(89),o=r(24),l=r(122),c=r(171),v=r(578),d=r(20),h=r(1),f=r(7);e.a=Object(f.a)(o.a,l.a,v.a,c.a,d.a).extend({name:"v-rating",props:{backgroundColor:{type:String,default:"accent"},color:{type:String,default:"primary"},clearable:Boolean,dense:Boolean,emptyIcon:{type:String,default:"$ratingEmpty"},fullIcon:{type:String,default:"$ratingFull"},halfIcon:{type:String,default:"$ratingHalf"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,size:[Number,String],value:{type:Number,default:0},iconLabel:{type:String,default:"$vuetify.rating.ariaLabel.icon"}},data:function(){return{hoverIndex:-1,internalValue:this.value}},computed:{directives:function(){return this.readonly||!this.ripple?[]:[{name:"ripple",value:{circle:!0}}]},iconProps:function(){var t=this.$props,e=t.dark,r=t.large,n=t.light,o=t.medium,small=t.small;return{dark:e,large:r,light:n,medium:o,size:t.size,small:small,xLarge:t.xLarge,xSmall:t.xSmall}},isHovering:function(){return this.hover&&this.hoverIndex>=0}},watch:{internalValue:function(t){t!==this.value&&this.$emit("input",t)},value:function(t){this.internalValue=t}},methods:{createClickFn:function(i){var t=this;return function(e){if(!t.readonly){var r=t.genHoverIndex(e,i);t.clearable&&t.internalValue===r?t.internalValue=0:t.internalValue=r}}},createProps:function(i){var t={index:i,value:this.internalValue,click:this.createClickFn(i),isFilled:Math.floor(this.internalValue)>i,isHovered:Math.floor(this.hoverIndex)>i};return this.halfIncrements&&(t.isHalfHovered=!t.isHovered&&(this.hoverIndex-i)%1>0,t.isHalfFilled=!t.isFilled&&(this.internalValue-i)%1>0),t},genHoverIndex:function(t,i){var e=this.isHalfEvent(t);return this.halfIncrements&&this.$vuetify.rtl&&(e=!e),i+(e?.5:1)},getIconName:function(t){var e=this.isHovering?t.isHovered:t.isFilled,r=this.isHovering?t.isHalfHovered:t.isHalfFilled;return e?this.fullIcon:r?this.halfIcon:this.emptyIcon},getColor:function(t){if(this.isHovering){if(t.isHovered||t.isHalfHovered)return this.color}else if(t.isFilled||t.isHalfFilled)return this.color;return this.backgroundColor},isHalfEvent:function(t){if(this.halfIncrements){var rect=t.target&&t.target.getBoundingClientRect();if(rect&&t.pageX-rect.left<rect.width/2)return!0}return!1},onMouseEnter:function(t,i){var e=this;this.runDelay("open",(function(){e.hoverIndex=e.genHoverIndex(t,i)}))},onMouseLeave:function(){var t=this;this.runDelay("close",(function(){return t.hoverIndex=-1}))},genItem:function(i){var t=this,e=this.createProps(i);if(this.$scopedSlots.item)return this.$scopedSlots.item(e);var r={click:e.click};return this.hover&&(r.mouseenter=function(e){return t.onMouseEnter(e,i)},r.mouseleave=this.onMouseLeave,this.halfIncrements&&(r.mousemove=function(e){return t.onMouseEnter(e,i)})),this.$createElement(n.a,this.setTextColor(this.getColor(e),{attrs:{"aria-label":this.$vuetify.lang.t(this.iconLabel,i+1,Number(this.length))},directives:this.directives,props:this.iconProps,on:r}),[this.getIconName(e)])}},render:function(t){var e=this,r=Object(h.h)(Number(this.length)).map((function(i){return e.genItem(i)}));return t("div",{staticClass:"v-rating",class:{"v-rating--readonly":this.readonly,"v-rating--dense":this.dense}},r)}})},601:function(t,e,r){"use strict";r(11),r(13),r(14),r(6),r(15),r(12),r(16);var n=r(2),o=(r(40),r(587),r(112)),l=r(212),c=r(89),v=r(50),d=r(20),h=r(269),f=r(7),_=r(10);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=Object(f.a)(o.a,v.a,h.a).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"==typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var data={staticClass:"v-alert__border",class:Object(n.a)({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&((data=this.setBackgroundColor(this.computedColor,data)).class["v-alert__border--has-color"]=!0),this.$createElement("div",data)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(l.a,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(c.a,{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(c.a,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=x(x({},o.a.options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||d.a.options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(_.a)("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var data={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};this.coloredBorder||(data=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,data));return this.$createElement("div",data,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},602:function(t,e,r){"use strict";var n=r(265),o=r(255),l=r(111),c=r(565),v=r(164),d=r(209),h=r(598),f=r(564),_=r(566),m=(r(35),r(26)),x=(r(82),r(119)),y=r(44),k={props:{books:[]},mixins:[x.a],data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:"テストメッセージ"}},methods:{addToFavorites:function(t,e){var r=this;return Object(m.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),!r.currentUser){n.next=22;break}return n.prev=2,n.next=5,y.a.post("/books/".concat(t.id,"/favorite_books"),{current_user_id:r.currentUser.id});case 5:o=n.sent,console.log(o.data),t.check_favorite=1,t.favorite_books_count+=1,r.snackbarColor="primary",r.snackbar=!0,r.flashMessage="お気に入りに追加しました",n.next=20;break;case 14:n.prev=14,n.t0=n.catch(2),console.log(n.t0),r.snackbarColor="red accent-2",r.snackbar=!0,r.flashMessage="すでにお気に入りに登録されています";case 20:n.next=23;break;case 22:r.$router.push({path:"/auth/login",query:{message:"ログインが必要です"}});case 23:case"end":return n.stop()}}),n,null,[[2,14]])})))()},removeFromFavorite:function(t,e){var r=this;return Object(m.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,y.a.delete("/favorite_books/destroy_from_item_list",{params:{current_user_id:r.currentUser.id,book_id:t.id}});case 4:o=n.sent,console.log(o),t.favorite_books_count-=1,t.check_favorite=0,r.snackbar=!0,r.snackbarColor="primary",r.flashMessage="お気に入りから削除しました",n.next=19;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0),r.snackbarColor="red accent-2",r.snackbar=!0,r.flashMessage="お気に入りに登録されていません";case 19:case"end":return n.stop()}}),n,null,[[1,13]])})))()}}},w=r(69),component=Object(w.a)(k,(function(){var t=this,e=t._self._c;return e("div",[t._l(t.books,(function(r,_){return e(f.a,{key:_,staticClass:"justify-center",attrs:{"mb-5":"","data-cy":"each-books"}},[e(c.a,{attrs:{cols:"10"}},[e(o.a,{attrs:{elevation:"8",height:"240"}},[e(f.a,[e(c.a,{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[r.image?e("div",{staticClass:"d-flex justify-center",staticStyle:{height:"210px"}},[e(d.a,{attrs:{src:r.image,alt:"画像",contain:"","max-height":"200","max-width":"180"}})],1):t._e()]),t._v(" "),e(c.a,{staticClass:"mt-n4",attrs:{cols:"7"}},[e("div",{staticStyle:{height:"107px"}},[e(l.d,[e("nuxt-link",{attrs:{to:"/books/".concat(r.id)}},[t._v(t._s(t.$truncate(r.name,50)))])],1),t._v(" "),e(l.b,{staticStyle:{"margin-top":"-20px"}},[e(f.a,{staticClass:"d-flex align-center"},[e(c.a,{attrs:{cols:"4"}},[e(h.a,{attrs:{readonly:!0,"background-color":"orange lighten-3",color:"orange",dense:""},model:{value:r.average_rating,callback:function(e){t.$set(r,"average_rating",e)},expression:"book.average_rating"}})],1),t._v(" "),e(c.a,{attrs:{cols:"3"}},[e("h2",[t._v("\n                      ("+t._s(r.average_rating)+")\n                    ")])])],1)],1)],1),t._v(" "),e(l.c,[e("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("科目: "+t._s(r.subject))]),t._v(" "),e("h4",[t._v("著者: "+t._s(r.author))]),t._v(" "),e("h4",[t._v("出版社: "+t._s(r.publisher))])]),t._v(" "),e(l.a,[e(f.a,{staticClass:"d-flex align-center justify-center"},[e(c.a,{attrs:{cols:"4"}},[e(v.a,[t._v("mdi-comment-text-outline")]),t._v("\n                  レビュー: "+t._s(r.reviews_count)+"件\n                ")],1),t._v(" "),e(c.a,{attrs:{cols:"4"}},[e(v.a,[t._v("mdi-comment-text-outline")]),t._v("\n                  質問: "+t._s(r.questions_count)+"件\n                ")],1),t._v(" "),e(c.a,{attrs:{cols:"4","data-cy":"each-book-favorite-section"}},[e(v.a,[t._v("mdi-heart-multiple")]),t._v("\n                  お気に入り ("+t._s(r.favorite_books_count)+")\n                ")],1)],1)],1)],1),t._v(" "),e(c.a,{staticClass:"d-flex justify-center ml-n5",attrs:{cols:"2"}},[t.currentUser?[0==r.check_favorite?e(n.a,{staticClass:"mt-8",on:{click:function(e){return t.addToFavorites(r,e)}}},[t._v("お気に入り追加")]):e(n.a,{staticClass:"mt-8",on:{click:function(e){return t.removeFromFavorite(r,e)}}},[t._v("お気に入り削除")])]:t._e()],2)],1)],1)],1)],1)})),t._v(" "),e(_.a,{attrs:{timeout:3e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.flashMessage))])],2)}),[],!1,null,null,null);e.a=component.exports},822:function(t,e,r){"use strict";r.r(e);var n=r(800),o=r(831),l=r(26),c=(r(82),r(602)),v=r(605),d=r(599),h=r(606),f=r(600),_=r(607),m=r(359),x=r(603),y=r(44),k={middleware:m.default,components:{EachBooks:c.a,EachReviews:v.a,EachQuestions:d.a,EachReplies:h.a,EachSubjectQuestions:f.a,EachSubjectQuestionReplies:_.a,EachSurveys:x.a},asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,e.prev=1,e.next=4,y.a.get("/browsing_histories",{params:{current_user_id:r.getters["auth/getCurrentUser"].id}});case 4:return n=e.sent,console.log(n.data),e.abrupt("return",{watchedBooks:n.data.book_browsing_histories,watchedReviews:n.data.review_browsing_histories,watchedQuestions:n.data.question_browsing_histories,watchedSubjectQuestions:n.data.subject_question_browsing_histories,watchedReplies:n.data.reply_browsing_histories,watchedSubjectQuestionReplies:n.data.subject_question_reply_browsing_histories,watchedSurveys:n.data.survey_browsing_histories});case 9:throw e.prev=9,e.t0=e.catch(1),console.log(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},data:function(){return{tab:0,tabs:[{label:"閲覧した参考書"},{label:"閲覧したレビュー"},{label:"閲覧した質問"},{label:"閲覧した科目別質問"},{label:"閲覧した返信"},{label:"閲覧した返信(科目別質問)"},{label:"閲覧したアンケート"}]}}},w=r(69),component=Object(w.a)(k,(function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticStyle:{"text-align":"center"}},[t._v("閲覧履歴一覧")]),t._v(" "),e("br"),t._v(" "),e(o.a,{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(r,o){return e(n.a,{key:o},[t._v("\n      "+t._s(r.label)+"\n    ")])})),1),t._v(" "),e("p",{staticStyle:{"margin-top":"10px"}},[t._v("*閲覧履歴は各10件まで保存されます")]),t._v(" "),0===t.tab?[e("br"),t._v(" "),e("each-books",{attrs:{books:t.watchedBooks}})]:1===t.tab?[e("br"),t._v(" "),e("each-reviews",{attrs:{reviews:t.watchedReviews}})]:2===t.tab?[e("br"),t._v(" "),e("each-questions",{attrs:{questions:t.watchedQuestions}})]:3===t.tab?[e("br"),t._v(" "),e("each-subject-questions",{attrs:{subjectQuestions:t.watchedSubjectQuestions}})]:4===t.tab?[e("br"),t._v(" "),e("each-replies",{attrs:{replies:t.watchedReplies}})]:5===t.tab?[e("br"),t._v(" "),e("each-subject-question-replies",{attrs:{subjectQuestionReplies:t.watchedSubjectQuestionReplies}})]:6===t.tab?[e("br"),t._v(" "),e("each-surveys",{attrs:{surveys:t.watchedSurveys}})]:t._e()],2)}),[],!1,null,null,null);e.default=component.exports}}]);
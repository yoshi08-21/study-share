(window.webpackJsonp=window.webpackJsonp||[]).push([[14,7,9,10],{574:function(t,e,n){"use strict";e.a={methods:{goToUser:function(t){this.currentUser&&this.currentUser.id===t.id?this.$router.push({path:"/mypage"}):this.$router.push({path:"/users/".concat(t.id)})}}}},576:function(t,e,n){"use strict";e.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},577:function(t,e,n){"use strict";n.r(e);var r=n(602),o=n(265),l=n(255),c=n(111),d=n(565),v=n(262),h=n(564),f={props:{showDeleteConfirmation:Boolean,contentTitle:String},data:function(){return{localShowDeleteConfirmation:this.showDeleteConfirmation}},watch:{showDeleteConfirmation:function(t){this.localShowDeleteConfirmation=t}},methods:{deleteContent:function(){this.$emit("deleteContent")},closeDeleteConfirmation:function(){this.$emit("closeDeleteConfirmation")}}},m=n(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{width:"800"},model:{value:t.localShowDeleteConfirmation,callback:function(e){t.localShowDeleteConfirmation=e},expression:"localShowDeleteConfirmation"}},[e(l.a,{attrs:{height:"300"}},[e(h.a,{staticClass:"d-flex justify-center"},[e(d.a,[e(c.d,{staticStyle:{height:"120px"}},[e(r.a,{attrs:{type:"error",dense:"",text:"",prominent:"",border:"left",width:"100%"}},[t._v("\n            削除した"+t._s(t.contentTitle)+"は復元できません!\n          ")])],1),t._v(" "),e(c.c,{staticStyle:{"text-align":"center",height:"90px"}},[e("h1",[t._v("\n            "+t._s(t.contentTitle)+"を削除しますか？\n          ")])]),t._v(" "),e(c.a,[e(h.a,[e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"6"}},[e(o.a,{attrs:{large:"",width:"300",color:"error",dark:"","data-cy":"delete-confirm-button"},on:{click:t.deleteContent}},[t._v("\n                削除する\n              ")])],1),t._v(" "),e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"6"}},[e(o.a,{attrs:{large:"",width:"300"},on:{click:t.closeDeleteConfirmation}},[t._v("\n                戻る\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},578:function(t,e,n){"use strict";var r=n(100),o=n(4);e.a=o.a.extend({name:"rippleable",directives:{ripple:r.a},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(data.staticClass="v-input--selection-controls__ripple",data.directives=data.directives||[],data.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",data)):null}}})},579:function(t,e,n){n(9)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},580:function(t,e,n){var content=n(581);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("7f6d4ad6",content,!0,{sourceMap:!1})},581:function(t,e,n){var r=n(17)(!1);r.push([t.i,".theme--light.v-pagination .v-pagination__item{background:#fff;color:rgba(0,0,0,.87)}.theme--light.v-pagination .v-pagination__item--active{color:#fff}.theme--light.v-pagination .v-pagination__navigation{background:#fff}.theme--dark.v-pagination .v-pagination__item{background:#1e1e1e;color:#fff}.theme--dark.v-pagination .v-pagination__item--active{color:#fff}.theme--dark.v-pagination .v-pagination__navigation{background:#1e1e1e}.v-pagination{align-items:center;display:inline-flex;list-style-type:none;justify-content:center;margin:0;max-width:100%;width:100%}.v-pagination.v-pagination{padding-left:0}.v-pagination>li{align-items:center;display:flex}.v-pagination--circle .v-pagination__item,.v-pagination--circle .v-pagination__more,.v-pagination--circle .v-pagination__navigation{border-radius:50%}.v-pagination--disabled{pointer-events:none;opacity:.6}.v-pagination__item{background:transparent;border-radius:4px;font-size:1rem;height:34px;margin:.3rem;min-width:34px;padding:0 5px;text-decoration:none;transition:.3s cubic-bezier(0,0,.2,1);width:auto;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-pagination__item--active{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.v-pagination__navigation{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);border-radius:4px;display:inline-flex;justify-content:center;align-items:center;text-decoration:none;height:32px;width:32px;margin:.3rem 10px}.v-pagination__navigation .v-icon{transition:.2s cubic-bezier(.4,0,.6,1);vertical-align:middle}.v-pagination__navigation--disabled{opacity:.6;pointer-events:none}.v-pagination__more{margin:.3rem;display:inline-flex;align-items:flex-end;justify-content:center;height:32px;width:32px}",""]),t.exports=r},582:function(t,e,n){"use strict";e.a={methods:{checkFileSize:function(t){console.log(t);t&&t.size>3145728?(this.errorMessage="添付できるファイルは3MBまでです",this.error=!0):(this.errorMessage="",this.error=!1)}}}},583:function(t,e,n){var content=n(584);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("5939d713",content,!0,{sourceMap:!1})},584:function(t,e,n){var r=n(17)(!1);r.push([t.i,".v-rating{max-width:100%;white-space:nowrap}.v-rating .v-icon{padding:.5rem;border-radius:50%;-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none}.v-rating .v-icon:after{display:none}.v-application--is-ltr .v-rating .v-icon{transform:scaleX(1)}.v-application--is-rtl .v-rating .v-icon{transform:scaleX(-1)}.v-rating--readonly .v-icon{pointer-events:none}.v-rating--dense .v-icon{padding:.1rem}",""]),t.exports=r},585:function(t,e,n){"use strict";n.r(e);var r=n(265),o=n(565),l=n(164),c=n(564),d={props:{content:String},methods:{previousContent:function(){this.$emit("previousContent")},nextContent:function(){this.$emit("nextContent")}}},v=n(69),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"d-flex justify-space-between"},[e(o.a,{staticClass:"d-flex justify-start",attrs:{cols:"6"}},[e(r.a,{attrs:{"x-large":"","data-cy":"previous-content-button"},on:{click:t.previousContent}},[e(l.a,[t._v("mdi-arrow-left-bold")]),t._v("前の"+t._s(t.content))],1)],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-end",attrs:{cols:"6"}},[e(r.a,{attrs:{"x-large":"","data-cy":"next-content-button"},on:{click:t.nextContent}},[t._v("次の"+t._s(t.content)),e(l.a,[t._v("mdi-arrow-right-bold")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},586:function(t,e,n){"use strict";n.r(e);var r=n(265),o=n(164),l=(n(22),{props:{currentUser:Object,user:Object,isFavorite:Boolean,favoriteCount:Number},methods:{addToFavorite:function(){this.$emit("addToFavorite")},removeFromFavorite:function(){this.$emit("removeFromFavorite")}}}),c=n(69),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{attrs:{"data-cy":"favorite-section"}},[t.currentUser&&t.user.id!==t.currentUser.id?[t.isFavorite?[e(r.a,{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"pink","data-cy":"remove-favorite-button"},on:{click:t.removeFromFavorite}},[e(o.a,{attrs:{dark:""}},[t._v("\n          mdi-heart\n        ")])],1),t._v("\n      ("+t._s(t.favoriteCount)+")\n    ")]:[e(r.a,{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"pink",outlined:"","data-cy":"add-favorite-button"},on:{click:t.addToFavorite}},[e(o.a,{attrs:{dark:""}},[t._v("\n          mdi-heart-plus-outline\n        ")])],1),t._v("\n      ("+t._s(t.favoriteCount)+")\n    ")]]:[e(o.a,[t._v("mdi-heart-multiple")]),t._v("\n    いいね! ("+t._s(t.favoriteCount)+")\n  ")]],2)}),[],!1,null,null,null);e.default=component.exports},594:function(t,e,n){"use strict";n.r(e);var r=n(265),o=n(255),l=n(111),c=n(565),d=n(262),v=n(209),h=n(564),f={props:{showFullImage:Boolean,image:String},data:function(){return{localShowFullImage:this.showFullImage}},watch:{showFullImage:function(t){this.localShowFullImage=t}}},m=n(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(d.a,{model:{value:t.localShowFullImage,callback:function(e){t.localShowFullImage=e},expression:"localShowFullImage"}},[e(o.a,{staticStyle:{padding:"10px"},attrs:{"max-height":"800px"}},[e(h.a,[e(c.a,{staticClass:"d-flex justify-start",attrs:{cols:"6"}},[e(l.d,[t._v("拡大画像")])],1),t._v(" "),e(c.a,{staticClass:"d-flex justify-end align-center",attrs:{cols:"6"}},[e(r.a,{on:{click:function(e){return t.$emit("closeShowFullImage")}}},[t._v("閉じる")])],1)],1),t._v(" "),e("hr"),t._v(" "),e(h.a,{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[e(c.a,{staticClass:"d-flex justify-center"},[e(v.a,{attrs:{src:t.image,"max-height":"500","max-width":"500",contain:""}})],1)],1),t._v(" "),e(h.a,[e(c.a,{staticClass:"d-flex justify-center"},[e(r.a,{on:{click:function(e){return t.$emit("closeShowFullImage")}}},[t._v("閉じる")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},596:function(t,e,n){"use strict";n(11),n(13),n(14),n(15),n(12),n(16);var r=n(60),o=n(2),l=(n(22),n(579),n(32),n(48),n(6),n(47),n(76),n(580),n(89)),c=n(121),d=n(24),v=n(267),h=n(20),f=n(7);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}e.a=Object(f.a)(d.a,Object(v.a)({onVisible:["init"]}),h.a).extend({name:"v-pagination",directives:{Resize:c.a},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1==0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var n=e%2==0?1:0,o=Math.floor(e/2),l=this.length-o+1+n;if(this.value>o&&this.value<l){var c=this.length,d=this.value-o+2,v=this.value+o-2-n,h=v+1===c-1?v+1:"...";return[1,d-1==2?2:"..."].concat(Object(r.a)(this.range(d,v)),[h,this.length])}if(this.value===o){var f=this.value+o-1-n;return[].concat(Object(r.a)(this.range(1,f)),["...",this.length])}if(this.value===l){var m=this.value-o+1;return[1,"..."].concat(Object(r.a)(this.range(m,this.length)))}return[].concat(Object(r.a)(this.range(1,o)),["..."],Object(r.a)(this.range(l,this.length)))}},watch:{value:function(){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){for(var n=[],i=t=t>0?t:1;i<=e;i++)n.push(i);return n},genIcon:function(t,e,n,r,label){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":n},attrs:{disabled:n,type:"button","aria-label":label},on:n?{}:{click:r}},[t(l.a,[e])])])},genItem:function(t,i){var e=this,n=i===this.value&&(this.color||"primary"),r=i===this.value,o=r?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(n,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":i===this.value},attrs:{type:"button","aria-current":r,"aria-label":this.$vuetify.lang.t(o,i)},on:{click:function(){return e.$emit("input",i)}}}),[i.toString()])},genItems:function(t){var e=this;return this.items.map((function(i,n){return t("li",{key:n},[isNaN(Number(i))?t("span",{class:"v-pagination__more"},[i.toString()]):e.genItem(t,i)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},598:function(t,e,n){"use strict";n(22),n(266),n(76),n(583);var r=n(89),o=n(24),l=n(122),c=n(171),d=n(578),v=n(20),h=n(1),f=n(7);e.a=Object(f.a)(o.a,l.a,d.a,c.a,v.a).extend({name:"v-rating",props:{backgroundColor:{type:String,default:"accent"},color:{type:String,default:"primary"},clearable:Boolean,dense:Boolean,emptyIcon:{type:String,default:"$ratingEmpty"},fullIcon:{type:String,default:"$ratingFull"},halfIcon:{type:String,default:"$ratingHalf"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,size:[Number,String],value:{type:Number,default:0},iconLabel:{type:String,default:"$vuetify.rating.ariaLabel.icon"}},data:function(){return{hoverIndex:-1,internalValue:this.value}},computed:{directives:function(){return this.readonly||!this.ripple?[]:[{name:"ripple",value:{circle:!0}}]},iconProps:function(){var t=this.$props,e=t.dark,n=t.large,r=t.light,o=t.medium,small=t.small;return{dark:e,large:n,light:r,medium:o,size:t.size,small:small,xLarge:t.xLarge,xSmall:t.xSmall}},isHovering:function(){return this.hover&&this.hoverIndex>=0}},watch:{internalValue:function(t){t!==this.value&&this.$emit("input",t)},value:function(t){this.internalValue=t}},methods:{createClickFn:function(i){var t=this;return function(e){if(!t.readonly){var n=t.genHoverIndex(e,i);t.clearable&&t.internalValue===n?t.internalValue=0:t.internalValue=n}}},createProps:function(i){var t={index:i,value:this.internalValue,click:this.createClickFn(i),isFilled:Math.floor(this.internalValue)>i,isHovered:Math.floor(this.hoverIndex)>i};return this.halfIncrements&&(t.isHalfHovered=!t.isHovered&&(this.hoverIndex-i)%1>0,t.isHalfFilled=!t.isFilled&&(this.internalValue-i)%1>0),t},genHoverIndex:function(t,i){var e=this.isHalfEvent(t);return this.halfIncrements&&this.$vuetify.rtl&&(e=!e),i+(e?.5:1)},getIconName:function(t){var e=this.isHovering?t.isHovered:t.isFilled,n=this.isHovering?t.isHalfHovered:t.isHalfFilled;return e?this.fullIcon:n?this.halfIcon:this.emptyIcon},getColor:function(t){if(this.isHovering){if(t.isHovered||t.isHalfHovered)return this.color}else if(t.isFilled||t.isHalfFilled)return this.color;return this.backgroundColor},isHalfEvent:function(t){if(this.halfIncrements){var rect=t.target&&t.target.getBoundingClientRect();if(rect&&t.pageX-rect.left<rect.width/2)return!0}return!1},onMouseEnter:function(t,i){var e=this;this.runDelay("open",(function(){e.hoverIndex=e.genHoverIndex(t,i)}))},onMouseLeave:function(){var t=this;this.runDelay("close",(function(){return t.hoverIndex=-1}))},genItem:function(i){var t=this,e=this.createProps(i);if(this.$scopedSlots.item)return this.$scopedSlots.item(e);var n={click:e.click};return this.hover&&(n.mouseenter=function(e){return t.onMouseEnter(e,i)},n.mouseleave=this.onMouseLeave,this.halfIncrements&&(n.mousemove=function(e){return t.onMouseEnter(e,i)})),this.$createElement(r.a,this.setTextColor(this.getColor(e),{attrs:{"aria-label":this.$vuetify.lang.t(this.iconLabel,i+1,Number(this.length))},directives:this.directives,props:this.iconProps,on:n}),[this.getIconName(e)])}},render:function(t){var e=this,n=Object(h.h)(Number(this.length)).map((function(i){return e.genItem(i)}));return t("div",{staticClass:"v-rating",class:{"v-rating--readonly":this.readonly,"v-rating--dense":this.dense}},n)}})},620:function(t,e,n){"use strict";var r=n(602),o=n(801),l=n(625),c=n(567),d=n(213),v=n(582),h={components:{VTextarea:c.a,SubmitButton:d.default},mixins:[v.a],data:function(){return{content:"",contentRules:[function(t){return!!t||"本文を入力してください"},function(t){return(t||"").length<=1e3||"最大入力文字数は1000文字です"}],selectedFile:null,errorMessage:"",error:!1}},methods:{submitForm:function(){this.$emit("submitReply",{content:this.content,image:this.selectedFile})}}},f=n(69),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" "),e(l.a,[e(c.a,{attrs:{outlined:"",counter:"",label:"本文",rules:t.contentRules,"data-cy":"create-content-field"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v("\n    *画像を添付できます(「.jpeg」「.jpg」「.png」のみ添付できます)\n    "),e("br"),t._v("\n    *添付できる画像のファイルサイズは3MBまでです\n    "),e("br"),e("br"),t._v(" "),e(o.a,{staticStyle:{width:"500px"},attrs:{accept:"image/jpeg, image/png","show-size":"","truncate-length":"15",outlined:"",label:"ファイルを選択","prepend-icon":"mdi-image-plus"},on:{change:t.checkFileSize},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}}),t._v(" "),t.errorMessage?[e(r.a,{attrs:{type:"error",dense:"",text:"",border:"left"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")])]:t._e(),t._v(" "),e("submit-button",{attrs:{error:t.error,buttonTitle:"投稿する"},on:{submitForm:t.submitForm,closeDialog:function(e){return t.$emit("closeDialog")}}})],2)],1)}),[],!1,null,null,null);e.a=component.exports;installComponents(component,{SubmitButton:n(213).default})},621:function(t,e,n){"use strict";var r=n(255),o=n(111),l=n(565),c=n(164),d=n(209),v=n(598),h=n(564),f=(n(35),{props:{book:Object},data:function(){return{bookAverageRating:this.book.average_rating}}}),m=n(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(r.a,{attrs:{"min-height":"300"}},[e(h.a,[e(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[t.book.image?e("div",[e(d.a,{attrs:{src:t.book.image,alt:"画像",contain:"",haight:"180",width:"160"}})],1):t._e()]),t._v(" "),e(l.a,{attrs:{cols:"7"}},[e(o.d,[e("h3",[t._v(" "+t._s(t.book.name))])]),t._v(" "),e(o.b,{staticStyle:{"margin-top":"-20px"}},[e(h.a,{staticClass:"d-flex align-center"},[e(l.a,{attrs:{cols:"4"}},[e(v.a,{attrs:{readonly:!0,"background-color":"orange lighten-3",color:"orange",dense:"",large:""},model:{value:t.bookAverageRating,callback:function(e){t.bookAverageRating=e},expression:"bookAverageRating"}})],1),t._v(" "),e(l.a,{attrs:{cols:"3"}},[e("h2",[t._v("\n              ("+t._s(t.book.average_rating)+")\n            ")])])],1)],1),t._v(" "),e(o.c,[e("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("科目: "+t._s(t.book.subject))]),t._v(" "),e("h4",[t._v("作者: "+t._s(t.book.author))]),t._v(" "),e("h4",[t._v("出版社: "+t._s(t.book.publisher))])]),t._v(" "),e("br"),e("br"),t._v(" "),e(o.a,[e(h.a,{staticClass:"d-flex align-center"},[e(l.a,{attrs:{cols:"3","data-cy":"book-review-section"}},[e(c.a,[t._v("mdi-comment-text-outline")]),t._v("\n            レビュー: "+t._s(t.book.reviews_count)+"件\n          ")],1),t._v(" "),e(l.a,{attrs:{cols:"3","data-cy":"book-question-section"}},[e(c.a,[t._v("mdi-comment-question-outline")]),t._v("\n            質問: "+t._s(t.book.questions_count)+"件\n          ")],1),t._v(" "),e(l.a,{attrs:{cols:"3","data-cy":"book-favorite-section"}},[e(c.a,[t._v("mdi-heart-multiple")]),t._v("\n            お気に入り ("+t._s(t.book.favorite_books_count)+")\n          ")],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports},809:function(t,e,n){"use strict";n.r(e);var r=n(602),o=n(254),l=n(265),c=n(255),d=n(111),v=n(565),h=n(262),f=n(164),m=n(209),_=n(596),x=n(564),y=n(566),k=n(567),C=(n(35),n(30)),w=n(26),j=(n(82),n(6),n(49),n(56),n(32),n(55),n(268),n(801)),F=n(625),S=n(162),I=n(213),$=n(582),D={props:{title:String,content:String},components:{VTextField:S.a,VTextarea:k.a,SubmitButton:I.default},mixins:[$.a],data:function(){return{editedTitle:this.title,editedContent:this.content,titleRules:[function(t){return!!t||"タイトルを入力してください"},function(t){return(t||"").length<=60||"最大入力文字数は60文字です"}],contentRules:[function(t){return!!t||"本文を入力してください"},function(t){return(t||"").length<=1e3||"最大入力文字数は1000文字です"}],selectedFile:null,errorMessage:"",error:!1}},methods:{submitForm:function(){this.$emit("submitQuestion",{title:this.editedTitle,content:this.editedContent,image:this.selectedFile})}}},O=n(69),component=Object(O.a)(D,(function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" "),e(F.a,[e(S.a,{attrs:{counter:"",label:"タイトル",rules:t.titleRules,"data-cy":"edit-title-field"},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}}),t._v(" "),e(k.a,{attrs:{outlined:"",counter:"",label:"本文",rules:t.contentRules,"data-cy":"edit-content-field"},model:{value:t.editedContent,callback:function(e){t.editedContent=e},expression:"editedContent"}}),t._v(" "),e("br"),t._v("\n    *添付できる画像のファイルサイズは3MBまでです\n    "),e("br"),e("br"),t._v(" "),e(j.a,{staticStyle:{width:"500px"},attrs:{accept:"image/jpeg, image/png","show-size":"","truncate-length":"15",outlined:"",label:"ファイルを選択","prepend-icon":"mdi-image-plus"},on:{change:t.checkFileSize},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}}),t._v(" "),t.errorMessage?[e(r.a,{attrs:{type:"error",dense:"",text:"",border:"left"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")])]:t._e(),t._v(" "),e("submit-button",{attrs:{error:t.error,buttonTitle:"編集する"},on:{submitForm:t.submitForm,closeDialog:function(e){return t.$emit("closeDialog")}}})],2)],1)}),[],!1,null,null,null),M=component.exports;installComponents(component,{SubmitButton:n(213).default});var R=n(119),T={props:{replies:[]},mixins:[R.a]},B=Object(O.a)(T,(function(){var t=this,e=t._self._c;return e("div",t._l(t.replies,(function(n,r){return e(x.a,{key:"reply_"+r,attrs:{"mb-5":"","data-cy":"each-question-replies"}},[e(v.a,[n.user_id!==n.question.user_id?[e(x.a,{staticClass:"justify-start"},[e(v.a,{attrs:{cols:"10"}},[e(c.a,{attrs:{to:"/books/".concat(n.question.book_id,"/questions/").concat(n.question_id,"/replies/").concat(n.id),elevation:"8",height:"200"}},[e(x.a,[e(v.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e(x.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e(o.a,{attrs:{size:"80"}},[e(m.a,{attrs:{src:n.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(x.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(n.user.name,10)))])])],1)],1),t._v(" "),e(v.a,{staticClass:"mt-n2",attrs:{cols:"9"}},[e(d.c,[e(k.a,{staticStyle:{height:"125px"},attrs:{value:n.content,readonly:"",filled:"",rounded:"",dense:"","no-resize":"",rows:"4"}})],1),t._v(" "),e(d.a,[e(x.a,{staticClass:"d-flex align-center justify-center"},[n.image?[e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-file-image-plus")]),t._v("\n                          画像\n                        ")],1)]:t._e(),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-heart-multiple")]),t._v("\n                        いいね! ("+t._s(n.favorite_replies_count)+")\n                      ")],1),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-calendar-clock")]),t._v("\n                        "+t._s(n.created_at)+"\n                      ")],1)],2),t._v(" "),e("p")],1)],1)],1)],1)],1)],1)]:[e(x.a,{staticClass:"justify-end"},[e(v.a,{attrs:{cols:"10"}},[e(c.a,{staticStyle:{"background-color":"lightgreen"},attrs:{to:"/books/".concat(n.question.book_id,"/questions/").concat(n.question_id,"/replies/").concat(n.id),elevation:"8",height:"200"}},[e(x.a,{staticClass:"justify-end"},[e(v.a,{staticClass:"mt-n2",attrs:{cols:"9"}},[e(d.c,[e(k.a,{staticStyle:{height:"125px","background-color":"beige"},attrs:{value:n.content,readonly:"",rounded:"",dense:"","no-resize":"",rows:"4"}})],1),t._v(" "),e(d.a,[e(x.a,{staticClass:"d-flex align-center justify-center"},[n.image?[e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-file-image-plus")]),t._v("\n                          画像\n                        ")],1)]:t._e(),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-heart-multiple")]),t._v("\n                        いいね! ("+t._s(n.favorite_replies_count)+")\n                      ")],1),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(f.a,[t._v("mdi-calendar-clock")]),t._v("\n                        "+t._s(n.created_at)+"\n                      ")],1)],2),t._v(" "),e("p")],1)],1),t._v(" "),e(v.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e(x.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e(o.a,{attrs:{size:"80"}},[e(m.a,{attrs:{src:n.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(x.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(n.user.name,10)))])])],1)],1)],1)],1)],1)],1)]],2)],1)})),1)}),[],!1,null,null,null).exports,z=n(620),L=n(621),H=n(586),P=n(585),N=n(577),E=n(594),U=n(576),A=n(574),Q=n(44),V={components:{EditQuestion:M,QuestionReplies:B,ReplyForm:z.a,BookInformation:L.a,favoriteButton:H.default,ContentNavigator:P.default,DeleteConfirmationDialog:N.default,ShowFullImageDialog:E.default},mixins:[R.a,U.a,A.a],asyncData:function(t){return Object(w.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,c,d,v,h,f,m,_,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,r=t.store,e.prev=1,o=null,(l=r.getters["auth/getCurrentUser"])&&l.id&&(o=l.id),e.next=7,Promise.all([Q.a.get("/books/".concat(n.book_id,"/questions/").concat(n.id),{params:{current_user_id:o}}),Q.a.get("/books/".concat(n.book_id,"/questions")),Q.a.get("/books/".concat(n.book_id,"/questions/").concat(n.id,"/replies"))]);case 7:return c=e.sent,d=Object(C.a)(c,3),v=d[0],h=d[1],f=d[2],m=v.data,_=h.data,x=f.data,console.log(m),console.log(x),console.log(_),e.abrupt("return",{book:m.book,question:m.question,user:m.question_user,favoriteQuestionsCount:m.favorite_questions_count,questions:_,replies:x,params:n});case 21:throw e.prev=21,e.t0=e.catch(1),console.log(e.t0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,21]])})))()},data:function(){return{dialog:!1,showDeleteConfirmation:!1,isFavorite:!1,favoriteQuestionId:"",replyDialog:!1,perPage:10,page:1,showFullImage:!1}},computed:{repliesChunk:function(){var t=(this.page-1)*this.perPage,e=t+this.perPage;return this.replies.slice(t,e)},totalPages:function(){return Math.ceil(this.replies.length/this.perPage)}},created:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="",(r=t.$store.getters["auth/getCurrentUser"])&&r.id&&(n=r.id),e.next=6,Q.a.get("questions/is_favorite",{params:{current_user_id:n,question_id:t.$route.params.id}});case 6:o=e.sent,console.log(o),t.isFavorite=o.data.is_favorite,t.favoriteQuestionId=o.data.favorite_question_id,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},methods:{editQuestion:function(data){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("current_user_id",t.currentUser.id),n.append("question[title]",data.title),n.append("question[content]",data.content),data.image&&n.append("question[image]",data.image),e.prev=5,e.next=8,Q.a.patch("/books/".concat(t.book.id,"/questions/").concat(t.question.id),n);case 8:r=e.sent,console.log(r.data),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="質問の編集が完了しました",t.question.title=r.data.question.title,t.question.content=r.data.question.content,r.data.image_url&&(t.question.image=r.data.image_url),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(5),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="質問を編集できませんでした";case 24:t.dialog=!1;case 25:case"end":return e.stop()}}),e,null,[[5,18]])})))()},deleteQuestion:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.delete("/books/".concat(t.book.id,"/questions/").concat(t.question.id),{params:{current_user_id:t.currentUser.id}});case 3:n=e.sent,console.log(n),t.$router.push({path:"/books/".concat(t.book.id),query:{message:"質問を削除しました"}}),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="質問を削除できませんでした",t.dialog=!1;case 15:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addToFavorite:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.post("/questions/".concat(t.question.id,"/favorite_questions"),{current_user_id:t.currentUser.id});case 3:n=e.sent,console.log(n),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="いいね!しました",t.isFavorite=!0,t.favoriteQuestionId=n.data.id,t.question.favorite_questions_count+=1,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="すでにいいね!されています";case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},removeFromFavorite:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.delete("/questions/".concat(t.question.id,"/favorite_questions/").concat(t.favoriteQuestionId),{params:{current_user_id:t.currentUser.id}});case 3:n=e.sent,console.log(n.data),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="いいね!を削除しました",t.isFavorite=!t.isFavorite,t.favoriteQuestionId=null,t.question.favorite_questions_count-=1,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="いいね!されていません";case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},openReplyDialog:function(){this.currentUser?this.replyDialog=!0:this.$router.push({path:"/auth/login",query:{message:"ログインが必要です"}})},submitReply:function(data){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("current_user_id",t.currentUser.id),n.append("reply[content]",data.content),data.image&&n.append("reply[image]",data.image),e.prev=4,e.next=7,Q.a.post("/books/".concat(t.book.id,"/questions/").concat(t.question.id,"/replies"),n);case 7:r=e.sent,console.log(r.data),t.$router.push({path:"/books/".concat(t.book.id,"/questions/").concat(t.question.id,"/replies/").concat(r.data.id),query:{message:"返信の投稿が完了しました"}}),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="返信を投稿できませんでした";case 18:t.replyDialog=!1;case 19:case"end":return e.stop()}}),e,null,[[4,12]])})))()},nextQuestion:function(){var t=this,e=this.questions.findIndex((function(e){return e.id===t.question.id}))+1,n=this.questions[e],r=this.questions[this.questions.length-1];this.question.id!==r.id?this.$router.push({path:"/books/".concat(this.book.id,"/questions/").concat(n.id)}):(this.snackbar=!0,this.snackbarColor="blue-grey",this.flashMessage="最後の質問です")},previousQuestion:function(){var t=this,e=this.questions.findIndex((function(e){return e.id===t.question.id}))-1,n=this.questions[e],r=this.questions[0];this.question.id!==r.id?this.$router.push({path:"/books/".concat(this.book.id,"/questions/").concat(n.id)}):(this.snackbar=!0,this.snackbarColor="blue-grey",this.flashMessage="最初の質問です")}}},X=Object(O.a)(V,(function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._v(" "),e("book-information",{attrs:{book:t.book}}),t._v(" "),e("br"),e("br"),e("br"),t._v(" "),e("div",{staticClass:"d-flex justify-space-between",staticStyle:{"margin-top":"50px","margin-bottom":"10px"}},[e("h2",[t._v("質問詳細")]),t._v(" "),e("nuxt-link",{attrs:{to:"/books/".concat(t.book.id)}},[t._v("参考書詳細に戻る")])],1),t._v(" "),e(c.a,{staticStyle:{"padding-bottom":"1px"},attrs:{elevation:"8","data-cy":"question-detail"}},[e(x.a,[e(v.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.goToUser(t.user)}}},[e(x.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e(o.a,{attrs:{size:"100"}},[e(m.a,{attrs:{src:t.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(x.a,[e(v.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(t.user.name,10)))])])],1)],1)]),t._v(" "),e(v.a,{staticClass:"mt-n2",attrs:{cols:"8"}},[e(d.d,[e("h3",[t._v(t._s(t.question.title))])]),t._v(" "),e(d.c,[e(k.a,{attrs:{value:t.question.content,readonly:"",outlined:"",rounded:"",dense:"","auto-grow":""}})],1),t._v(" "),t.question.image?[e(x.a,[e(v.a,{staticClass:"d-flex justify-center"},[e(m.a,{staticStyle:{cursor:"pointer"},attrs:{src:t.question.image,alt:"画像",contain:"","max-height":"250","max-width":"250"},on:{click:function(e){t.showFullImage=!0}}})],1)],1),t._v(" "),e(x.a,[e(v.a,{staticClass:"d-flex justify-center"},[t._v("\n              *画像をクリックすると拡大できます\n            ")])],1)]:t._e(),t._v(" "),e("br"),t._v(" "),e(d.a,[e(x.a,{staticClass:"d-flex align-center justify-center"},[e(v.a,{attrs:{cols:"4","data-cy":"reply-section"}},[e(f.a,[t._v("mdi-comment-text-outline")]),t._v("\n              返信: "+t._s(t.question.replies_count)+"件\n            ")],1),t._v(" "),e(v.a,{attrs:{cols:"4"}},[e("favorite-button",{attrs:{currentUser:t.currentUser,user:t.user,isFavorite:t.isFavorite,favoriteCount:t.question.favorite_questions_count},on:{addToFavorite:t.addToFavorite,removeFromFavorite:t.removeFromFavorite}})],1),t._v(" "),e(v.a,{attrs:{cols:"4"}},[e(f.a,[t._v("mdi-calendar-clock")]),t._v("\n              "+t._s(t.question.created_at)+"\n            ")],1)],1)],1)],2),t._v(" "),e(v.a,{staticClass:"d-flex flex-column",staticStyle:{padding:"20px"},attrs:{cols:"2"}},[t.currentUser&&t.user.id==t.currentUser.id?[e(l.a,{staticStyle:{"margin-bottom":"10px"},on:{click:function(e){t.dialog=!0}}},[t._v("編集する")]),t._v(" "),e(l.a,{on:{click:function(e){t.showDeleteConfirmation=!0}}},[t._v("削除する")])]:t._e()],2)],1)],1),t._v(" "),e("br"),e("br"),t._v(" "),e("content-navigator",{attrs:{content:"質問"},on:{previousContent:t.previousQuestion,nextContent:t.nextQuestion}}),t._v(" "),e("br"),e("br"),t._v(" "),e("hr"),t._v(" "),e("br"),e("br"),e("br"),e("br"),t._v(" "),e(c.a,{attrs:{height:"100px"}},[e(x.a,{staticStyle:{height:"100%"}},[e(v.a,{staticClass:"d-flex justify-center align-center"},[e(l.a,{attrs:{"x-large":"",rounded:"",color:"success",width:"600px"},on:{click:t.openReplyDialog}},[t._v("\n        返信を投稿する\n      ")])],1)],1)],1),t._v(" "),e("br"),e("br"),t._v(" "),0!==t.replies.length?[e(x.a,[e(v.a,{staticClass:"d-flex justify-center"},[e("h2",[t._v("返信一覧")])])],1),t._v(" "),e("br"),t._v(" "),e(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),e("br"),t._v(" "),e("question-replies",{attrs:{replies:t.repliesChunk}}),t._v(" "),e("br"),t._v(" "),e(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})]:[e(x.a,[e(v.a,{staticClass:"d-flex justify-center"},[e("h2",[t._v("返信一覧")])])],1),t._v(" "),e(x.a,[e(v.a,{staticClass:"d-flex justify-center"},[e(r.a,{attrs:{type:"info"}},[t._v("\n        返信は投稿されていません\n        ")])],1)],1)],t._v(" "),e(h.a,{model:{value:t.replyDialog,callback:function(e){t.replyDialog=e},expression:"replyDialog"}},[e(c.a,[e(d.d,{staticStyle:{"justify-content":"center"}},[e("h2",[t._v("返信を投稿する")])]),t._v(" "),e(d.c,[e("reply-form",{on:{submitReply:t.submitReply,closeDialog:function(e){t.replyDialog=!1}}})],1)],1)],1),t._v(" "),e(h.a,{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(c.a,[e(d.d,{staticStyle:{"justify-content":"center"}},[e("h2",[t._v("質問を編集する")])]),t._v(" "),e(d.c,[e("edit-question",{attrs:{title:t.question.title,content:t.question.content},on:{submitQuestion:t.editQuestion,closeDialog:function(e){t.dialog=!1}}})],1)],1)],1),t._v(" "),e("delete-confirmation-dialog",{attrs:{showDeleteConfirmation:t.showDeleteConfirmation,contentTitle:"質問"},on:{deleteContent:t.deleteQuestion,closeDeleteConfirmation:function(e){t.showDeleteConfirmation=!1}}}),t._v(" "),e("show-full-image-dialog",{attrs:{showFullImage:t.showFullImage,image:t.question.image},on:{closeShowFullImage:function(e){t.showFullImage=!1}}}),t._v(" "),e("br"),t._v(" "),e(y.a,{attrs:{timeout:3e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.flashMessage))])],2)}),[function(){var t=this._self._c;return t("div",{staticStyle:{"margin-bottom":"10px"}},[t("h3",[this._v("参考書情報")])])}],!1,null,null,null);e.default=X.exports;installComponents(X,{FavoriteButton:n(586).default,ContentNavigator:n(585).default,DeleteConfirmationDialog:n(577).default,ShowFullImageDialog:n(594).default})}}]);
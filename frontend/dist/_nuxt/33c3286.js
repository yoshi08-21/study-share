(window.webpackJsonp=window.webpackJsonp||[]).push([[16,7,8,9],{212:function(t,e,r){"use strict";var n=r(265);e.a=n.a},574:function(t,e,r){"use strict";e.a={methods:{goToUser:function(t){this.currentUser&&this.currentUser.id===t.id?this.$router.push({path:"/mypage"}):this.$router.push({path:"/users/".concat(t.id)})}}}},576:function(t,e,r){"use strict";e.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},577:function(t,e,r){"use strict";r.r(e);var n=r(601),o=r(265),l=r(255),c=r(111),d=r(565),v=r(262),h=r(564),f={props:{showDeleteConfirmation:Boolean,contentTitle:String},data:function(){return{localShowDeleteConfirmation:this.showDeleteConfirmation}},watch:{showDeleteConfirmation:function(t){this.localShowDeleteConfirmation=t}},methods:{deleteContent:function(){this.$emit("deleteContent")},closeDeleteConfirmation:function(){this.$emit("closeDeleteConfirmation")}}},m=r(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{width:"800"},model:{value:t.localShowDeleteConfirmation,callback:function(e){t.localShowDeleteConfirmation=e},expression:"localShowDeleteConfirmation"}},[e(l.a,{attrs:{height:"300"}},[e(h.a,{staticClass:"d-flex justify-center"},[e(d.a,[e(c.d,{staticStyle:{height:"120px"}},[e(n.a,{attrs:{type:"error",dense:"",text:"",prominent:"",border:"left",width:"100%"}},[t._v("\n            削除した"+t._s(t.contentTitle)+"は復元できません!\n          ")])],1),t._v(" "),e(c.c,{staticStyle:{"text-align":"center",height:"90px"}},[e("h1",[t._v("\n            "+t._s(t.contentTitle)+"を削除しますか？\n          ")])]),t._v(" "),e(c.a,[e(h.a,[e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"6"}},[e(o.a,{attrs:{large:"",width:"300",color:"error",dark:"","data-cy":"delete-confirm-button"},on:{click:t.deleteContent}},[t._v("\n                削除する\n              ")])],1),t._v(" "),e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"6"}},[e(o.a,{attrs:{large:"",width:"300"},on:{click:t.closeDeleteConfirmation}},[t._v("\n                戻る\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},578:function(t,e,r){"use strict";var n=r(100),o=r(4);e.a=o.a.extend({name:"rippleable",directives:{ripple:n.a},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(data.staticClass="v-input--selection-controls__ripple",data.directives=data.directives||[],data.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",data)):null}}})},583:function(t,e,r){var content=r(584);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("5939d713",content,!0,{sourceMap:!1})},584:function(t,e,r){var n=r(17)(!1);n.push([t.i,".v-rating{max-width:100%;white-space:nowrap}.v-rating .v-icon{padding:.5rem;border-radius:50%;-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none}.v-rating .v-icon:after{display:none}.v-application--is-ltr .v-rating .v-icon{transform:scaleX(1)}.v-application--is-rtl .v-rating .v-icon{transform:scaleX(-1)}.v-rating--readonly .v-icon{pointer-events:none}.v-rating--dense .v-icon{padding:.1rem}",""]),t.exports=n},585:function(t,e,r){"use strict";r.r(e);var n=r(265),o=r(565),l=r(164),c=r(564),d={props:{content:String},methods:{previousContent:function(){this.$emit("previousContent")},nextContent:function(){this.$emit("nextContent")}}},v=r(69),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"d-flex justify-space-between"},[e(o.a,{staticClass:"d-flex justify-start",attrs:{cols:"6"}},[e(n.a,{attrs:{"x-large":"","data-cy":"previous-content-button"},on:{click:t.previousContent}},[e(l.a,[t._v("mdi-arrow-left-bold")]),t._v("前の"+t._s(t.content))],1)],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-end",attrs:{cols:"6"}},[e(n.a,{attrs:{"x-large":"","data-cy":"next-content-button"},on:{click:t.nextContent}},[t._v("次の"+t._s(t.content)),e(l.a,[t._v("mdi-arrow-right-bold")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},586:function(t,e,r){"use strict";r.r(e);var n=r(265),o=r(164),l=(r(22),{props:{currentUser:Object,user:Object,isFavorite:Boolean,favoriteCount:Number},methods:{addToFavorite:function(){this.$emit("addToFavorite")},removeFromFavorite:function(){this.$emit("removeFromFavorite")}}}),c=r(69),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{attrs:{"data-cy":"favorite-section"}},[t.currentUser&&t.user.id!==t.currentUser.id?[t.isFavorite?[e(n.a,{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"pink","data-cy":"remove-favorite-button"},on:{click:t.removeFromFavorite}},[e(o.a,{attrs:{dark:""}},[t._v("\n          mdi-heart\n        ")])],1),t._v("\n      ("+t._s(t.favoriteCount)+")\n    ")]:[e(n.a,{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"pink",outlined:"","data-cy":"add-favorite-button"},on:{click:t.addToFavorite}},[e(o.a,{attrs:{dark:""}},[t._v("\n          mdi-heart-plus-outline\n        ")])],1),t._v("\n      ("+t._s(t.favoriteCount)+")\n    ")]]:[e(o.a,[t._v("mdi-heart-multiple")]),t._v("\n    いいね! ("+t._s(t.favoriteCount)+")\n  ")]],2)}),[],!1,null,null,null);e.default=component.exports},587:function(t,e,r){var content=r(588);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("5db1c400",content,!0,{sourceMap:!1})},588:function(t,e,r){var n=r(17)(!1);n.push([t.i,'.theme--light.v-alert .v-alert--prominent .v-alert__icon:after{background:rgba(0,0,0,.12)}.theme--dark.v-alert .v-alert--prominent .v-alert__icon:after{background:hsla(0,0%,100%,.12)}.v-sheet.v-alert{border-radius:4px}.v-sheet.v-alert:not(.v-sheet--outlined){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-sheet.v-alert.v-sheet--shaped{border-radius:24px 4px}.v-alert{display:block;font-size:16px;margin-bottom:16px;padding:16px;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-alert:not(.v-sheet--tile){border-radius:4px}.v-application--is-ltr .v-alert>.v-alert__content,.v-application--is-ltr .v-alert>.v-icon{margin-right:16px}.v-application--is-rtl .v-alert>.v-alert__content,.v-application--is-rtl .v-alert>.v-icon{margin-left:16px}.v-application--is-ltr .v-alert>.v-icon+.v-alert__content{margin-right:0}.v-application--is-rtl .v-alert>.v-icon+.v-alert__content{margin-left:0}.v-application--is-ltr .v-alert>.v-alert__content+.v-icon{margin-right:0}.v-application--is-rtl .v-alert>.v-alert__content+.v-icon{margin-left:0}.v-alert__border{border-style:solid;border-width:4px;content:"";position:absolute}.v-alert__border:not(.v-alert__border--has-color){opacity:.26}.v-alert__border--left,.v-alert__border--right{bottom:0;top:0}.v-alert__border--bottom,.v-alert__border--top{left:0;right:0}.v-alert__border--bottom{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0}.v-application--is-ltr .v-alert__border--left{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.v-application--is-ltr .v-alert__border--right,.v-application--is-rtl .v-alert__border--left{border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0}.v-application--is-rtl .v-alert__border--right{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.v-alert__border--top{border-top-left-radius:inherit;border-top-right-radius:inherit;top:0}.v-alert__content{flex:1 1 auto}.v-application--is-ltr .v-alert__dismissible{margin:-16px -8px -16px 8px}.v-application--is-rtl .v-alert__dismissible{margin:-16px 8px -16px -8px}.v-alert__icon{align-self:flex-start;border-radius:50%;height:24px;min-width:24px;position:relative}.v-application--is-ltr .v-alert__icon{margin-right:16px}.v-application--is-rtl .v-alert__icon{margin-left:16px}.v-alert__icon.v-icon{font-size:24px}.v-alert__wrapper{align-items:center;border-radius:inherit;display:flex}.v-application--is-ltr .v-alert--border.v-alert--prominent .v-alert__icon{margin-left:8px}.v-application--is-rtl .v-alert--border.v-alert--prominent .v-alert__icon{margin-right:8px}.v-alert--dense{padding-top:8px;padding-bottom:8px}.v-alert--dense .v-alert__border{border-width:medium}.v-alert--outlined{background:transparent!important;border:thin solid!important}.v-alert--outlined .v-alert__icon{color:inherit!important}.v-alert--prominent .v-alert__icon{align-self:center;height:48px;min-width:48px}.v-alert--prominent .v-alert__icon.v-icon{font-size:32px}.v-alert--prominent .v-alert__icon.v-icon:after{background:currentColor!important;border-radius:50%;bottom:0;content:"";left:0;opacity:.16;position:absolute;right:0;top:0}.v-alert--prominent.v-alert--dense .v-alert__icon.v-icon:after{transform:scale(1)}.v-alert--text{background:transparent!important}.v-alert--text:before{background-color:currentColor;border-radius:inherit;bottom:0;content:"";left:0;opacity:.12;position:absolute;pointer-events:none;right:0;top:0}',""]),t.exports=n},598:function(t,e,r){"use strict";r(22),r(266),r(76),r(583);var n=r(89),o=r(24),l=r(122),c=r(171),d=r(578),v=r(20),h=r(1),f=r(7);e.a=Object(f.a)(o.a,l.a,d.a,c.a,v.a).extend({name:"v-rating",props:{backgroundColor:{type:String,default:"accent"},color:{type:String,default:"primary"},clearable:Boolean,dense:Boolean,emptyIcon:{type:String,default:"$ratingEmpty"},fullIcon:{type:String,default:"$ratingFull"},halfIcon:{type:String,default:"$ratingHalf"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,size:[Number,String],value:{type:Number,default:0},iconLabel:{type:String,default:"$vuetify.rating.ariaLabel.icon"}},data:function(){return{hoverIndex:-1,internalValue:this.value}},computed:{directives:function(){return this.readonly||!this.ripple?[]:[{name:"ripple",value:{circle:!0}}]},iconProps:function(){var t=this.$props,e=t.dark,r=t.large,n=t.light,o=t.medium,small=t.small;return{dark:e,large:r,light:n,medium:o,size:t.size,small:small,xLarge:t.xLarge,xSmall:t.xSmall}},isHovering:function(){return this.hover&&this.hoverIndex>=0}},watch:{internalValue:function(t){t!==this.value&&this.$emit("input",t)},value:function(t){this.internalValue=t}},methods:{createClickFn:function(i){var t=this;return function(e){if(!t.readonly){var r=t.genHoverIndex(e,i);t.clearable&&t.internalValue===r?t.internalValue=0:t.internalValue=r}}},createProps:function(i){var t={index:i,value:this.internalValue,click:this.createClickFn(i),isFilled:Math.floor(this.internalValue)>i,isHovered:Math.floor(this.hoverIndex)>i};return this.halfIncrements&&(t.isHalfHovered=!t.isHovered&&(this.hoverIndex-i)%1>0,t.isHalfFilled=!t.isFilled&&(this.internalValue-i)%1>0),t},genHoverIndex:function(t,i){var e=this.isHalfEvent(t);return this.halfIncrements&&this.$vuetify.rtl&&(e=!e),i+(e?.5:1)},getIconName:function(t){var e=this.isHovering?t.isHovered:t.isFilled,r=this.isHovering?t.isHalfHovered:t.isHalfFilled;return e?this.fullIcon:r?this.halfIcon:this.emptyIcon},getColor:function(t){if(this.isHovering){if(t.isHovered||t.isHalfHovered)return this.color}else if(t.isFilled||t.isHalfFilled)return this.color;return this.backgroundColor},isHalfEvent:function(t){if(this.halfIncrements){var rect=t.target&&t.target.getBoundingClientRect();if(rect&&t.pageX-rect.left<rect.width/2)return!0}return!1},onMouseEnter:function(t,i){var e=this;this.runDelay("open",(function(){e.hoverIndex=e.genHoverIndex(t,i)}))},onMouseLeave:function(){var t=this;this.runDelay("close",(function(){return t.hoverIndex=-1}))},genItem:function(i){var t=this,e=this.createProps(i);if(this.$scopedSlots.item)return this.$scopedSlots.item(e);var r={click:e.click};return this.hover&&(r.mouseenter=function(e){return t.onMouseEnter(e,i)},r.mouseleave=this.onMouseLeave,this.halfIncrements&&(r.mousemove=function(e){return t.onMouseEnter(e,i)})),this.$createElement(n.a,this.setTextColor(this.getColor(e),{attrs:{"aria-label":this.$vuetify.lang.t(this.iconLabel,i+1,Number(this.length))},directives:this.directives,props:this.iconProps,on:r}),[this.getIconName(e)])}},render:function(t){var e=this,r=Object(h.h)(Number(this.length)).map((function(i){return e.genItem(i)}));return t("div",{staticClass:"v-rating",class:{"v-rating--readonly":this.readonly,"v-rating--dense":this.dense}},r)}})},601:function(t,e,r){"use strict";r(11),r(13),r(14),r(6),r(15),r(12),r(16);var n=r(2),o=(r(40),r(587),r(112)),l=r(212),c=r(89),d=r(50),v=r(20),h=r(269),f=r(7),m=r(10);function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=Object(f.a)(o.a,d.a,h.a).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"==typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var data={staticClass:"v-alert__border",class:Object(n.a)({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&((data=this.setBackgroundColor(this.computedColor,data)).class["v-alert__border--has-color"]=!0),this.$createElement("div",data)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(l.a,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(c.a,{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(c.a,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=w(w({},o.a.options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||v.a.options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(m.a)("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var data={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};this.coloredBorder||(data=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,data));return this.$createElement("div",data,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},621:function(t,e,r){"use strict";var n=r(255),o=r(111),l=r(565),c=r(164),d=r(209),v=r(598),h=r(564),f=(r(35),{props:{book:Object},data:function(){return{bookAverageRating:this.book.average_rating}}}),m=r(69),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(n.a,{attrs:{"min-height":"300"}},[e(h.a,[e(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[t.book.image?e("div",[e(d.a,{attrs:{src:t.book.image,alt:"画像",contain:"",haight:"180",width:"160"}})],1):t._e()]),t._v(" "),e(l.a,{attrs:{cols:"7"}},[e(o.d,[e("h3",[t._v(" "+t._s(t.book.name))])]),t._v(" "),e(o.b,{staticStyle:{"margin-top":"-20px"}},[e(h.a,{staticClass:"d-flex align-center"},[e(l.a,{attrs:{cols:"4"}},[e(v.a,{attrs:{readonly:!0,"background-color":"orange lighten-3",color:"orange",dense:"",large:""},model:{value:t.bookAverageRating,callback:function(e){t.bookAverageRating=e},expression:"bookAverageRating"}})],1),t._v(" "),e(l.a,{attrs:{cols:"3"}},[e("h2",[t._v("\n              ("+t._s(t.book.average_rating)+")\n            ")])])],1)],1),t._v(" "),e(o.c,[e("h3",{staticStyle:{"margin-bottom":"5px"}},[t._v("科目: "+t._s(t.book.subject))]),t._v(" "),e("h4",[t._v("作者: "+t._s(t.book.author))]),t._v(" "),e("h4",[t._v("出版社: "+t._s(t.book.publisher))])]),t._v(" "),e("br"),e("br"),t._v(" "),e(o.a,[e(h.a,{staticClass:"d-flex align-center"},[e(l.a,{attrs:{cols:"3","data-cy":"book-review-section"}},[e(c.a,[t._v("mdi-comment-text-outline")]),t._v("\n            レビュー: "+t._s(t.book.reviews_count)+"件\n          ")],1),t._v(" "),e(l.a,{attrs:{cols:"3","data-cy":"book-question-section"}},[e(c.a,[t._v("mdi-comment-question-outline")]),t._v("\n            質問: "+t._s(t.book.questions_count)+"件\n          ")],1),t._v(" "),e(l.a,{attrs:{cols:"3","data-cy":"book-favorite-section"}},[e(c.a,[t._v("mdi-heart-multiple")]),t._v("\n            お気に入り ("+t._s(t.book.favorite_books_count)+")\n          ")],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports},625:function(t,e,r){"use strict";var n=r(2),o=(r(40),r(61),r(270),r(14),r(6),r(12),r(48),r(113),r(11),r(13),r(15),r(16),r(7)),l=r(105),c=r(137);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=Object(o.a)(l.a,Object(c.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var t=this,e=function(input){return input.$watch("hasError",(function(e){t.$set(t.errorBag,input._uid,e)}),{immediate:!0})},r={_uid:input._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=input.$watch("shouldValidate",(function(n){n&&(t.errorBag.hasOwnProperty(input._uid)||(r.valid=e(input)))})):r.valid=e(input),r},validate:function(){return 0===this.inputs.filter((function(input){return!input.validate(!0)})).length},reset:function(){this.inputs.forEach((function(input){return input.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(input){return input.resetValidation()})),this.resetErrorBag()},register:function(input){this.inputs.push(input),this.watchers.push(this.watchInput(input))},unregister:function(input){var t=this.inputs.find((function(i){return i._uid===input._uid}));if(t){var e=this.watchers.find((function(i){return i._uid===t._uid}));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((function(i){return i._uid!==t._uid})),this.inputs=this.inputs.filter((function(i){return i._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:v({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},815:function(t,e,r){"use strict";r.r(e);var n=r(254),o=r(265),l=r(255),c=r(111),d=r(565),v=r(262),h=r(164),f=r(209),m=r(598),_=r(564),w=r(566),x=r(567),k=(r(35),r(30)),y=r(26),C=(r(82),r(6),r(49),r(56),r(32),r(268),r(625)),O=r(162),j=(r(22),r(213)),$={props:{rating:Number,title:String,content:String},components:{VTextField:O.a,VTextarea:x.a,VRating:m.a,SubmitButton:j.default},data:function(){return{editedRating:this.rating,editedTitle:this.title,editedContent:this.content,titleRules:[function(t){return!!t||"タイトルを入力してください"},function(t){return(t||"").length<=60||"最大入力文字数は60文字です"}],contentRules:[function(t){return!!t||"本文を入力してください"},function(t){return(t||"").length<=1e3||"最大入力文字数は1000文字です"}]}},methods:{submitForm:function(){this.$emit("submitReview",{title:this.editedTitle,content:this.editedContent,rating:this.editedRating})}}},S=r(69),component=Object(S.a)($,(function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" "),e(C.a,[e(m.a,{attrs:{"background-color":"orange lighten-3",color:"orange",large:"",label:t.rating},model:{value:t.editedRating,callback:function(e){t.editedRating=e},expression:"editedRating"}}),t._v(" "),e(O.a,{attrs:{counter:"",label:"タイトル",rules:t.titleRules,"data-cy":"edit-title-field"},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}}),t._v(" "),e(x.a,{attrs:{outlined:"",counter:"",label:"本文",rules:t.contentRules,"data-cy":"edit-content-field"},model:{value:t.editedContent,callback:function(e){t.editedContent=e},expression:"editedContent"}}),t._v(" "),e("submit-button",{attrs:{error:t.error,buttonTitle:"編集する"},on:{submitForm:t.submitForm,closeDialog:function(e){return t.$emit("closeDialog")}}})],1)],1)}),[],!1,null,null,null),B=component.exports;installComponents(component,{SubmitButton:r(213).default});var R=r(621),F=r(586),I=r(585),D=r(577),E=r(119),T=r(576),H=r(574),M=r(44),P={components:{EditReview:B,BookInformation:R.a,FavoriteButton:F.default,ContentNavigator:I.default,DeleteConfirmationDialog:D.default},mixins:[E.a,T.a,H.a],asyncData:function(t){return Object(y.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,c,d,v,h,f,m,_,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,n=t.store,e.prev=1,o=null,(l=n.getters["auth/getCurrentUser"])&&l.id&&(o=l.id),e.next=7,Promise.all([M.a.get("/books/".concat(r.book_id,"/reviews/").concat(r.id),{params:{current_user_id:o}}),M.a.get("/books/".concat(r.book_id,"/reviews"))]);case 7:return c=e.sent,d=Object(k.a)(c,2),v=d[0],h=d[1],f=v.data.book,m=v.data.review,_=v.data.review_user,w=h.data,console.log(v.data),console.log(h.data),e.abrupt("return",{book:f,review:m,user:_,reviews:w,params:r});case 20:throw e.prev=20,e.t0=e.catch(1),console.log(e.t0),e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))()},data:function(){return{dialog:!1,showDeleteConfirmation:!1,user:{},isFavorite:!1,favoriteReviewId:""}},created:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="",(n=t.$store.getters["auth/getCurrentUser"])&&n.id&&(r=n.id),e.next=6,M.a.get("reviews/is_favorite",{params:{current_user_id:r,review_id:t.$route.params.id}});case 6:o=e.sent,console.log(o),t.isFavorite=o.data.is_favorite,t.favoriteReviewId=o.data.favorite_review_id,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("エラー文です"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},methods:{editReview:function(data){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.patch("/books/".concat(t.book.id,"/reviews/").concat(t.review.id),{review:{title:data.title,content:data.content,rating:data.rating},current_user_id:t.currentUser.id});case 3:r=e.sent,console.log(r.data),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="レビューの編集が完了しました",t.review.title=r.data.title,t.review.content=r.data.content,t.review.rating=r.data.rating,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="レビューを編集できませんでした";case 19:t.dialog=!1;case 20:case"end":return e.stop()}}),e,null,[[0,13]])})))()},deleteReview:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.delete("/books/".concat(t.book.id,"/reviews/").concat(t.review.id),{params:{current_user_id:t.currentUser.id}});case 3:r=e.sent,console.log(r),t.$router.push({path:"/books/".concat(t.book.id),query:{message:"レビューを削除しました"}}),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="レビューを削除できませんでした",t.dialog=!1;case 15:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addToFavorite:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.post("/reviews/".concat(t.review.id,"/favorite_reviews"),{current_user_id:t.currentUser.id});case 3:r=e.sent,console.log(r),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="いいね!しました",t.isFavorite=!0,t.favoriteReviewId=r.data.id,t.review.favorite_reviews_count+=1,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="すでにいいね!されています";case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},removeFromFavorite:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.delete("/reviews/".concat(t.review.id,"/favorite_reviews/").concat(t.favoriteReviewId),{params:{current_user_id:t.currentUser.id}});case 3:r=e.sent,console.log(r.data),t.snackbarColor="primary",t.snackbar=!0,t.flashMessage="いいね!を削除しました",t.isFavorite=!t.isFavorite,t.favoriteReviewId=null,t.review.favorite_reviews_count-=1,e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="いいね!されていません";case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},nextReview:function(){var t=this,e=this.reviews.findIndex((function(e){return e.id===t.review.id}))+1,r=this.reviews[e],n=this.reviews[this.reviews.length-1];this.review.id!==n.id?this.$router.push({path:"/books/".concat(this.book.id,"/reviews/").concat(r.id)}):(this.snackbar=!0,this.snackbarColor="blue-grey",this.flashMessage="最後のレビューです")},previousReview:function(){var t=this,e=this.reviews.findIndex((function(e){return e.id===t.review.id}))-1,r=this.reviews[e],n=this.reviews[0];this.review.id!==n.id?this.$router.push({path:"/books/".concat(this.book.id,"/reviews/").concat(r.id)}):(this.snackbar=!0,this.snackbarColor="blue-grey",this.flashMessage="最初のレビューです")}}},V=Object(S.a)(P,(function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._v(" "),e("book-information",{attrs:{book:t.book}}),t._v(" "),e("br"),e("br"),e("br"),t._v(" "),e("div",{staticClass:"d-flex justify-space-between",staticStyle:{"margin-top":"50px","margin-bottom":"10px"}},[e("h2",[t._v("レビュー詳細")]),t._v(" "),e("nuxt-link",{attrs:{to:"/books/".concat(t.book.id)}},[t._v("参考書詳細に戻る")])],1),t._v(" "),e(l.a,{staticStyle:{"padding-bottom":"1px"},attrs:{elevation:"8","data-cy":"review-detail"}},[e(_.a,[e(d.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.goToUser(t.user)}}},[e(_.a,[e(d.a,{staticClass:"d-flex justify-center align-center text-center"},[e(n.a,{attrs:{size:"100"}},[e(f.a,{attrs:{src:t.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(_.a,[e(d.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(t.user.name,10)))])])],1)],1)]),t._v(" "),e(d.a,{staticClass:"mt-n2",attrs:{cols:"8"}},[e(c.d,[e(_.a,{staticClass:"d-flex align-center",staticStyle:{"margin-top":"10px"}},[e(d.a,{attrs:{cols:"4"}},[e(m.a,{attrs:{readonly:!0,"background-color":"orange lighten-3",color:"orange",dense:"",large:""},model:{value:t.review.rating,callback:function(e){t.$set(t.review,"rating",e)},expression:"review.rating"}})],1),t._v(" "),e(d.a,{attrs:{cols:"2"}},[e("h3",[t._v("\n                ("+t._s(t.review.rating)+")\n              ")])])],1)],1),t._v(" "),e(c.b,{staticStyle:{"margin-top":"20px"}},[e("h2",[t._v(t._s(t.review.title))])]),t._v(" "),e(c.c,[e(x.a,{attrs:{value:t.review.content,readonly:"",outlined:"",rounded:"",dense:"","auto-grow":""}})],1),t._v(" "),e("br"),t._v(" "),e(c.a,[e(_.a,{staticClass:"d-flex align-end justify-center"},[e(d.a,{attrs:{cols:"4"}},[e("favorite-button",{attrs:{currentUser:t.currentUser,user:t.user,isFavorite:t.isFavorite,favoriteCount:t.review.favorite_reviews_count},on:{addToFavorite:t.addToFavorite,removeFromFavorite:t.removeFromFavorite}})],1),t._v(" "),e(d.a,{attrs:{cols:"4"}},[e(h.a,[t._v("mdi-calendar-clock")]),t._v("\n              "+t._s(t.review.created_at)+"\n            ")],1)],1),t._v(" "),e("p")],1)],1),t._v(" "),e(d.a,{staticClass:"d-flex flex-column",staticStyle:{padding:"20px"},attrs:{cols:"2"}},[t.currentUser&&t.user.id==t.currentUser.id?[e(o.a,{staticStyle:{"margin-bottom":"10px"},on:{click:function(e){t.dialog=!0}}},[t._v("編集する")]),t._v(" "),e(o.a,{on:{click:function(e){t.showDeleteConfirmation=!0}}},[t._v("削除する")])]:t._e()],2)],1)],1),t._v(" "),e("br"),e("br"),t._v(" "),e("content-navigator",{attrs:{content:"レビュー"},on:{previousContent:t.previousReview,nextContent:t.nextReview}}),t._v(" "),e(v.a,{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(l.a,[e(c.d,{staticStyle:{"justify-content":"center"}},[e("h2",[t._v("レビューを編集する")])]),t._v(" "),e(c.c,[e("edit-review",{attrs:{rating:t.review.rating,title:t.review.title,content:t.review.content},on:{submitReview:t.editReview,closeDialog:function(e){t.dialog=!1}}})],1)],1)],1),t._v(" "),e("delete-confirmation-dialog",{attrs:{showDeleteConfirmation:t.showDeleteConfirmation,contentTitle:"レビュー"},on:{deleteContent:t.deleteReview,closeDeleteConfirmation:function(e){t.showDeleteConfirmation=!1}}}),t._v(" "),e(w.a,{attrs:{timeout:3e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.flashMessage))])],1)}),[function(){var t=this._self._c;return t("div",{staticStyle:{"margin-bottom":"10px"}},[t("h3",[this._v("参考書情報")])])}],!1,null,null,null);e.default=V.exports;installComponents(V,{FavoriteButton:r(586).default,ContentNavigator:r(585).default,DeleteConfirmationDialog:r(577).default})}}]);
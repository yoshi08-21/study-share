(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{602:function(e,t,r){"use strict";var n=r(265),o=r(255),c=r(111),l=r(565),v=r(164),h=r(209),f=r(598),_=r(564),k=r(566),d=(r(35),r(26)),m=(r(82),r(119)),x=r(44),y={props:{books:[]},mixins:[m.a],data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:"テストメッセージ"}},methods:{addToFavorites:function(e,t){var r=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),!r.currentUser){n.next=22;break}return n.prev=2,n.next=5,x.a.post("/books/".concat(e.id,"/favorite_books"),{current_user_id:r.currentUser.id});case 5:o=n.sent,console.log(o.data),e.check_favorite=1,e.favorite_books_count+=1,r.snackbarColor="primary",r.snackbar=!0,r.flashMessage="お気に入りに追加しました",n.next=20;break;case 14:n.prev=14,n.t0=n.catch(2),console.log(n.t0),r.snackbarColor="red accent-2",r.snackbar=!0,r.flashMessage="すでにお気に入りに登録されています";case 20:n.next=23;break;case 22:r.$router.push({path:"/auth/login",query:{message:"ログインが必要です"}});case 23:case"end":return n.stop()}}),n,null,[[2,14]])})))()},removeFromFavorite:function(e,t){var r=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,n.next=4,x.a.delete("/favorite_books/destroy_from_item_list",{params:{current_user_id:r.currentUser.id,book_id:e.id}});case 4:o=n.sent,console.log(o),e.favorite_books_count-=1,e.check_favorite=0,r.snackbar=!0,r.snackbarColor="primary",r.flashMessage="お気に入りから削除しました",n.next=19;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0),r.snackbarColor="red accent-2",r.snackbar=!0,r.flashMessage="お気に入りに登録されていません";case 19:case"end":return n.stop()}}),n,null,[[1,13]])})))()}}},j=r(69),component=Object(j.a)(y,(function(){var e=this,t=e._self._c;return t("div",[e._l(e.books,(function(r,k){return t(_.a,{key:k,staticClass:"justify-center",attrs:{"mb-5":"","data-cy":"each-books"}},[t(l.a,{attrs:{cols:"10"}},[t(o.a,{attrs:{elevation:"8",height:"240"}},[t(_.a,[t(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[r.image?t("div",{staticClass:"d-flex justify-center",staticStyle:{height:"210px"}},[t(h.a,{attrs:{src:r.image,alt:"画像",contain:"","max-height":"200","max-width":"180"}})],1):e._e()]),e._v(" "),t(l.a,{staticClass:"mt-n4",attrs:{cols:"7"}},[t("div",{staticStyle:{height:"107px"}},[t(c.d,[t("nuxt-link",{attrs:{to:"/books/".concat(r.id)}},[e._v(e._s(e.$truncate(r.name,50)))])],1),e._v(" "),t(c.b,{staticStyle:{"margin-top":"-20px"}},[t(_.a,{staticClass:"d-flex align-center"},[t(l.a,{attrs:{cols:"4"}},[t(f.a,{attrs:{readonly:!0,"background-color":"orange lighten-3",color:"orange",dense:""},model:{value:r.average_rating,callback:function(t){e.$set(r,"average_rating",t)},expression:"book.average_rating"}})],1),e._v(" "),t(l.a,{attrs:{cols:"3"}},[t("h2",[e._v("\n                      ("+e._s(r.average_rating)+")\n                    ")])])],1)],1)],1),e._v(" "),t(c.c,[t("h3",{staticStyle:{"margin-bottom":"5px"}},[e._v("科目: "+e._s(r.subject))]),e._v(" "),t("h4",[e._v("著者: "+e._s(r.author))]),e._v(" "),t("h4",[e._v("出版社: "+e._s(r.publisher))])]),e._v(" "),t(c.a,[t(_.a,{staticClass:"d-flex align-center justify-center"},[t(l.a,{attrs:{cols:"4"}},[t(v.a,[e._v("mdi-comment-text-outline")]),e._v("\n                  レビュー: "+e._s(r.reviews_count)+"件\n                ")],1),e._v(" "),t(l.a,{attrs:{cols:"4"}},[t(v.a,[e._v("mdi-comment-text-outline")]),e._v("\n                  質問: "+e._s(r.questions_count)+"件\n                ")],1),e._v(" "),t(l.a,{attrs:{cols:"4","data-cy":"each-book-favorite-section"}},[t(v.a,[e._v("mdi-heart-multiple")]),e._v("\n                  お気に入り ("+e._s(r.favorite_books_count)+")\n                ")],1)],1)],1)],1),e._v(" "),t(l.a,{staticClass:"d-flex justify-center ml-n5",attrs:{cols:"2"}},[e.currentUser?[0==r.check_favorite?t(n.a,{staticClass:"mt-8",on:{click:function(t){return e.addToFavorites(r,t)}}},[e._v("お気に入り追加")]):t(n.a,{staticClass:"mt-8",on:{click:function(t){return e.removeFromFavorite(r,t)}}},[e._v("お気に入り削除")])]:e._e()],2)],1)],1)],1)],1)})),e._v(" "),t(k.a,{attrs:{timeout:3e3,color:e.snackbarColor},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.flashMessage))])],2)}),[],!1,null,null,null);t.a=component.exports},624:function(e,t,r){var content=r(771);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(18).default)("231181e8",content,!0,{sourceMap:!1})},770:function(e,t,r){"use strict";r(624)},771:function(e,t,r){var n=r(17)(!1);n.push([e.i,".fade-enter-active,.fade-leave-active{transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}",""]),e.exports=n},817:function(e,t,r){"use strict";r.r(t);var n=r(601),o=r(565),c=r(596),l=r(564),v=r(800),h=r(831),f=r(26),_=(r(55),r(82),r(602)),k=r(605),d=r(599),m=r(606),x=r(600),y=r(607),j=r(603),C=r(359),P=r(44),w={middleware:C.default,components:{EachBooks:_.a,EachReviews:k.a,EachQuestions:d.a,EachReplies:m.a,EachSubjectQuestions:x.a,EachSubjectQuestionReplies:y.a,EachSurveys:j.a},asyncData:function(e){return Object(f.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,t.prev=1,t.next=4,P.a.get("/favorites",{params:{user_id:r.getters["auth/getCurrentUser"].id}});case 4:return n=t.sent,console.log(n.data),t.abrupt("return",{favoriteBooks:n.data.favorite_books,favoriteReviews:n.data.favorite_reviews,favoriteQuestions:n.data.favorite_questions,favoriteReplies:n.data.favorite_replies,favoriteSubjectQuestions:n.data.favorite_subject_questions,favoriteSubjectQuestionReplies:n.data.favorite_subject_question_replies,favoriteSurveys:n.data.favorite_surveys});case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},data:function(){return{tab:0,tabs:[{label:"お気に入りの参考書"},{label:"いいね!したレビュー"},{label:"いいね!した質問"},{label:"いいね!した科目別質問"},{label:"いいね!した返信"},{label:"いいね!した返信(科目別質問)"},{label:"いいね!したアンケート"}],perPage:10,page:1}},computed:{booksChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteBooks.slice(e,t)},reviewsChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteReviews.slice(e,t)},questionsChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteQuestions.slice(e,t)},repliesChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteReplies.slice(e,t)},subjectQuestionsChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteSubjectQuestions.slice(e,t)},subjectQuestionRepliesChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteSubjectQuestionReplies.slice(e,t)},surveysChunk:function(){var e=(this.page-1)*this.perPage,t=e+this.perPage;return this.favoriteSurveys.slice(e,t)},booksTotalPages:function(){return Math.ceil(this.favoriteBooks.length/this.perPage)},reviewsTotalPages:function(){return Math.ceil(this.favoriteReviews.length/this.perPage)},questionsTotalPages:function(){return Math.ceil(this.favoriteQuestions.length/this.perPage)},repliesTotalPages:function(){return Math.ceil(this.favoriteReplies.length/this.perPage)},subjectQuestionsTotalPages:function(){return Math.ceil(this.favoriteSubjectQuestions.length/this.perPage)},subjectQuestionRepliesTotalPages:function(){return Math.ceil(this.favoriteSubjectQuestionReplies.length/this.perPage)},surveysTotalPages:function(){return Math.ceil(this.favoriteSurveys.length/this.perPage)}}},Q=(r(770),r(69)),component=Object(Q.a)(w,(function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticStyle:{"text-align":"center"}},[e._v("お気に入り一覧")]),e._v(" "),t("br"),e._v(" "),t(h.a,{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(r,n){return t(v.a,{key:n,on:{click:function(t){e.page=1}}},[e._v("\n      "+e._s(r.label)+"\n    ")])})),1),e._v(" "),0===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.booksChunk.length>0?[t(c.a,{attrs:{length:e.booksTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-books",{attrs:{books:e.booksChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.booksTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n              お気に入りの参考書はありません\n            ")])],1)],1)]]:1===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.reviewsChunk.length>0?[t(c.a,{attrs:{length:e.reviewsTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-reviews",{attrs:{reviews:e.reviewsChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.reviewsTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n            いいねしたレビューはありません\n            ")])],1)],1)]]:2===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.questionsChunk.length>0?[t(c.a,{attrs:{length:e.questionsTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-questions",{attrs:{questions:e.questionsChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.questionsTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n            いいねした質問はありません\n            ")])],1)],1)]]:3===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.subjectQuestionsChunk.length>0?[t(c.a,{attrs:{length:e.subjectQuestionsTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-subject-questions",{attrs:{subjectQuestions:e.subjectQuestionsChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.subjectQuestionsTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n            いいねした科目別質問はありません\n            ")])],1)],1)]]:4===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.repliesChunk.length>0?[t(c.a,{attrs:{length:e.repliesTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-replies",{attrs:{replies:e.repliesChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.repliesTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n            いいねした返信はありません\n            ")])],1)],1)]]:5===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.subjectQuestionRepliesChunk.length>0?[t(c.a,{attrs:{length:e.subjectQuestionRepliesTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-subject-question-replies",{attrs:{subjectQuestionReplies:e.subjectQuestionRepliesChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.subjectQuestionRepliesTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n            いいねした返信(科目別質問)はありません\n            ")])],1)],1)]]:6===e.tab?[t("br"),t("br"),t("br"),e._v(" "),e.surveysChunk.length>0?[t(c.a,{attrs:{length:e.surveysTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),t("br"),e._v(" "),t("each-surveys",{attrs:{surveys:e.surveysChunk}}),e._v(" "),t("br"),e._v(" "),t(c.a,{attrs:{length:e.surveysTotalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]:[t("br"),e._v(" "),t(l.a,[t(o.a,{staticClass:"d-flex justify-center"},[t(n.a,{attrs:{type:"info"}},[e._v("\n            いいねしたアンケートはありません\n            ")])],1)],1)]]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{576:function(t,e,r){"use strict";e.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},625:function(t,e,r){"use strict";var n=r(2),o=(r(40),r(61),r(270),r(14),r(6),r(12),r(48),r(113),r(11),r(13),r(15),r(16),r(7)),c=r(105),l=r(137);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=Object(o.a)(c.a,Object(l.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var t=this,e=function(input){return input.$watch("hasError",(function(e){t.$set(t.errorBag,input._uid,e)}),{immediate:!0})},r={_uid:input._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=input.$watch("shouldValidate",(function(n){n&&(t.errorBag.hasOwnProperty(input._uid)||(r.valid=e(input)))})):r.valid=e(input),r},validate:function(){return 0===this.inputs.filter((function(input){return!input.validate(!0)})).length},reset:function(){this.inputs.forEach((function(input){return input.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(input){return input.resetValidation()})),this.resetErrorBag()},register:function(input){this.inputs.push(input),this.watchers.push(this.watchInput(input))},unregister:function(input){var t=this.inputs.find((function(i){return i._uid===input._uid}));if(t){var e=this.watchers.find((function(i){return i._uid===t._uid}));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((function(i){return i._uid!==t._uid})),this.inputs=this.inputs.filter((function(i){return i._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:h({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},777:function(t,e,r){"use strict";r(361);var n=r(1);e.a=Object(n.i)("spacer","div","v-spacer")},818:function(t,e,r){"use strict";r.r(e);var n=r(265),o=r(565),c=r(625),l=r(566),d=r(777),h=r(162),f=r(26),m=(r(82),r(33),r(215)),v=r(363),w=r(576),_=r(44),y={middleware:v.default,mixins:[w.a],watch:{"$route.query.message":function(t,e){t!==e&&(this.flashMessage=t,this.snackbar=!0,this.snackbarColor="red accent-2")}},data:function(){return{email:"",password:"",user:{},emailRules:[function(t){return!!t||"メールアドレスを入力してください"},function(t){return(t||"").length<=250||"最大入力文字数は250文字です"},function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"正しい形式のメールアドレスを入力してください"}],passwordRules:[function(t){return!!t||"パスワードを入力してください"},function(t){return(t||"").length<=30||"最大入力文字数は30文字です"}],showPassword:!1}},methods:{login:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(m.c)(t.$firebase),e.next=4,Object(m.d)(r,t.email,t.password);case 4:n=e.sent,t.$store.dispatch("auth/setLoginState",!0),t.$store.dispatch("auth/setUserUid",n.user.uid),t.$store.dispatch("auth/setEmail",n.user.email),console.log(n),e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),o="",o="auth/invalid-email"===e.t0.code?"正しいメールアドレスを入力してください":"auth/user-not-found"===e.t0.code?"メールアドレスが登録されていません":"auth/missing-password"===e.t0.code?"パスワードを入力してください":"auth/wrong-password"===e.t0.code?"パスワードが間違っています":"ログインエラーが発生しました",console.log(o),t.$router.push({query:{message:o}}),e.abrupt("return");case 19:return e.prev=19,c=t.$store.getters["auth/getUserUid"],e.next=23,_.a.get("/users/find_user_by_uid/".concat(c));case 23:l=e.sent,t.user=l.data,t.$store.dispatch("auth/setCurrentUser",t.user),console.log(l),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(19),console.log(e.t1);case 32:t.$router.push({path:"/mypage",query:{message:"ログインしました"}});case 33:case"end":return e.stop()}}),e,null,[[0,11],[19,29]])})))()},loginAsUser1:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.email="sample@sample.com",t.password="123456",e.next=4,t.login();case 4:case"end":return e.stop()}}),e)})))()},loginAsUser2:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.email="sample2@sample.com",t.password="234567",e.next=4,t.login();case 4:case"end":return e.stop()}}),e)})))()}}},O=r(69),component=Object(O.a)(y,(function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticStyle:{"text-align":"center"}},[t._v("ログイン")]),t._v(" "),e(o.a,[e(c.a,[e(h.a,{attrs:{rules:t.emailRules,label:"メールアドレス","data-cy":"email-field"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),e(h.a,{attrs:{rules:t.passwordRules,label:"パスワード","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password","data-cy":"password-field"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),e(n.a,{attrs:{"data-cy":"login-button"},on:{click:t.login}},[t._v("ログイン")])],1),t._v(" "),e(d.a,{style:{height:"20px"}}),t._v(" "),e(n.a,{on:{click:t.loginAsUser1}},[t._v("ゲストユーザーでログイン")]),t._v(" "),e(d.a,{style:{height:"20px"}}),t._v(" "),e(n.a,{on:{click:t.loginAsUser2}},[t._v("ゲストユーザー2でログイン")]),t._v(" "),e(d.a,{style:{height:"20px"}}),t._v(" "),e(n.a,{attrs:{block:""},on:{click:function(e){return t.$router.push("/auth/signup")}}},[t._v("新規登録はこちらから")])],1),t._v(" "),e("br"),t._v(" "),e(l.a,{attrs:{timeout:3e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.flashMessage))])],1)}),[],!1,null,null,null);e.default=component.exports}}]);
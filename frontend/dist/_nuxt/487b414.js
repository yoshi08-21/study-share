(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{574:function(t,e,n){"use strict";e.a={methods:{goToUser:function(t){this.currentUser&&this.currentUser.id===t.id?this.$router.push({path:"/mypage"}):this.$router.push({path:"/users/".concat(t.id)})}}}},576:function(t,e,n){"use strict";e.a={data:function(){return{snackbar:!1,snackbarColor:"primary",flashMessage:""}},mounted:function(){this.$route.query.message&&(this.snackbarColor="primary",this.snackbar=!0,this.flashMessage=this.$route.query.message)}}},582:function(t,e,n){"use strict";e.a={methods:{checkFileSize:function(t){console.log(t);t&&t.size>3145728?(this.errorMessage="添付できるファイルは3MBまでです",this.error=!0):(this.errorMessage="",this.error=!1)}}}},600:function(t,e,n){"use strict";var c=n(254),r=n(255),o=n(111),l=n(565),d=n(164),_=n(209),h=n(564),j=n(567),v=(n(35),n(119)),f=n(574),m={props:{subjectQuestions:[]},mixins:[v.a,f.a],methods:{selectSubject:function(t){this.$emit("selectSubject",t)}}},S=n(69),component=Object(S.a)(m,(function(){var t=this,e=t._self._c;return e("div",t._l(t.subjectQuestions,(function(n,v){return e(h.a,{key:"subjectQuestion_"+v,staticClass:"justify-center",attrs:{"mb-5":"","data-cy":"each-subject-questions"}},[e(l.a,{attrs:{cols:"10"}},[e(r.a,{attrs:{elevation:"8",height:"250"}},[e(h.a,[e(l.a,{staticClass:"mt-8",attrs:{cols:"2"}},[e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.goToUser(n.user)}}},[e(h.a,[e(l.a,{staticClass:"d-flex justify-center align-center text-center"},[e(c.a,{attrs:{size:"100"}},[e(_.a,{attrs:{src:n.user.image,alt:"画像",contain:""}})],1)],1)],1),t._v(" "),e(h.a,[e(l.a,{staticClass:"d-flex justify-center align-center text-center"},[e("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.$truncate(n.user.name,10)))])])],1)],1)]),t._v(" "),e(l.a,{staticClass:"mt-n2",attrs:{cols:"8"}},[e(o.d,[e("nuxt-link",{attrs:{to:"/subjectQuestions/".concat(n.id)}},[t._v(t._s(t.$truncate(n.title,20)))])],1),t._v(" "),e(o.c,[e(j.a,{staticStyle:{height:"125px"},attrs:{value:n.content,readonly:"",filled:"",rounded:"",dense:"","no-resize":"",rows:"4"}})],1),t._v(" "),e(o.a,[e(h.a,{staticClass:"d-flex align-center justify-center"},[e(l.a,{attrs:{cols:"4"}},[e(d.a,[t._v("mdi-comment-text-outline")]),t._v("\n                  返信: "+t._s(n.subject_question_replies_count)+"件\n                ")],1),t._v(" "),e(l.a,{attrs:{cols:"4"}},[e(d.a,[t._v("mdi-heart-multiple")]),t._v("\n                  いいね! ("+t._s(n.favorite_subject_questions_count)+")\n                ")],1),t._v(" "),e(l.a,{attrs:{cols:"4"}},[e(d.a,[t._v("mdi-calendar-clock")]),t._v("\n                  "+t._s(n.created_at)+"\n                ")],1)],1),t._v(" "),e("p")],1)],1),t._v(" "),e(l.a,{staticClass:"d-flex align-center",attrs:{cols:"2"}},[e(r.a,[e(o.b,[t._v("科目・ジャンル")]),t._v(" "),e("div",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(e){return t.selectSubject(n.subject)}}},[e(o.d,{staticClass:"justify-center"},[t._v(t._s(n.subject))])],1)],1)],1)],1)],1)],1)],1)})),1)}),[],!1,null,null,null);e.a=component.exports},814:function(t,e,n){"use strict";n.r(e);var c=n(265),r=n(255),o=n(111),l=n(565),d=n(262),_=n(596),h=n(564),j=n(832),v=n(566),f=n(800),m=n(831),S=n(162),x=n(60),y=n(26),Q=(n(55),n(14),n(6),n(360),n(82),n(602)),k=n(801),w=n(625),C=n(803),O=n(802),D=n(777),F=n(567),M=(n(35),n(213)),$=n(582),R={components:{VTextField:S.a,VTextarea:F.a,SubmitButton:M.default},mixins:[$.a],data:function(){return{title:"",content:"",subject:"",titleRules:[function(t){return!!t||"タイトルを入力してください"},function(t){return(t||"").length<=60||"最大入力文字数は60文字です"}],contentRules:[function(t){return!!t||"本文を入力してください"},function(t){return(t||"").length<=1e3||"最大入力文字数は1000文字です"}],selectSubjectDialog:!1,categories:[{name:"国語",subcategories:["現代文","古文","漢文"]},{name:"社会",subcategories:["日本史","世界史","地理","倫理・政治経済"]},{name:"数学",subcategories:["数学I・A","数学Ⅱ・B","数学Ⅲ・C"]},{name:"英語",subcategories:["英文法","英文読解","英作文","英単語","リスニング"]},{name:"理科",subcategories:["物理","生物","化学","地学"]},{name:"その他",subcategories:["過去問","小論文","その他科目"]}],selectedFile:null,errorMessage:"",error:!1}},methods:{submitForm:function(){this.$emit("submitSubjectQuestion",{title:this.title,content:this.content,subject:this.subject,image:this.selectedFile})}}},B=n(69),component=Object(B.a)(R,(function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" "),e(w.a,[e(l.a,{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[e(c.a,{on:{click:function(e){t.selectSubjectDialog=!0}}},[t._v("科目を選択する(必須)")])],1),t._v(" "),t.subject?e("h3",[t._v("選択された科目："+t._s(t.subject))]):t._e(),t._v(" "),e("br"),t._v(" "),e(S.a,{attrs:{counter:"",label:"タイトル",rules:t.titleRules,"data-cy":"create-title-field"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),e(F.a,{attrs:{outlined:"",counter:"",label:"本文",rules:t.contentRules,"data-cy":"create-content-field"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v("\n    *画像を添付できます(「.jpeg」「.jpg」「.png」のみ添付できます)\n    "),e("br"),t._v("\n    *添付できる画像のファイルサイズは3MBまでです\n    "),e("br"),e("br"),t._v(" "),e(k.a,{staticStyle:{width:"500px"},attrs:{accept:"image/jpeg, image/png","show-size":"","truncate-length":"15",outlined:"",label:"ファイルを選択","prepend-icon":"mdi-image-plus"},on:{change:t.checkFileSize},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}}),t._v(" "),t.errorMessage?[e(Q.a,{attrs:{type:"error",dense:"",text:"",border:"left"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")])]:t._e(),t._v(" "),e("submit-button",{attrs:{error:t.error,buttonTitle:"投稿する"},on:{submitForm:t.submitForm,closeDialog:function(e){return t.$emit("closeDialog")}}})],2),t._v(" "),e(d.a,{attrs:{"max-width":"500px"},model:{value:t.selectSubjectDialog,callback:function(e){t.selectSubjectDialog=e},expression:"selectSubjectDialog"}},[e(r.a,[e(o.d,{staticClass:"headline"},[t._v("科目選択")]),t._v(" "),e(o.c,[e(O.a,{attrs:{"data-cy":"select-subject-group"},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}},[t._l(t.categories,(function(n){return[e("p",{key:n.name},[t._v(t._s(n.name))]),t._v(" "),t._l(n.subcategories,(function(t){return e(C.a,{key:t,attrs:{label:t,value:t}})}))]}))],2)],1),t._v(" "),e("h3",[t._v("選択された科目:"+t._s(t.subject))]),t._v(" "),e(o.a,[e(D.a),t._v(" "),e(c.a,{attrs:{color:"primary",block:"","data-cy":"close-select-subject-dialog"},on:{click:function(e){t.selectSubjectDialog=!1}}},[t._v("閉じる")])],1)],1)],1)],1)}),[],!1,null,null,null),K=component.exports;installComponents(component,{SubmitButton:n(213).default});var P=n(600),z=n(119),U=n(576),T=n(44),A={components:{SubjectQuestionForm:K,EachSubjectQuestions:P.a},mixins:[z.a,U.a],asyncData:function(){return Object(y.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.get("/subject_questions");case 3:return e=t.sent,console.log(e.data),t.abrupt("return",{subjectQuestions:e.data});case 8:throw t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},data:function(){return{dialog:!1,perPage:10,page:1,searchSubjectQuestionsKeyword:"",sortQuestionsOptions:["新着順","投稿順","いいね!が多い順","返信が多い順"],questionsSubjectOptions:[{text:"国語",disabled:!0},"現代文","古文","漢文",{text:"社会",disabled:!0},"日本史","世界史","地理","倫理・政治経済",{text:"数学",disabled:!0},"数学I・A","数学Ⅱ・B","数学Ⅲ・C",{text:"英語",disabled:!0},"英文法","英文読解","英作文","英単語","リスニング",{text:"理科",disabled:!0},"物理","生物","化学","地学",{text:"その他",disabled:!0},"過去問","小論文","その他科目"],selectedSortOption:"",selectedQuestionsSubject:""}},computed:{subjectFilteredQuestions:function(){return this.filterQuestions()},sortedQuestions:function(){return this.sortQuestions(this.subjectFilteredQuestions)},subjectQuestionsChunk:function(){var t=(this.page-1)*this.perPage,e=t+this.perPage;return this.sortedQuestions.slice(t,e)},totalPages:function(){return Math.ceil(this.sortedQuestions.length/this.perPage)}},methods:{submitSubjectQuestion:function(data){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("current_user_id",t.currentUser.id),n.append("subject_question[title]",data.title),n.append("subject_question[content]",data.content),n.append("subject_question[subject]",data.subject),data.image&&n.append("subject_question[image]",data.image),e.prev=6,e.next=9,T.a.post("/subject_questions",n);case 9:c=e.sent,console.log(c),t.$router.push({path:"/subjectQuestions/".concat(c.data.id),query:{message:"質問の投稿が完了しました"}}),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),t.snackbarColor="red accent-2",t.snackbar=!0,t.flashMessage="質問を投稿できませんでした";case 20:t.dialog=!1;case 21:case"end":return e.stop()}}),e,null,[[6,14]])})))()},searchSubjectQuestions:function(){this.$router.push({path:"/subjectQuestions/searchSubjectQuestionsResult",query:{searchSubjectQuestionsKeyword:this.searchSubjectQuestionsKeyword}}),this.searchSubjectQuestionsKeyword=""},filterQuestions:function(){var t=this;if(this.selectedQuestionsSubject){var e=this.subjectQuestions.filter((function(e){return e.subject===t.selectedQuestionsSubject}));return this.page=1,e}return this.subjectQuestions},sortQuestions:function(t){return"新着順"===this.selectedSortOption?Object(x.a)(t).sort((function(a,b){return new Date(b.created_at)-new Date(a.created_at)})):"投稿順"===this.selectedSortOption?Object(x.a)(t).sort((function(a,b){return new Date(a.created_at)-new Date(b.created_at)})):"いいね!が多い順"===this.selectedSortOption?Object(x.a)(t).sort((function(a,b){return b.favorite_subject_questions_count-a.favorite_subject_questions_count})):"返信が多い順"===this.selectedSortOption?Object(x.a)(t).sort((function(a,b){return b.subject_question_replies_count-a.subject_question_replies_count})):Object(x.a)(t).sort((function(a,b){return new Date(a.created_at)-new Date(b.created_at)}))},openDialog:function(){this.currentUser?this.dialog=!0:this.$router.push({path:"/auth/login",query:{message:"ログインが必要です"}})},selectSubjectByChild:function(data){this.selectedQuestionsSubject=data}}},I=Object(B.a)(A,(function(){var t=this,e=t._self._c;return e("div",[e("br"),e("br"),t._v(" "),e(m.a,{attrs:{grow:""}},[e(f.a,{attrs:{to:"/questions/allQuestions"}},[t._v("\n      参考書別質問\n    ")]),t._v(" "),e(f.a,{attrs:{to:"/subjectQuestions/allSubjectQuestions"}},[t._v("\n      科目別質問\n    ")])],1),t._v(" "),e("br"),e("br"),e("br"),t._v(" "),e(h.a,[e(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e(r.a,{attrs:{width:"85%"}},[e(o.d,[e(h.a,{staticClass:"d-flex justify-center"},[e(l.a,{attrs:{cols:"11"}},[e(S.a,{attrs:{filled:"",outlined:"",dense:"",label:"質問を検索","data-cy":"search-subject-questions-field"},model:{value:t.searchSubjectQuestionsKeyword,callback:function(e){t.searchSubjectQuestionsKeyword=e},expression:"searchSubjectQuestionsKeyword"}})],1),t._v(" "),e(l.a,{attrs:{cols:"1"}},[e(c.a,{attrs:{"data-cy":"search-subject-questions-button"},on:{click:t.searchSubjectQuestions}},[t._v("検索")])],1)],1),t._v(" "),e(c.a,{attrs:{color:"primary",block:"",rounded:"",large:""},on:{click:t.openDialog}},[t._v("\n          新しい質問を投稿する\n        ")])],1)],1)],1)],1),t._v(" "),e("br"),e("br"),t._v(" "),e(h.a,[e(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e(r.a,{attrs:{width:"85%"}},[e(h.a,[e(l.a,{staticClass:"d-flex justify-center"},[e(o.d,[t._v("\n              ソート機能\n            ")])],1)],1),t._v(" "),e(o.a,[e(h.a,[e(l.a,{attrs:{cols:"6"}},[e(j.a,{attrs:{items:t.sortQuestionsOptions,label:"並び替え",outlined:"",chips:"",clearable:"","data-cy":"sort-subject-questions-select"},model:{value:t.selectedSortOption,callback:function(e){t.selectedSortOption=e},expression:"selectedSortOption"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(j.a,{attrs:{items:t.questionsSubjectOptions,label:"科目で絞り込み",outlined:"",chips:"",clearable:"","data-cy":"filter-subject-questions-select"},model:{value:t.selectedQuestionsSubject,callback:function(e){t.selectedQuestionsSubject=e},expression:"selectedQuestionsSubject"}})],1)],1)],1)],1)],1)],1),t._v(" "),e(d.a,{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r.a,[e(o.d,{staticStyle:{"justify-content":"center"}},[e("h2",[t._v("質問を投稿する")])]),t._v(" "),e(o.c,[e("subject-question-form",{on:{submitSubjectQuestion:t.submitSubjectQuestion,closeDialog:function(e){t.dialog=!1}}})],1)],1)],1),t._v(" "),e("br"),t._v(" "),e(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),e("br"),t._v(" "),e("each-subject-questions",{attrs:{subjectQuestions:t.subjectQuestionsChunk},on:{selectSubject:t.selectSubjectByChild}}),t._v(" "),e(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),e("br"),t._v(" "),e(v.a,{attrs:{timeout:3e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.flashMessage))])],1)}),[],!1,null,null,null);e.default=I.exports}}]);
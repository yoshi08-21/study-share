(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{789:function(t,n,e){var map={"./af":628,"./af.js":628,"./ar":629,"./ar-dz":630,"./ar-dz.js":630,"./ar-kw":631,"./ar-kw.js":631,"./ar-ly":632,"./ar-ly.js":632,"./ar-ma":633,"./ar-ma.js":633,"./ar-sa":634,"./ar-sa.js":634,"./ar-tn":635,"./ar-tn.js":635,"./ar.js":629,"./az":636,"./az.js":636,"./be":637,"./be.js":637,"./bg":638,"./bg.js":638,"./bm":639,"./bm.js":639,"./bn":640,"./bn-bd":641,"./bn-bd.js":641,"./bn.js":640,"./bo":642,"./bo.js":642,"./br":643,"./br.js":643,"./bs":644,"./bs.js":644,"./ca":645,"./ca.js":645,"./cs":646,"./cs.js":646,"./cv":647,"./cv.js":647,"./cy":648,"./cy.js":648,"./da":649,"./da.js":649,"./de":650,"./de-at":651,"./de-at.js":651,"./de-ch":652,"./de-ch.js":652,"./de.js":650,"./dv":653,"./dv.js":653,"./el":654,"./el.js":654,"./en-au":655,"./en-au.js":655,"./en-ca":656,"./en-ca.js":656,"./en-gb":657,"./en-gb.js":657,"./en-ie":658,"./en-ie.js":658,"./en-il":659,"./en-il.js":659,"./en-in":660,"./en-in.js":660,"./en-nz":661,"./en-nz.js":661,"./en-sg":662,"./en-sg.js":662,"./eo":663,"./eo.js":663,"./es":664,"./es-do":665,"./es-do.js":665,"./es-mx":666,"./es-mx.js":666,"./es-us":667,"./es-us.js":667,"./es.js":664,"./et":668,"./et.js":668,"./eu":669,"./eu.js":669,"./fa":670,"./fa.js":670,"./fi":671,"./fi.js":671,"./fil":672,"./fil.js":672,"./fo":673,"./fo.js":673,"./fr":674,"./fr-ca":675,"./fr-ca.js":675,"./fr-ch":676,"./fr-ch.js":676,"./fr.js":674,"./fy":677,"./fy.js":677,"./ga":678,"./ga.js":678,"./gd":679,"./gd.js":679,"./gl":680,"./gl.js":680,"./gom-deva":681,"./gom-deva.js":681,"./gom-latn":682,"./gom-latn.js":682,"./gu":683,"./gu.js":683,"./he":684,"./he.js":684,"./hi":685,"./hi.js":685,"./hr":686,"./hr.js":686,"./hu":687,"./hu.js":687,"./hy-am":688,"./hy-am.js":688,"./id":689,"./id.js":689,"./is":690,"./is.js":690,"./it":691,"./it-ch":692,"./it-ch.js":692,"./it.js":691,"./ja":693,"./ja.js":693,"./jv":694,"./jv.js":694,"./ka":695,"./ka.js":695,"./kk":696,"./kk.js":696,"./km":697,"./km.js":697,"./kn":698,"./kn.js":698,"./ko":699,"./ko.js":699,"./ku":700,"./ku.js":700,"./ky":701,"./ky.js":701,"./lb":702,"./lb.js":702,"./lo":703,"./lo.js":703,"./lt":704,"./lt.js":704,"./lv":705,"./lv.js":705,"./me":706,"./me.js":706,"./mi":707,"./mi.js":707,"./mk":708,"./mk.js":708,"./ml":709,"./ml.js":709,"./mn":710,"./mn.js":710,"./mr":711,"./mr.js":711,"./ms":712,"./ms-my":713,"./ms-my.js":713,"./ms.js":712,"./mt":714,"./mt.js":714,"./my":715,"./my.js":715,"./nb":716,"./nb.js":716,"./ne":717,"./ne.js":717,"./nl":718,"./nl-be":719,"./nl-be.js":719,"./nl.js":718,"./nn":720,"./nn.js":720,"./oc-lnc":721,"./oc-lnc.js":721,"./pa-in":722,"./pa-in.js":722,"./pl":723,"./pl.js":723,"./pt":724,"./pt-br":725,"./pt-br.js":725,"./pt.js":724,"./ro":726,"./ro.js":726,"./ru":727,"./ru.js":727,"./sd":728,"./sd.js":728,"./se":729,"./se.js":729,"./si":730,"./si.js":730,"./sk":731,"./sk.js":731,"./sl":732,"./sl.js":732,"./sq":733,"./sq.js":733,"./sr":734,"./sr-cyrl":735,"./sr-cyrl.js":735,"./sr.js":734,"./ss":736,"./ss.js":736,"./sv":737,"./sv.js":737,"./sw":738,"./sw.js":738,"./ta":739,"./ta.js":739,"./te":740,"./te.js":740,"./tet":741,"./tet.js":741,"./tg":742,"./tg.js":742,"./th":743,"./th.js":743,"./tk":744,"./tk.js":744,"./tl-ph":745,"./tl-ph.js":745,"./tlh":746,"./tlh.js":746,"./tr":747,"./tr.js":747,"./tzl":748,"./tzl.js":748,"./tzm":749,"./tzm-latn":750,"./tzm-latn.js":750,"./tzm.js":749,"./ug-cn":751,"./ug-cn.js":751,"./uk":752,"./uk.js":752,"./ur":753,"./ur.js":753,"./uz":754,"./uz-latn":755,"./uz-latn.js":755,"./uz.js":754,"./vi":756,"./vi.js":756,"./x-pseudo":757,"./x-pseudo.js":757,"./yo":758,"./yo.js":758,"./zh-cn":759,"./zh-cn.js":759,"./zh-hk":760,"./zh-hk.js":760,"./zh-mo":761,"./zh-mo.js":761,"./zh-tw":762,"./zh-tw.js":762};function o(t){var n=c(t);return e(n)}function c(t){if(!e.o(map,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=c,t.exports=o,o.id=789},807:function(t,n,e){"use strict";e.r(n);var o=e(265),c=e(255),r=e(111),l=e(565),j=e(804),_=e(596),f=e(564),v=(e(32),e(26)),d=(e(55),e(82),e(359)),m=e(164),y=(e(35),e(573)),h=e.n(y),k={props:{notification:Object},methods:{formattedTime:function(t){return h()(t).format("YYYY/MM/DD HH:mm")}}},x=e(69),w=Object(x.a)(k,(function(){var t=this,n=t._self._c;return n("div",[n(f.a,{staticClass:"justify-center"},[n(l.a,{attrs:{cols:"10"}},[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-comment-account-outline")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n              "),n("nuxt-link",{attrs:{to:"/surveys/".concat(t.notification.survey_id)}},[t._v("あなたのアンケート")]),t._v("に回答しました\n            ")],1),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n              "+t._s(t.formattedTime(t.notification.created_at))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,z={props:{notification:Object,contentUrl:String,contentTitle:String},methods:{formattedTime:function(t){return h()(t).format("YYYY/MM/DD HH:mm")}}},S=Object(x.a)(z,(function(){var t=this,n=t._self._c;return n("div",[n(f.a,{staticClass:"justify-center"},[n(l.a,{attrs:{cols:"10"}},[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-account-heart")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n              "),n("nuxt-link",{attrs:{to:t.contentUrl}},[t._v("あなたの"+t._s(t.contentTitle))]),t._v("にいいね!しました\n            ")],1),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n              "+t._s(t.formattedTime(t.notification.created_at))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,U={props:{notification:Object,questionInNotification:Object,replyInNotification:Object,questionUrl:String,replyUrl:String},methods:{formattedTime:function(t){return h()(t).format("YYYY/MM/DD HH:mm")}}},T=Object(x.a)(U,(function(){var t=this,n=t._self._c;return n("div",[n(f.a,{staticClass:"justify-center"},[n(l.a,{attrs:{cols:"10"}},[t.notification.target_user_id===t.questionInNotification.user_id?[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-comment-account-outline")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n                  "),n("nuxt-link",{attrs:{to:t.questionUrl}},[t._v("あなたの質問")]),t._v("に\n                  "),n("nuxt-link",{attrs:{to:t.replyUrl}},[t._v("返信")]),t._v("しました\n              ")],1),t._v(" "),n(r.c,[t._v("\n                "+t._s(t.$truncate(t.replyInNotification.content,100))+"\n              ")]),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n                "+t._s(t.formattedTime(t.notification.created_at))+"\n              ")])],1)],1)],1)]:[n(c.a,{attrs:{"min-height":"100px"}},[n(f.a,[n(l.a,{attrs:{cols:"12"}},[n(r.b,{staticStyle:{"font-size":"17px"}},[n(m.a,[t._v("mdi-comment-account-outline")]),t._v(" "),n("nuxt-link",{staticClass:"link-text",attrs:{to:"/users/".concat(t.notification.action_user.id)}},[t._v(t._s(t.notification.action_user.name))]),t._v("さんが\n                  "),n("nuxt-link",{attrs:{to:t.questionUrl}},[t._v("あなたが返信した質問")]),t._v("に\n                  "),n("nuxt-link",{attrs:{to:t.replyUrl,"data-cy":"notification-reply-link"}},[t._v("返信")]),t._v("しました\n              ")],1),t._v(" "),n(r.c,[t._v("\n                "+t._s(t.$truncate(t.replyInNotification.content,100))+"\n              ")]),t._v(" "),n(r.a,{staticStyle:{"justify-content":"end"}},[t._v("\n                "+t._s(t.formattedTime(t.notification.created_at))+"\n              ")])],1)],1)],1)]],2)],1)],1)}),[],!1,null,null,null).exports,N=e(119),O=e(44),C={middleware:d.default,mixins:[N.a],components:{AnswerToSurveyNotification:w,FavoriteNotification:S,ReplyNotification:T},asyncData:function(t){return Object(v.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.store,n.prev=1,n.next=4,O.a.get("/notifications",{params:{current_user_id:e.getters["auth/getCurrentUser"].id}});case 4:return o=n.sent,console.log(o),console.log(o.data),n.abrupt("return",{notifications:o.data});case 10:throw n.prev=10,n.t0=n.catch(1),console.log(n.t0),n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},data:function(){return{perPage:10,page:1}},computed:{notificationsChunk:function(){var t=(this.page-1)*this.perPage,n=t+this.perPage;return this.notifications.slice(t,n)},totalPages:function(){return Math.ceil(this.notifications.length/this.perPage)}},methods:{createSampleNotification:function(){var t=this;return Object(v.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.a.post("subject_question_replies/create_sample_notification",{current_user_id:t.currentUser.id,sample_user_id:16,content:"通知確認用サンプルメッセージ"});case 3:e=n.sent,console.log(e.data),t.$router.push({path:"/",query:{message:"通知が作成されました"}}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(0),console.log(n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},R=Object(x.a)(C,(function(){var t=this,n=t._self._c;return n("div",[n("h2",{staticStyle:{"text-align":"center"}},[t._v("通知一覧")]),t._v(" "),n("br"),n("br"),t._v(" "),n(f.a,[n(l.a,{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[n(c.a,{attrs:{width:"70%"}},[n(r.d,[n(f.a,{staticClass:"d-flex justify-center"},[n(l.a,{attrs:{cols:"9"}},[n(o.a,{attrs:{block:""},on:{click:t.createSampleNotification}},[t._v("通知サンプル作成")])],1)],1)],1),t._v(" "),n(r.c,{staticStyle:{"text-align":"center"}},[n("h4",[t._v("\n            ボタンを押すと通知が作成されます。通知機能の確認にお使いください。\n          ")])])],1)],1)],1),t._v(" "),n("br"),n("br"),t._v(" "),n(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(n){t.page=n},expression:"page"}}),t._v(" "),n("br"),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("\n    *通知が100件を超えると古い通知から削除されます\n  ")]),t._v(" "),t._l(t.notificationsChunk,(function(e,o){return n(j.a,{key:"notification_"+o,attrs:{"mb-5":"","data-cy":"each-notifications"}},["Favorite"==e.action_type?n("div",["Review"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/books/".concat(e.review.book_id,"/reviews/").concat(e.review.id),contentTitle:"レビュー"}})],1):"Question"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/books/".concat(e.question.book_id,"/questions/").concat(e.question.id),contentTitle:"質問"}})],1):"Reply"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/books/".concat(e.reply.question.book_id,"/questions/").concat(e.reply.question_id,"/replies/").concat(e.reply.id),contentTitle:"返信"}})],1):"SubjectQuestion"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/subjectQuestions/".concat(e.subject_question.id),contentTitle:"質問(科目別)"}})],1):"SubjectQuestionReply"==e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/subjectQuestions/".concat(e.subject_question_reply.subject_question_id,"/subjectQuestionReplies/").concat(e.subject_question_reply.id),contentTitle:"返信(科目別)"}})],1):t._e(),t._v(" "),"Survey"===e.action_to?n("div",[n("favorite-notification",{attrs:{notification:e,contentUrl:"/surveys/".concat(e.survey_id),contentTitle:"アンケート"}})],1):t._e()]):"Reply"==e.action_type?n("div",["Reply"==e.action_to?n("div",[n("reply-notification",{attrs:{notification:e,questionInNotification:e.question,replyInNotification:e.reply,questionUrl:"/books/".concat(e.reply.question.book_id,"/questions/").concat(e.reply.question_id),replyUrl:"/books/".concat(e.reply.question.book_id,"/questions/").concat(e.reply.question_id,"/replies/").concat(e.reply.id)}})],1):"SubjectQuestionReply"==e.action_to?n("div",[n("reply-notification",{attrs:{notification:e,questionInNotification:e.subject_question,replyInNotification:e.subject_question_reply,questionUrl:"/subjectQuestions/".concat(e.subject_question.id),replyUrl:"/subjectQuestions/".concat(e.subject_question_reply.subject_question_id,"/subjectQuestionReplies/").concat(e.subject_question_reply.id)}})],1):t._e()]):"SurveyAnswer"===e.action_type?n("div",[n("answer-to-survey-notification",{attrs:{notification:e}})],1):t._e()])})),t._v(" "),n(_.a,{attrs:{length:t.totalPages},model:{value:t.page,callback:function(n){t.page=n},expression:"page"}})],2)}),[],!1,null,null,null);n.default=R.exports}}]);